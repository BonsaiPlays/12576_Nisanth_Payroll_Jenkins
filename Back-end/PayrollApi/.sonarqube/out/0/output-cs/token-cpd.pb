˚Ô
JD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Utils\PdfExporter.cs
	namespace 	

PayrollApi
 
. 
Utils 
{ 
public 

static 
class 
PdfExporter #
{		 
private

 
static

 
string

 
FormatMoney

 )
(

) *
decimal

* 1
value

2 7
)

7 8
=>

9 ;
$"

< >
$str

> ?
{

? @
value

@ E
:

E F
$str

F H
}

H I
"

I J
;

J K
public 
static 
byte 
[ 
] 
GeneratePayslipPdf /
(/ 0
Payslip0 7
slip8 <
,< =
string> D
employeeNameE Q
)Q R
{ 	
var 
totalAllowances 
=  !
slip" &
.& '
AllowanceItems' 5
.5 6
Sum6 9
(9 :
a: ;
=>< >
a? @
.@ A
AmountA G
)G H
+I J
slipK O
.O P
BasicP U
+V W
slipX \
.\ ]
HRA] `
;` a
var 
totalDeductions 
=  !
slip" &
.& '
DeductionItems' 5
.5 6
Sum6 9
(9 :
d: ;
=>< >
d? @
.@ A
AmountA G
)G H
+I J
slipK O
.O P
TaxDeductedP [
;[ \
var 
doc 
= 
Document 
. 
Create %
(% &
	container& /
=>0 2
{ 
	container 
. 
Page 
( 
page #
=>$ &
{ 
page 
. 
Margin 
(  
$num  "
)" #
;# $
page 
. 
Header 
(  
)  !
. 
AlignCenter $
($ %
)% &
. 
Text 
( 
$"  
$str  *
{* +
slip+ /
./ 0
Month0 5
:5 6
$str6 8
}8 9
$str9 :
{: ;
slip; ?
.? @
Year@ D
}D E
"E F
)F G
. 
FontSize !
(! "
$num" $
)$ %
. 
SemiBold !
(! "
)" #
. 
	FontColor "
(" #
Colors# )
.) *
Blue* .
.. /
Medium/ 5
)5 6
;6 7
page 
. 
Content  
(  !
)! "
.   
Stack   
(   
stack   $
=>  % '
{!! 
stack## !
.$$  !
Item$$! %
($$% &
)$$& '
.%%  !

Background%%! +
(%%+ ,
Colors%%, 2
.%%2 3
Grey%%3 7
.%%7 8
Lighten3%%8 @
)%%@ A
.&&  !
Padding&&! (
(&&( )
$num&&) *
)&&* +
.''  !
Text''! %
(''% &
$str''& 5
)''5 6
.((  !
Bold((! %
(((% &
)((& '
;((' (
stack)) !
.**  !
Item**! %
(**% &
)**& '
.++  !
Table++! &
(++& '
table++' ,
=>++- /
{,,  !
table--$ )
.--) *
ColumnsDefinition--* ;
(--; <
c--< =
=>--> @
{..$ %
c//( )
.//) *
ConstantColumn//* 8
(//8 9
$num//9 <
)//< =
;//= >
c00( )
.00) *
RelativeColumn00* 8
(008 9
)009 :
;00: ;
}11$ %
)11% &
;11& '
void33$ (
Info33) -
(33- .
string33. 4
label335 :
,33: ;
string33< B
value33C H
)33H I
{44$ %
table55( -
.55- .
Cell55. 2
(552 3
)553 4
.554 5
Padding555 <
(55< =
$num55= >
)55> ?
.55? @
Text55@ D
(55D E
label55E J
)55J K
.55K L
SemiBold55L T
(55T U
)55U V
;55V W
table66( -
.66- .
Cell66. 2
(662 3
)663 4
.664 5
Padding665 <
(66< =
$num66= >
)66> ?
.66? @
Text66@ D
(66D E
value66E J
)66J K
;66K L
}77$ %
Info99$ (
(99( )
$str99) 3
,993 4
employeeName995 A
)99A B
;99B C
Info::$ (
(::( )
$str::) 7
,::7 8
$"::9 ;
{::; <
slip::< @
.::@ A
Year::A E
}::E F
$str::F G
{::G H
slip::H L
.::L M
Month::M R
:::R S
$str::S U
}::U V
"::V W
)::W X
;::X Y
};;  !
);;! "
;;;" #
stack>> !
.??  !
Item??! %
(??% &
)??& '
.@@  !

PaddingTop@@! +
(@@+ ,
$num@@, .
)@@. /
.AA  !

BackgroundAA! +
(AA+ ,
ColorsAA, 2
.AA2 3
GreyAA3 7
.AA7 8
Lighten3AA8 @
)AA@ A
.BB  !
PaddingBB! (
(BB( )
$numBB) *
)BB* +
.CC  !
TextCC! %
(CC% &
$strCC& =
)CC= >
.DD  !
BoldDD! %
(DD% &
)DD& '
;DD' (
stackEE !
.FF  !
ItemFF! %
(FF% &
)FF& '
.GG  !
TableGG! &
(GG& '
tableGG' ,
=>GG- /
{HH  !
tableII$ )
.II) *
ColumnsDefinitionII* ;
(II; <
cII< =
=>II> @
{JJ$ %
cKK( )
.KK) *
RelativeColumnKK* 8
(KK8 9
)KK9 :
;KK: ;
cLL( )
.LL) *
ConstantColumnLL* 8
(LL8 9
$numLL9 <
)LL< =
;LL= >
}MM$ %
)MM% &
;MM& '
voidOO$ (
RowOO) ,
(OO, -
stringOO- 3
labelOO4 9
,OO9 :
stringOO; A
valueOOB G
)OOG H
{PP$ %
tableQQ( -
.QQ- .
CellQQ. 2
(QQ2 3
)QQ3 4
.QQ4 5
PaddingQQ5 <
(QQ< =
$numQQ= >
)QQ> ?
.QQ? @
TextQQ@ D
(QQD E
labelQQE J
)QQJ K
;QQK L
tableRR( -
.RR- .
CellRR. 2
(RR2 3
)RR3 4
.RR4 5
PaddingRR5 <
(RR< =
$numRR= >
)RR> ?
.RR? @

AlignRightRR@ J
(RRJ K
)RRK L
.RRL M
TextRRM Q
(RRQ R
valueRRR W
)RRW X
;RRX Y
}SS$ %
RowUU$ '
(UU' (
$strUU( /
,UU/ 0
FormatMoneyUU1 <
(UU< =
slipUU= A
.UUA B
BasicUUB G
)UUG H
)UUH I
;UUI J
RowVV$ '
(VV' (
$strVV( -
,VV- .
FormatMoneyVV/ :
(VV: ;
slipVV; ?
.VV? @
HRAVV@ C
)VVC D
)VVD E
;VVE F
foreachWW$ +
(WW, -
varWW- 0
aWW1 2
inWW3 5
slipWW6 :
.WW: ;
AllowanceItemsWW; I
)WWI J
RowXX( +
(XX+ ,
aXX, -
.XX- .
LabelXX. 3
,XX3 4
FormatMoneyXX5 @
(XX@ A
aXXA B
.XXB C
AmountXXC I
)XXI J
)XXJ K
;XXK L
tableZZ$ )
.[[( )
Cell[[) -
([[- .
)[[. /
.\\( )

ColumnSpan\\) 3
(\\3 4
$num\\4 5
)\\5 6
.]]( )

PaddingTop]]) 3
(]]3 4
$num]]4 5
)]]5 6
.^^( )
	BorderTop^^) 2
(^^2 3
$num^^3 4
)^^4 5
.__( )
Text__) -
(__- .
$"__. 0
$str__0 @
{__@ A
FormatMoney__A L
(__L M
totalAllowances__M \
)__\ ]
}__] ^
"__^ _
)___ `
.``( )
Bold``) -
(``- .
)``. /
.aa( )

AlignRightaa) 3
(aa3 4
)aa4 5
;aa5 6
}bb  !
)bb! "
;bb" #
stackee !
.ff  !
Itemff! %
(ff% &
)ff& '
.gg  !

PaddingTopgg! +
(gg+ ,
$numgg, .
)gg. /
.hh  !

Backgroundhh! +
(hh+ ,
Colorshh, 2
.hh2 3
Greyhh3 7
.hh7 8
Lighten3hh8 @
)hh@ A
.ii  !
Paddingii! (
(ii( )
$numii) *
)ii* +
.jj  !
Textjj! %
(jj% &
$strjj& 2
)jj2 3
.kk  !
Boldkk! %
(kk% &
)kk& '
;kk' (
stackll !
.mm  !
Itemmm! %
(mm% &
)mm& '
.nn  !
Tablenn! &
(nn& '
tablenn' ,
=>nn- /
{oo  !
tablepp$ )
.pp) *
ColumnsDefinitionpp* ;
(pp; <
cpp< =
=>pp> @
{qq$ %
crr( )
.rr) *
RelativeColumnrr* 8
(rr8 9
)rr9 :
;rr: ;
css( )
.ss) *
ConstantColumnss* 8
(ss8 9
$numss9 <
)ss< =
;ss= >
}tt$ %
)tt% &
;tt& '
voidvv$ (
Rowvv) ,
(vv, -
stringvv- 3
labelvv4 9
,vv9 :
stringvv; A
valuevvB G
)vvG H
{ww$ %
tablexx( -
.xx- .
Cellxx. 2
(xx2 3
)xx3 4
.xx4 5
Paddingxx5 <
(xx< =
$numxx= >
)xx> ?
.xx? @
Textxx@ D
(xxD E
labelxxE J
)xxJ K
;xxK L
tableyy( -
.yy- .
Cellyy. 2
(yy2 3
)yy3 4
.yy4 5
Paddingyy5 <
(yy< =
$numyy= >
)yy> ?
.yy? @

AlignRightyy@ J
(yyJ K
)yyK L
.yyL M
TextyyM Q
(yyQ R
valueyyR W
)yyW X
;yyX Y
}zz$ %
foreach||$ +
(||, -
var||- 0
d||1 2
in||3 5
slip||6 :
.||: ;
DeductionItems||; I
)||I J
Row}}( +
(}}+ ,
d}}, -
.}}- .
Label}}. 3
,}}3 4
FormatMoney}}5 @
(}}@ A
d}}A B
.}}B C
Amount}}C I
)}}I J
)}}J K
;}}K L
Row$ '
(' (
$str( 6
,6 7
FormatMoney8 C
(C D
slipD H
.H I
TaxDeductedI T
)T U
)U V
;V W
Row
ÄÄ$ '
(
ÄÄ' (
$str
ÄÄ( 2
,
ÄÄ2 3
slip
ÄÄ4 8
.
ÄÄ8 9
LOPDays
ÄÄ9 @
.
ÄÄ@ A
ToString
ÄÄA I
(
ÄÄI J
)
ÄÄJ K
)
ÄÄK L
;
ÄÄL M
table
ÇÇ$ )
.
ÉÉ( )
Cell
ÉÉ) -
(
ÉÉ- .
)
ÉÉ. /
.
ÑÑ( )

ColumnSpan
ÑÑ) 3
(
ÑÑ3 4
$num
ÑÑ4 5
)
ÑÑ5 6
.
ÖÖ( )

PaddingTop
ÖÖ) 3
(
ÖÖ3 4
$num
ÖÖ4 5
)
ÖÖ5 6
.
ÜÜ( )
	BorderTop
ÜÜ) 2
(
ÜÜ2 3
$num
ÜÜ3 4
)
ÜÜ4 5
.
áá( )
Text
áá) -
(
áá- .
$"
áá. 0
$str
áá0 B
{
ááB C
FormatMoney
ááC N
(
ááN O
totalDeductions
ááO ^
)
áá^ _
}
áá_ `
"
áá` a
)
ááa b
.
àà( )
Bold
àà) -
(
àà- .
)
àà. /
.
ââ( )

AlignRight
ââ) 3
(
ââ3 4
)
ââ4 5
;
ââ5 6
}
ää  !
)
ää! "
;
ää" #
stack
çç !
.
éé  !
Item
éé! %
(
éé% &
)
éé& '
.
èè  !

PaddingTop
èè! +
(
èè+ ,
$num
èè, .
)
èè. /
.
êê  !
Border
êê! '
(
êê' (
$num
êê( )
)
êê) *
.
ëë  !

Background
ëë! +
(
ëë+ ,
Colors
ëë, 2
.
ëë2 3
Blue
ëë3 7
.
ëë7 8
Lighten5
ëë8 @
)
ëë@ A
.
íí  !
Padding
íí! (
(
íí( )
$num
íí) +
)
íí+ ,
.
ìì  !
AlignCenter
ìì! ,
(
ìì, -
)
ìì- .
.
îî  !
Text
îî! %
(
îî% &
t
îî& '
=>
îî( *
{
ïï  !
t
ññ$ %
.
ññ% &
Span
ññ& *
(
ññ* +
$str
ññ+ 6
)
ññ6 7
.
ññ7 8
SemiBold
ññ8 @
(
ññ@ A
)
ññA B
.
ññB C
FontSize
ññC K
(
ññK L
$num
ññL N
)
ññN O
;
ññO P
t
óó$ %
.
óó% &
Span
óó& *
(
óó* +
FormatMoney
óó+ 6
(
óó6 7
slip
óó7 ;
.
óó; <
NetPay
óó< B
)
óóB C
)
óóC D
.
òò( )
Bold
òò) -
(
òò- .
)
òò. /
.
ôô( )
	FontColor
ôô) 2
(
ôô2 3
Colors
ôô3 9
.
ôô9 :
Green
ôô: ?
.
ôô? @
Medium
ôô@ F
)
ôôF G
.
öö( )
FontSize
öö) 1
(
öö1 2
$num
öö2 4
)
öö4 5
;
öö5 6
}
õõ  !
)
õõ! "
;
õõ" #
}
úú 
)
úú 
;
úú 
page
ûû 
.
ûû 
Footer
ûû 
(
ûû  
)
ûû  !
.
üü 

AlignRight
üü #
(
üü# $
)
üü$ %
.
†† 
Text
†† 
(
†† 
$"
††  
$str
††  +
{
††+ ,
DateTime
††, 4
.
††4 5
UtcNow
††5 ;
:
††; <
$str
††< L
}
††L M
$str
††M Q
"
††Q R
)
††R S
.
°° 
FontSize
°° !
(
°°! "
$num
°°" #
)
°°# $
.
¢¢ 
	FontColor
¢¢ "
(
¢¢" #
Colors
¢¢# )
.
¢¢) *
Grey
¢¢* .
.
¢¢. /
Darken1
¢¢/ 6
)
¢¢6 7
;
¢¢7 8
}
££ 
)
££ 
;
££ 
}
§§ 
)
§§ 
;
§§ 
return
¶¶ 
doc
¶¶ 
.
¶¶ 
GeneratePdf
¶¶ "
(
¶¶" #
)
¶¶# $
;
¶¶$ %
}
ßß 	
public
©© 
static
©© 
byte
©© 
[
©© 
]
©© 
GenerateCtcPdf
©© +
(
©©+ ,
CTCStructure
©©, 8
ctc
©©9 <
,
©©< =
string
©©> D
employeeName
©©E Q
)
©©Q R
{
™™ 	
var
´´ 
totalAllowances
´´ 
=
´´  !
ctc
´´" %
.
´´% &

Allowances
´´& 0
.
´´0 1
Sum
´´1 4
(
´´4 5
a
´´5 6
=>
´´7 9
a
´´: ;
.
´´; <
Amount
´´< B
)
´´B C
+
´´D E
ctc
´´F I
.
´´I J
Basic
´´J O
+
´´P Q
ctc
´´R U
.
´´U V
HRA
´´V Y
;
´´Y Z
var
¨¨ 
totalDeductions
¨¨ 
=
¨¨  !
ctc
¨¨" %
.
¨¨% &

Deductions
¨¨& 0
.
¨¨0 1
Sum
¨¨1 4
(
¨¨4 5
d
¨¨5 6
=>
¨¨7 9
d
¨¨: ;
.
¨¨; <
Amount
¨¨< B
)
¨¨B C
;
¨¨C D
var
ÆÆ 
doc
ÆÆ 
=
ÆÆ 
Document
ÆÆ 
.
ÆÆ 
Create
ÆÆ %
(
ÆÆ% &
	container
ÆÆ& /
=>
ÆÆ0 2
{
ØØ 
	container
∞∞ 
.
∞∞ 
Page
∞∞ 
(
∞∞ 
page
∞∞ #
=>
∞∞$ &
{
±± 
page
≤≤ 
.
≤≤ 
Margin
≤≤ 
(
≤≤  
$num
≤≤  "
)
≤≤" #
;
≤≤# $
page
µµ 
.
µµ 
Header
µµ 
(
µµ  
)
µµ  !
.
∂∂ 
AlignCenter
∂∂ $
(
∂∂$ %
)
∂∂% &
.
∑∑ 
Text
∑∑ 
(
∑∑ 
$"
∑∑  
$str
∑∑  0
{
∑∑0 1
employeeName
∑∑1 =
}
∑∑= >
"
∑∑> ?
)
∑∑? @
.
∏∏ 
FontSize
∏∏ !
(
∏∏! "
$num
∏∏" $
)
∏∏$ %
.
ππ 
SemiBold
ππ !
(
ππ! "
)
ππ" #
.
∫∫ 
	FontColor
∫∫ "
(
∫∫" #
Colors
∫∫# )
.
∫∫) *
Blue
∫∫* .
.
∫∫. /
Medium
∫∫/ 5
)
∫∫5 6
;
∫∫6 7
page
ºº 
.
ºº 
Content
ºº  
(
ºº  !
)
ºº! "
.
ΩΩ 
Stack
ΩΩ 
(
ΩΩ 
stack
ΩΩ $
=>
ΩΩ% '
{
ææ 
stack
¿¿ !
.
¡¡  !
Item
¡¡! %
(
¡¡% &
)
¡¡& '
.
¬¬  !

Background
¬¬! +
(
¬¬+ ,
Colors
¬¬, 2
.
¬¬2 3
Grey
¬¬3 7
.
¬¬7 8
Lighten3
¬¬8 @
)
¬¬@ A
.
√√  !
Padding
√√! (
(
√√( )
$num
√√) *
)
√√* +
.
ƒƒ  !
Text
ƒƒ! %
(
ƒƒ% &
$str
ƒƒ& 5
)
ƒƒ5 6
.
≈≈  !
Bold
≈≈! %
(
≈≈% &
)
≈≈& '
;
≈≈' (
stack
∆∆ !
.
««  !
Item
««! %
(
««% &
)
««& '
.
»»  !
Table
»»! &
(
»»& '
table
»»' ,
=>
»»- /
{
……  !
table
  $ )
.
  ) *
ColumnsDefinition
  * ;
(
  ; <
c
  < =
=>
  > @
{
ÀÀ$ %
c
ÃÃ( )
.
ÃÃ) *
ConstantColumn
ÃÃ* 8
(
ÃÃ8 9
$num
ÃÃ9 <
)
ÃÃ< =
;
ÃÃ= >
c
ÕÕ( )
.
ÕÕ) *
RelativeColumn
ÕÕ* 8
(
ÕÕ8 9
)
ÕÕ9 :
;
ÕÕ: ;
}
ŒŒ$ %
)
ŒŒ% &
;
ŒŒ& '
void
œœ$ (
Info
œœ) -
(
œœ- .
string
œœ. 4
label
œœ5 :
,
œœ: ;
string
œœ< B
value
œœC H
)
œœH I
{
––$ %
table
——( -
.
——- .
Cell
——. 2
(
——2 3
)
——3 4
.
——4 5
Padding
——5 <
(
——< =
$num
——= >
)
——> ?
.
——? @
Text
——@ D
(
——D E
label
——E J
)
——J K
.
——K L
SemiBold
——L T
(
——T U
)
——U V
;
——V W
table
““( -
.
““- .
Cell
““. 2
(
““2 3
)
““3 4
.
““4 5
Padding
““5 <
(
““< =
$num
““= >
)
““> ?
.
““? @
Text
““@ D
(
““D E
value
““E J
)
““J K
;
““K L
}
””$ %
Info
‘‘$ (
(
‘‘( )
$str
‘‘) 3
,
‘‘3 4
employeeName
‘‘5 A
)
‘‘A B
;
‘‘B C
Info
’’$ (
(
’’( )
$str
’’) 9
,
’’9 :
$"
’’; =
{
’’= >
ctc
’’> A
.
’’A B
EffectiveFrom
’’B O
:
’’O P
$str
’’P Z
}
’’Z [
"
’’[ \
)
’’\ ]
;
’’] ^
Info
÷÷$ (
(
÷÷( )
$str
÷÷) 1
,
÷÷1 2
ctc
÷÷3 6
.
÷÷6 7
Status
÷÷7 =
.
÷÷= >
ToString
÷÷> F
(
÷÷F G
)
÷÷G H
)
÷÷H I
;
÷÷I J
}
◊◊  !
)
◊◊! "
;
◊◊" #
stack
⁄⁄ !
.
€€  !
Item
€€! %
(
€€% &
)
€€& '
.
‹‹  !

PaddingTop
‹‹! +
(
‹‹+ ,
$num
‹‹, .
)
‹‹. /
.
››  !

Background
››! +
(
››+ ,
Colors
››, 2
.
››2 3
Grey
››3 7
.
››7 8
Lighten3
››8 @
)
››@ A
.
ﬁﬁ  !
Padding
ﬁﬁ! (
(
ﬁﬁ( )
$num
ﬁﬁ) *
)
ﬁﬁ* +
.
ﬂﬂ  !
Text
ﬂﬂ! %
(
ﬂﬂ% &
$str
ﬂﬂ& =
)
ﬂﬂ= >
.
‡‡  !
Bold
‡‡! %
(
‡‡% &
)
‡‡& '
;
‡‡' (
stack
·· !
.
‚‚  !
Item
‚‚! %
(
‚‚% &
)
‚‚& '
.
„„  !
Table
„„! &
(
„„& '
table
„„' ,
=>
„„- /
{
‰‰  !
table
ÂÂ$ )
.
ÂÂ) *
ColumnsDefinition
ÂÂ* ;
(
ÂÂ; <
c
ÂÂ< =
=>
ÂÂ> @
{
ÊÊ$ %
c
ÁÁ( )
.
ÁÁ) *
RelativeColumn
ÁÁ* 8
(
ÁÁ8 9
)
ÁÁ9 :
;
ÁÁ: ;
c
ËË( )
.
ËË) *
ConstantColumn
ËË* 8
(
ËË8 9
$num
ËË9 <
)
ËË< =
;
ËË= >
}
ÈÈ$ %
)
ÈÈ% &
;
ÈÈ& '
void
ÍÍ$ (
Row
ÍÍ) ,
(
ÍÍ, -
string
ÍÍ- 3
label
ÍÍ4 9
,
ÍÍ9 :
string
ÍÍ; A
value
ÍÍB G
)
ÍÍG H
{
ÎÎ$ %
table
ÏÏ( -
.
ÏÏ- .
Cell
ÏÏ. 2
(
ÏÏ2 3
)
ÏÏ3 4
.
ÏÏ4 5
Padding
ÏÏ5 <
(
ÏÏ< =
$num
ÏÏ= >
)
ÏÏ> ?
.
ÏÏ? @
Text
ÏÏ@ D
(
ÏÏD E
label
ÏÏE J
)
ÏÏJ K
;
ÏÏK L
table
ÌÌ( -
.
ÌÌ- .
Cell
ÌÌ. 2
(
ÌÌ2 3
)
ÌÌ3 4
.
ÌÌ4 5
Padding
ÌÌ5 <
(
ÌÌ< =
$num
ÌÌ= >
)
ÌÌ> ?
.
ÌÌ? @

AlignRight
ÌÌ@ J
(
ÌÌJ K
)
ÌÌK L
.
ÌÌL M
Text
ÌÌM Q
(
ÌÌQ R
value
ÌÌR W
)
ÌÌW X
;
ÌÌX Y
}
ÓÓ$ %
Row
$ '
(
' (
$str
( /
,
/ 0
FormatMoney
1 <
(
< =
ctc
= @
.
@ A
Basic
A F
)
F G
)
G H
;
H I
Row
ÒÒ$ '
(
ÒÒ' (
$str
ÒÒ( -
,
ÒÒ- .
FormatMoney
ÒÒ/ :
(
ÒÒ: ;
ctc
ÒÒ; >
.
ÒÒ> ?
HRA
ÒÒ? B
)
ÒÒB C
)
ÒÒC D
;
ÒÒD E
foreach
ÚÚ$ +
(
ÚÚ, -
var
ÚÚ- 0
a
ÚÚ1 2
in
ÚÚ3 5
ctc
ÚÚ6 9
.
ÚÚ9 :

Allowances
ÚÚ: D
)
ÚÚD E
Row
ÛÛ( +
(
ÛÛ+ ,
a
ÛÛ, -
.
ÛÛ- .
Label
ÛÛ. 3
,
ÛÛ3 4
FormatMoney
ÛÛ5 @
(
ÛÛ@ A
a
ÛÛA B
.
ÛÛB C
Amount
ÛÛC I
)
ÛÛI J
)
ÛÛJ K
;
ÛÛK L
table
ıı$ )
.
ˆˆ( )
Cell
ˆˆ) -
(
ˆˆ- .
)
ˆˆ. /
.
˜˜( )

ColumnSpan
˜˜) 3
(
˜˜3 4
$num
˜˜4 5
)
˜˜5 6
.
¯¯( )

PaddingTop
¯¯) 3
(
¯¯3 4
$num
¯¯4 5
)
¯¯5 6
.
˘˘( )
	BorderTop
˘˘) 2
(
˘˘2 3
$num
˘˘3 4
)
˘˘4 5
.
˙˙( )
Text
˙˙) -
(
˙˙- .
$"
˙˙. 0
$str
˙˙0 @
{
˙˙@ A
FormatMoney
˙˙A L
(
˙˙L M
totalAllowances
˙˙M \
)
˙˙\ ]
}
˙˙] ^
"
˙˙^ _
)
˙˙_ `
.
˚˚( )
Bold
˚˚) -
(
˚˚- .
)
˚˚. /
.
¸¸( )

AlignRight
¸¸) 3
(
¸¸3 4
)
¸¸4 5
;
¸¸5 6
}
˝˝  !
)
˝˝! "
;
˝˝" #
stack
ÄÄ !
.
ÅÅ  !
Item
ÅÅ! %
(
ÅÅ% &
)
ÅÅ& '
.
ÇÇ  !

PaddingTop
ÇÇ! +
(
ÇÇ+ ,
$num
ÇÇ, .
)
ÇÇ. /
.
ÉÉ  !

Background
ÉÉ! +
(
ÉÉ+ ,
Colors
ÉÉ, 2
.
ÉÉ2 3
Grey
ÉÉ3 7
.
ÉÉ7 8
Lighten3
ÉÉ8 @
)
ÉÉ@ A
.
ÑÑ  !
Padding
ÑÑ! (
(
ÑÑ( )
$num
ÑÑ) *
)
ÑÑ* +
.
ÖÖ  !
Text
ÖÖ! %
(
ÖÖ% &
$str
ÖÖ& 2
)
ÖÖ2 3
.
ÜÜ  !
Bold
ÜÜ! %
(
ÜÜ% &
)
ÜÜ& '
;
ÜÜ' (
stack
áá !
.
àà  !
Item
àà! %
(
àà% &
)
àà& '
.
ââ  !
Table
ââ! &
(
ââ& '
table
ââ' ,
=>
ââ- /
{
ää  !
table
ãã$ )
.
ãã) *
ColumnsDefinition
ãã* ;
(
ãã; <
c
ãã< =
=>
ãã> @
{
åå$ %
c
çç( )
.
çç) *
RelativeColumn
çç* 8
(
çç8 9
)
çç9 :
;
çç: ;
c
éé( )
.
éé) *
ConstantColumn
éé* 8
(
éé8 9
$num
éé9 <
)
éé< =
;
éé= >
}
èè$ %
)
èè% &
;
èè& '
void
êê$ (
Row
êê) ,
(
êê, -
string
êê- 3
label
êê4 9
,
êê9 :
string
êê; A
value
êêB G
)
êêG H
{
ëë$ %
table
íí( -
.
íí- .
Cell
íí. 2
(
íí2 3
)
íí3 4
.
íí4 5
Padding
íí5 <
(
íí< =
$num
íí= >
)
íí> ?
.
íí? @
Text
íí@ D
(
ííD E
label
ííE J
)
ííJ K
;
ííK L
table
ìì( -
.
ìì- .
Cell
ìì. 2
(
ìì2 3
)
ìì3 4
.
ìì4 5
Padding
ìì5 <
(
ìì< =
$num
ìì= >
)
ìì> ?
.
ìì? @

AlignRight
ìì@ J
(
ììJ K
)
ììK L
.
ììL M
Text
ììM Q
(
ììQ R
value
ììR W
)
ììW X
;
ììX Y
}
îî$ %
foreach
ññ$ +
(
ññ, -
var
ññ- 0
d
ññ1 2
in
ññ3 5
ctc
ññ6 9
.
ññ9 :

Deductions
ññ: D
)
ññD E
Row
óó( +
(
óó+ ,
d
óó, -
.
óó- .
Label
óó. 3
,
óó3 4
FormatMoney
óó5 @
(
óó@ A
d
óóA B
.
óóB C
Amount
óóC I
)
óóI J
)
óóJ K
;
óóK L
Row
ôô$ '
(
ôô' (
$str
ôô( 5
,
ôô5 6
$"
ôô7 9
{
ôô9 :
ctc
ôô: =
.
ôô= >

TaxPercent
ôô> H
:
ôôH I
$str
ôôI K
}
ôôK L
$str
ôôL M
"
ôôM N
)
ôôN O
;
ôôO P
table
õõ$ )
.
úú( )
Cell
úú) -
(
úú- .
)
úú. /
.
ùù( )

ColumnSpan
ùù) 3
(
ùù3 4
$num
ùù4 5
)
ùù5 6
.
ûû( )

PaddingTop
ûû) 3
(
ûû3 4
$num
ûû4 5
)
ûû5 6
.
üü( )
	BorderTop
üü) 2
(
üü2 3
$num
üü3 4
)
üü4 5
.
††( )
Text
††) -
(
††- .
$"
††. 0
$str
††0 B
{
††B C
FormatMoney
††C N
(
††N O
totalDeductions
††O ^
)
††^ _
}
††_ `
"
††` a
)
††a b
.
°°( )
Bold
°°) -
(
°°- .
)
°°. /
.
¢¢( )

AlignRight
¢¢) 3
(
¢¢3 4
)
¢¢4 5
;
¢¢5 6
}
££  !
)
££! "
;
££" #
stack
¶¶ !
.
ßß  !
Item
ßß! %
(
ßß% &
)
ßß& '
.
®®  !

PaddingTop
®®! +
(
®®+ ,
$num
®®, .
)
®®. /
.
©©  !
Border
©©! '
(
©©' (
$num
©©( )
)
©©) *
.
™™  !

Background
™™! +
(
™™+ ,
Colors
™™, 2
.
™™2 3
Blue
™™3 7
.
™™7 8
Lighten5
™™8 @
)
™™@ A
.
´´  !
Padding
´´! (
(
´´( )
$num
´´) +
)
´´+ ,
.
¨¨  !
AlignCenter
¨¨! ,
(
¨¨, -
)
¨¨- .
.
≠≠  !
Text
≠≠! %
(
≠≠% &
t
≠≠& '
=>
≠≠( *
{
ÆÆ  !
t
ØØ$ %
.
ØØ% &
Span
ØØ& *
(
ØØ* +
$str
ØØ+ 8
)
ØØ8 9
.
ØØ9 :
SemiBold
ØØ: B
(
ØØB C
)
ØØC D
.
ØØD E
FontSize
ØØE M
(
ØØM N
$num
ØØN P
)
ØØP Q
;
ØØQ R
t
∞∞$ %
.
∞∞% &
Span
∞∞& *
(
∞∞* +
FormatMoney
∞∞+ 6
(
∞∞6 7
ctc
∞∞7 :
.
∞∞: ;
GrossCTC
∞∞; C
)
∞∞C D
)
∞∞D E
.
±±( )
Bold
±±) -
(
±±- .
)
±±. /
.
≤≤( )
	FontColor
≤≤) 2
(
≤≤2 3
Colors
≤≤3 9
.
≤≤9 :
Green
≤≤: ?
.
≤≤? @
Medium
≤≤@ F
)
≤≤F G
.
≥≥( )
FontSize
≥≥) 1
(
≥≥1 2
$num
≥≥2 4
)
≥≥4 5
;
≥≥5 6
}
¥¥  !
)
¥¥! "
;
¥¥" #
}
µµ 
)
µµ 
;
µµ 
page
∑∑ 
.
∑∑ 
Footer
∑∑ 
(
∑∑  
)
∑∑  !
.
∏∏ 

AlignRight
∏∏ #
(
∏∏# $
)
∏∏$ %
.
ππ 
Text
ππ 
(
ππ 
$"
ππ  
$str
ππ  +
{
ππ+ ,
DateTime
ππ, 4
.
ππ4 5
UtcNow
ππ5 ;
:
ππ; <
$str
ππ< L
}
ππL M
$str
ππM Q
"
ππQ R
)
ππR S
.
∫∫ 
FontSize
∫∫ !
(
∫∫! "
$num
∫∫" #
)
∫∫# $
.
ªª 
	FontColor
ªª "
(
ªª" #
Colors
ªª# )
.
ªª) *
Grey
ªª* .
.
ªª. /
Darken1
ªª/ 6
)
ªª6 7
;
ªª7 8
}
ºº 
)
ºº 
;
ºº 
}
ΩΩ 
)
ΩΩ 
;
ΩΩ 
return
øø 
doc
øø 
.
øø 
GeneratePdf
øø "
(
øø" #
)
øø# $
;
øø$ %
}
¿¿ 	
}
¡¡ 
}¬¬ „
ID:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Utils\Pagination.cs
	namespace 	

PayrollApi
 
. 
Utils 
{ 
public 

static 
class 

Pagination "
{ 
public 
static 
async 
Task  
<  !
(! "
int" %
total& +
,+ ,
List- 1
<1 2
T2 3
>3 4
items5 :
): ;
>; <
ToPagedAsync= I
<I J
TJ K
>K L
(L M
thisM Q

IQueryableR \
<\ ]
T] ^
>^ _
query` e
,e f
intg j
pagek o
,o p
intq t
pageSizeu }
)} ~
{ 	
var		 
total		 
=		 
await		 
query		 #
.		# $

CountAsync		$ .
(		. /
)		/ 0
;		0 1
var

 
items

 
=

 
await

 
query

 #
.

# $
Skip

$ (
(

( )
(

) *
page

* .
-

/ 0
$num

1 2
)

2 3
*

4 5
pageSize

6 >
)

> ?
.

? @
Take

@ D
(

D E
pageSize

E M
)

M N
.

N O
ToListAsync

O Z
(

Z [
)

[ \
;

\ ]
return 
( 
total 
, 
items  
)  !
;! "
} 	
} 
} ‹≠
LD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Utils\ExcelExporter.cs
	namespace 	

PayrollApi
 
. 
Utils 
{ 
public 

static 
class 
ExcelExporter %
{		 
public 
static 
byte 
[ 
] 
ExportPayslips +
(+ ,
IEnumerable, 7
<7 8
Payslip8 ?
>? @
slipsA F
)F G
{ 	
using 
var 
package 
= 
new  #
ExcelPackage$ 0
(0 1
)1 2
;2 3
var 
ws 
= 
package 
. 
Workbook %
.% &

Worksheets& 0
.0 1
Add1 4
(4 5
$str5 ?
)? @
;@ A
if 
( 
! 
slips 
. 
Any 
( 
) 
) 
return 
package 
. 
GetAsByteArray -
(- .
). /
;/ 0
var 
empName 
= 
slips 
.  
First  %
(% &
)& '
.' (
EmployeeProfile( 7
?7 8
.8 9
User9 =
?= >
.> ?
FullName? G
??H J
$strK U
;U V
ws 
. 
Cells 
[ 
$num 
, 
$num 
] 
. 
Value  
=! "
$"# %
{% &
empName& -
}- .
$str. 9
"9 :
;: ;
ws 
. 
Cells 
[ 
$num 
, 
$num 
, 
$num 
, 
$num  
]  !
.! "
Merge" '
=( )
true* .
;. /
ws 
. 
Cells 
[ 
$num 
, 
$num 
] 
. 
Style  
.  !
Font! %
.% &
Bold& *
=+ ,
true- 1
;1 2
ws 
. 
Cells 
[ 
$num 
, 
$num 
] 
. 
Style  
.  !
Font! %
.% &
Size& *
=+ ,
$num- /
;/ 0
var 
headers 
= 
new 
[ 
] 
{ 
$str #
,# $
$str   
,   
$str!! 
,!! 
$""" 
$str"" 
""" 
,"" 
$"## 
$str## 
"## 
,## 
$"$$ 
$str$$ &
"$$& '
,$$' (
$"%% 
$str%% &
"%%& '
,%%' (
$"&& 
$str&& 
"&& 
,&& 
$str'' 
,'' 
$"(( 
$str(( 
"(( 
,(( 
$str)) 
,)) 
$str** 
,** 
}++ 
;++ 
for-- 
(-- 
int-- 
i-- 
=-- 
$num-- 
;-- 
i-- 
<-- 
headers--  '
.--' (
Length--( .
;--. /
i--0 1
++--1 3
)--3 4
ws.. 
... 
Cells.. 
[.. 
$num.. 
,.. 
i.. 
+.. 
$num..  !
]..! "
..." #
Value..# (
=..) *
headers..+ 2
[..2 3
i..3 4
]..4 5
;..5 6
int00 
row00 
=00 
$num00 
;00 
foreach11 
(11 
var11 
s11 
in11 
slips11 #
)11# $
{22 
var33 
totalAllowances33 #
=33$ %
s33& '
.33' (
AllowanceItems33( 6
.336 7
Sum337 :
(33: ;
a33; <
=>33= ?
a33@ A
.33A B
Amount33B H
)33H I
;33I J
var44 
totalDeductions44 #
=44$ %
s44& '
.44' (
DeductionItems44( 6
.446 7
Sum447 :
(44: ;
d44; <
=>44= ?
d44@ A
.44A B
Amount44B H
)44H I
;44I J
ws66 
.66 
Cells66 
[66 
row66 
,66 
$num66 
]66  
.66  !
Value66! &
=66' (
s66) *
.66* +
EmployeeProfileId66+ <
;66< =
ws77 
.77 
Cells77 
[77 
row77 
,77 
$num77 
]77  
.77  !
Value77! &
=77' (
s77) *
.77* +
Year77+ /
;77/ 0
ws88 
.88 
Cells88 
[88 
row88 
,88 
$num88 
]88  
.88  !
Value88! &
=88' (
s88) *
.88* +
Month88+ 0
;880 1
ws:: 
.:: 
Cells:: 
[:: 
row:: 
,:: 
$num:: 
]::  
.::  !
Value::! &
=::' (
Math::) -
.::- .
Round::. 3
(::3 4
s::4 5
.::5 6
Basic::6 ;
,::; <
$num::= >
)::> ?
;::? @
ws;; 
.;; 
Cells;; 
[;; 
row;; 
,;; 
$num;; 
];;  
.;;  !
Value;;! &
=;;' (
Math;;) -
.;;- .
Round;;. 3
(;;3 4
s;;4 5
.;;5 6
HRA;;6 9
,;;9 :
$num;;; <
);;< =
;;;= >
ws<< 
.<< 
Cells<< 
[<< 
row<< 
,<< 
$num<< 
]<<  
.<<  !
Value<<! &
=<<' (
Math<<) -
.<<- .
Round<<. 3
(<<3 4
totalAllowances<<4 C
,<<C D
$num<<E F
)<<F G
;<<G H
ws== 
.== 
Cells== 
[== 
row== 
,== 
$num== 
]==  
.==  !
Value==! &
===' (
Math==) -
.==- .
Round==. 3
(==3 4
totalDeductions==4 C
,==C D
$num==E F
)==F G
;==G H
ws>> 
.>> 
Cells>> 
[>> 
row>> 
,>> 
$num>> 
]>>  
.>>  !
Value>>! &
=>>' (
Math>>) -
.>>- .
Round>>. 3
(>>3 4
s>>4 5
.>>5 6
TaxDeducted>>6 A
,>>A B
$num>>C D
)>>D E
;>>E F
ws?? 
.?? 
Cells?? 
[?? 
row?? 
,?? 
$num?? 
]??  
.??  !
Value??! &
=??' (
s??) *
.??* +
LOPDays??+ 2
;??2 3
ws@@ 
.@@ 
Cells@@ 
[@@ 
row@@ 
,@@ 
$num@@  
]@@  !
.@@! "
Value@@" '
=@@( )
Math@@* .
.@@. /
Round@@/ 4
(@@4 5
s@@5 6
.@@6 7
NetPay@@7 =
,@@= >
$num@@? @
)@@@ A
;@@A B
wsBB 
.BB 
CellsBB 
[BB 
rowBB 
,BB 
$numBB  
]BB  !
.BB! "
ValueBB" '
=BB( )
sBB* +
.BB+ ,
StatusBB, 2
.BB2 3
ToStringBB3 ;
(BB; <
)BB< =
;BB= >
wsCC 
.CC 
CellsCC 
[CC 
rowCC 
,CC 
$numCC  
]CC  !
.CC! "
ValueCC" '
=CC( )
sCC* +
.CC+ ,

IsReleasedCC, 6
?CC7 8
$strCC9 >
:CC? @
$strCCA E
;CCE F
wsFF 
.FF 
CellsFF 
[FF 
rowFF 
,FF 
$numFF 
,FF  
rowFF! $
,FF$ %
$numFF& '
]FF' (
.FF( )
StyleFF) .
.FF. /
NumberformatFF/ ;
.FF; <
FormatFF< B
=FFC D
$strFFE P
;FFP Q
wsGG 
.GG 
CellsGG 
[GG 
rowGG 
,GG 
$numGG  
]GG  !
.GG! "
StyleGG" '
.GG' (
NumberformatGG( 4
.GG4 5
FormatGG5 ;
=GG< =
$strGG> I
;GGI J
rowII 
++II 
;II 
}JJ 
usingMM 
varMM 
rangeMM 
=MM 
wsMM  
.MM  !
CellsMM! &
[MM& '
$numMM' (
,MM( )
$numMM* +
,MM+ ,
$numMM- .
,MM. /
headersMM0 7
.MM7 8
LengthMM8 >
]MM> ?
;MM? @
rangeNN 
.NN 
StyleNN 
.NN 
FontNN 
.NN 
BoldNN !
=NN" #
trueNN$ (
;NN( )
wsPP 
.PP 
CellsPP 
.PP 
AutoFitColumnsPP #
(PP# $
)PP$ %
;PP% &
returnQQ 
packageQQ 
.QQ 
GetAsByteArrayQQ )
(QQ) *
)QQ* +
;QQ+ ,
}RR 	
publicWW 
staticWW 
byteWW 
[WW 
]WW 

ExportCTCsWW '
(WW' (
IEnumerableWW( 3
<WW3 4
CTCStructureWW4 @
>WW@ A
ctcsWWB F
)WWF G
{XX 	
usingYY 
varYY 
packageYY 
=YY 
newYY  #
ExcelPackageYY$ 0
(YY0 1
)YY1 2
;YY2 3
varZZ 
wsZZ 
=ZZ 
packageZZ 
.ZZ 
WorkbookZZ %
.ZZ% &

WorksheetsZZ& 0
.ZZ0 1
AddZZ1 4
(ZZ4 5
$strZZ5 ;
)ZZ; <
;ZZ< =
if\\ 
(\\ 
!\\ 
ctcs\\ 
.\\ 
Any\\ 
(\\ 
)\\ 
)\\ 
return]] 
package]] 
.]] 
GetAsByteArray]] -
(]]- .
)]]. /
;]]/ 0
var__ 
empName__ 
=__ 
ctcs__ 
.__ 
First__ $
(__$ %
)__% &
.__& '
EmployeeProfile__' 6
?__6 7
.__7 8
User__8 <
?__< =
.__= >
FullName__> F
??__G I
$str__J T
;__T U
wsbb 
.bb 
Cellsbb 
[bb 
$numbb 
,bb 
$numbb 
]bb 
.bb 
Valuebb  
=bb! "
$"bb# %
{bb% &
empNamebb& -
}bb- .
$strbb. 5
"bb5 6
;bb6 7
wscc 
.cc 
Cellscc 
[cc 
$numcc 
,cc 
$numcc 
,cc 
$numcc 
,cc 
$numcc 
]cc  
.cc  !
Mergecc! &
=cc' (
truecc) -
;cc- .
wsdd 
.dd 
Cellsdd 
[dd 
$numdd 
,dd 
$numdd 
]dd 
.dd 
Styledd  
.dd  !
Fontdd! %
.dd% &
Bolddd& *
=dd+ ,
truedd- 1
;dd1 2
wsee 
.ee 
Cellsee 
[ee 
$numee 
,ee 
$numee 
]ee 
.ee 
Styleee  
.ee  !
Fontee! %
.ee% &
Sizeee& *
=ee+ ,
$numee- /
;ee/ 0
vargg 
headersgg 
=gg 
newgg 
[gg 
]gg 
{hh 
$strii 
,ii  
$"jj 
$strjj 
"jj 
,jj 
$"kk 
$strkk 
"kk 
,kk 
$"ll 
$strll 
"ll 
,ll  
$"mm 
$strmm  
"mm  !
,mm! "
$strnn 
,nn 
$"oo 
$stroo  
"oo  !
,oo! "
$"pp 
$strpp  
"pp  !
,pp! "
}qq 
;qq 
forss 
(ss 
intss 
iss 
=ss 
$numss 
;ss 
iss 
<ss 
headersss  '
.ss' (
Lengthss( .
;ss. /
iss0 1
++ss1 3
)ss3 4
wstt 
.tt 
Cellstt 
[tt 
$numtt 
,tt 
itt 
+tt 
$numtt  !
]tt! "
.tt" #
Valuett# (
=tt) *
headerstt+ 2
[tt2 3
itt3 4
]tt4 5
;tt5 6
intvv 
rowvv 
=vv 
$numvv 
;vv 
foreachww 
(ww 
varww 
cww 
inww 
ctcsww "
)ww" #
{xx 
wsyy 
.yy 
Cellsyy 
[yy 
rowyy 
,yy 
$numyy 
]yy  
.yy  !
Valueyy! &
=yy' (
cyy) *
.yy* +
EffectiveFromyy+ 8
.yy8 9
ToStringyy9 A
(yyA B
$stryyB N
)yyN O
;yyO P
wszz 
.zz 
Cellszz 
[zz 
rowzz 
,zz 
$numzz 
]zz  
.zz  !
Valuezz! &
=zz' (
Mathzz) -
.zz- .
Roundzz. 3
(zz3 4
czz4 5
.zz5 6
Basiczz6 ;
,zz; <
$numzz= >
)zz> ?
;zz? @
ws{{ 
.{{ 
Cells{{ 
[{{ 
row{{ 
,{{ 
$num{{ 
]{{  
.{{  !
Value{{! &
={{' (
Math{{) -
.{{- .
Round{{. 3
({{3 4
c{{4 5
.{{5 6
HRA{{6 9
,{{9 :
$num{{; <
){{< =
;{{= >
ws|| 
.|| 
Cells|| 
[|| 
row|| 
,|| 
$num|| 
]||  
.||  !
Value||! &
=||' (
Math||) -
.||- .
Round||. 3
(||3 4
c||4 5
.||5 6
GrossCTC||6 >
,||> ?
$num||@ A
)||A B
;||B C
ws}} 
.}} 
Cells}} 
[}} 
row}} 
,}} 
$num}} 
]}}  
.}}  !
Value}}! &
=}}' (
Math}}) -
.}}- .
Round}}. 3
(}}3 4
c}}4 5
.}}5 6

TaxPercent}}6 @
,}}@ A
$num}}B C
)}}C D
;}}D E
ws~~ 
.~~ 
Cells~~ 
[~~ 
row~~ 
,~~ 
$num~~ 
]~~  
.~~  !
Value~~! &
=~~' (
c~~) *
.~~* +
Status~~+ 1
.~~1 2
ToString~~2 :
(~~: ;
)~~; <
;~~< =
ws 
. 
Cells 
[ 
row 
, 
$num 
]  
.  !
Value! &
=' (
string) /
./ 0
Join0 4
(4 5
$str
ÄÄ 
,
ÄÄ 
c
ÅÅ 
.
ÅÅ 

Allowances
ÅÅ  
.
ÅÅ  !
Select
ÅÅ! '
(
ÅÅ' (
a
ÅÅ( )
=>
ÅÅ* ,
$"
ÅÅ- /
{
ÅÅ/ 0
a
ÅÅ0 1
.
ÅÅ1 2
Label
ÅÅ2 7
}
ÅÅ7 8
$str
ÅÅ8 9
{
ÅÅ9 :
a
ÅÅ: ;
.
ÅÅ; <
Amount
ÅÅ< B
:
ÅÅB C
$str
ÅÅC E
}
ÅÅE F
"
ÅÅF G
)
ÅÅG H
)
ÇÇ 
;
ÇÇ 
ws
ÉÉ 
.
ÉÉ 
Cells
ÉÉ 
[
ÉÉ 
row
ÉÉ 
,
ÉÉ 
$num
ÉÉ 
]
ÉÉ  
.
ÉÉ  !
Value
ÉÉ! &
=
ÉÉ' (
string
ÉÉ) /
.
ÉÉ/ 0
Join
ÉÉ0 4
(
ÉÉ4 5
$str
ÑÑ 
,
ÑÑ 
c
ÖÖ 
.
ÖÖ 

Deductions
ÖÖ  
.
ÖÖ  !
Select
ÖÖ! '
(
ÖÖ' (
d
ÖÖ( )
=>
ÖÖ* ,
$"
ÖÖ- /
{
ÖÖ/ 0
d
ÖÖ0 1
.
ÖÖ1 2
Label
ÖÖ2 7
}
ÖÖ7 8
$str
ÖÖ8 9
{
ÖÖ9 :
d
ÖÖ: ;
.
ÖÖ; <
Amount
ÖÖ< B
:
ÖÖB C
$str
ÖÖC E
}
ÖÖE F
"
ÖÖF G
)
ÖÖG H
)
ÜÜ 
;
ÜÜ 
ws
ââ 
.
ââ 
Cells
ââ 
[
ââ 
row
ââ 
,
ââ 
$num
ââ 
]
ââ  
.
ââ  !
Style
ââ! &
.
ââ& '
Numberformat
ââ' 3
.
ââ3 4
Format
ââ4 :
=
ââ; <
$str
ââ= H
;
ââH I
ws
ää 
.
ää 
Cells
ää 
[
ää 
row
ää 
,
ää 
$num
ää 
]
ää  
.
ää  !
Style
ää! &
.
ää& '
Numberformat
ää' 3
.
ää3 4
Format
ää4 :
=
ää; <
$str
ää= H
;
ääH I
ws
ãã 
.
ãã 
Cells
ãã 
[
ãã 
row
ãã 
,
ãã 
$num
ãã 
]
ãã  
.
ãã  !
Style
ãã! &
.
ãã& '
Numberformat
ãã' 3
.
ãã3 4
Format
ãã4 :
=
ãã; <
$str
ãã= H
;
ããH I
row
çç 
++
çç 
;
çç 
}
éé 
var
ëë 
approvedCount
ëë 
=
ëë 
ctcs
ëë  $
.
ëë$ %
Count
ëë% *
(
ëë* +
c
ëë+ ,
=>
ëë- /
c
ëë0 1
.
ëë1 2
Status
ëë2 8
==
ëë9 ;
Models
ëë< B
.
ëëB C
Enums
ëëC H
.
ëëH I
ApprovalStatus
ëëI W
.
ëëW X
Approved
ëëX `
)
ëë` a
;
ëëa b
var
íí 
pendingCount
íí 
=
íí 
ctcs
íí #
.
íí# $
Count
íí$ )
(
íí) *
c
íí* +
=>
íí, .
c
íí/ 0
.
íí0 1
Status
íí1 7
==
íí8 :
Models
íí; A
.
ííA B
Enums
ííB G
.
ííG H
ApprovalStatus
ííH V
.
ííV W
Pending
ííW ^
)
íí^ _
;
íí_ `
var
ìì 
rejectedCount
ìì 
=
ìì 
ctcs
ìì  $
.
ìì$ %
Count
ìì% *
(
ìì* +
c
ìì+ ,
=>
ìì- /
c
ìì0 1
.
ìì1 2
Status
ìì2 8
==
ìì9 ;
Models
ìì< B
.
ììB C
Enums
ììC H
.
ììH I
ApprovalStatus
ììI W
.
ììW X
Rejected
ììX `
)
ìì` a
;
ììa b
ws
ïï 
.
ïï 
Cells
ïï 
[
ïï 
row
ïï 
+
ïï 
$num
ïï 
,
ïï 
$num
ïï 
]
ïï  
.
ïï  !
Value
ïï! &
=
ïï' (
$str
ïï) 2
;
ïï2 3
ws
ññ 
.
ññ 
Cells
ññ 
[
ññ 
row
ññ 
+
ññ 
$num
ññ 
,
ññ 
$num
ññ 
]
ññ  
.
ññ  !
Style
ññ! &
.
ññ& '
Font
ññ' +
.
ññ+ ,
Bold
ññ, 0
=
ññ1 2
true
ññ3 7
;
ññ7 8
ws
òò 
.
òò 
Cells
òò 
[
òò 
row
òò 
+
òò 
$num
òò 
,
òò 
$num
òò 
]
òò  
.
òò  !
Value
òò! &
=
òò' (
$"
òò) +
$str
òò+ 5
{
òò5 6
approvedCount
òò6 C
}
òòC D
"
òòD E
;
òòE F
ws
ôô 
.
ôô 
Cells
ôô 
[
ôô 
row
ôô 
+
ôô 
$num
ôô 
,
ôô 
$num
ôô 
]
ôô  
.
ôô  !
Value
ôô! &
=
ôô' (
$"
ôô) +
$str
ôô+ 4
{
ôô4 5
pendingCount
ôô5 A
}
ôôA B
"
ôôB C
;
ôôC D
ws
öö 
.
öö 
Cells
öö 
[
öö 
row
öö 
+
öö 
$num
öö 
,
öö 
$num
öö 
]
öö  
.
öö  !
Value
öö! &
=
öö' (
$"
öö) +
$str
öö+ 5
{
öö5 6
rejectedCount
öö6 C
}
ööC D
"
ööD E
;
ööE F
using
úú 
var
úú 
range
úú 
=
úú 
ws
úú  
.
úú  !
Cells
úú! &
[
úú& '
$num
úú' (
,
úú( )
$num
úú* +
,
úú+ ,
$num
úú- .
,
úú. /
headers
úú0 7
.
úú7 8
Length
úú8 >
]
úú> ?
;
úú? @
range
ùù 
.
ùù 
Style
ùù 
.
ùù 
Font
ùù 
.
ùù 
Bold
ùù !
=
ùù" #
true
ùù$ (
;
ùù( )
ws
üü 
.
üü 
Cells
üü 
.
üü 
AutoFitColumns
üü #
(
üü# $
)
üü$ %
;
üü% &
return
†† 
package
†† 
.
†† 
GetAsByteArray
†† )
(
††) *
)
††* +
;
††+ ,
}
°° 	
}
¢¢ 
}££ Ï
LD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Utils\AuditExporter.cs
	namespace 	

PayrollApi
 
. 
Utils 
{ 
public 

static 
class 
AuditExporter %
{ 
public 
static 
byte 
[ 
] 
ExportAuditLogs ,
(, -
IEnumerable- 8
<8 9
AuditLog9 A
>A B
logsC G
)G H
{		 	
using

 
var

 
package

 
=

 
new

  #
ExcelPackage

$ 0
(

0 1
)

1 2
;

2 3
var 
ws 
= 
package 
. 
Workbook %
.% &

Worksheets& 0
.0 1
Add1 4
(4 5
$str5 @
)@ A
;A B
var 
headers 
= 
new 
[ 
] 
{  !
$str" .
,. /
$str0 8
,8 9
$str: C
,C D
$strE R
,R S
$strT a
}b c
;c d
for 
( 
int 
i 
= 
$num 
; 
i 
< 
headers  '
.' (
Length( .
;. /
i0 1
++1 3
)3 4
ws 
. 
Cells 
[ 
$num 
, 
i 
+ 
$num  !
]! "
." #
Value# (
=) *
headers+ 2
[2 3
i3 4
]4 5
;5 6
int 
row 
= 
$num 
; 
foreach 
( 
var 
log 
in 
logs  $
)$ %
{ 
ws 
. 
Cells 
[ 
row 
, 
$num 
]  
.  !
Value! &
=' (
log) ,
., -

EntityType- 7
;7 8
ws 
. 
Cells 
[ 
row 
, 
$num 
]  
.  !
Value! &
=' (
log) ,
., -
Action- 3
;3 4
ws 
. 
Cells 
[ 
row 
, 
$num 
]  
.  !
Value! &
=' (
log) ,
., -
Details- 4
;4 5
ws 
. 
Cells 
[ 
row 
, 
$num 
]  
.  !
Value! &
=' (
log) ,
., -
PerformedBy- 8
;8 9
ws 
. 
Cells 
[ 
row 
, 
$num 
]  
.  !
Value! &
=' (
log) ,
., -
PerformedAt- 8
.8 9
ToString9 A
(A B
$strB W
)W X
;X Y
row 
++ 
; 
} 
ws 
. 
Cells 
. 
AutoFitColumns #
(# $
)$ %
;% &
return 
package 
. 
GetAsByteArray )
() *
)* +
;+ ,
} 	
}   
}!! ∞6
PD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Services\PayrollService.cs
	namespace 	

PayrollApi
 
. 
Services 
{ 
public 

class 
PayrollService 
:  !
IPayrollService" 1
{ 
public 
Payslip !
ComputePayslipFromCTC ,
(, -
CTCStructure 
ctc 
, 
int		 
year		 
,		 
int

 
month

 
,

 
int 
lopDays 
, 
decimal 
? 
overrideAllowances '
,' (
decimal 
? 
overrideDeductions '
) 	
{ 	
var 
monthlyBasic 
= 
ctc "
." #
Basic# (
/) *
$num+ .
;. /
var 

monthlyHRA 
= 
ctc  
.  !
HRA! $
/% &
$num' *
;* +
var 
totalAllowances 
=  !
ctc" %
.% &

Allowances& 0
?0 1
.1 2
Sum2 5
(5 6
a6 7
=>8 :
a; <
.< =
Amount= C
)C D
??E G
$numH J
;J K
var 
totalDeductions 
=  !
ctc" %
.% &

Deductions& 0
?0 1
.1 2
Sum2 5
(5 6
d6 7
=>8 :
d; <
.< =
Amount= C
)C D
??E G
$numH J
;J K
var 
monthlyAllowances !
=" #
($ %
overrideAllowances% 7
??8 :
totalAllowances; J
)J K
/L M
$numN Q
;Q R
var 
monthlyDeductions !
=" #
($ %
overrideDeductions% 7
??8 :
totalDeductions; J
)J K
/L M
$numN Q
;Q R
var 
totalPayable 
= 
monthlyBasic +
+, -

monthlyHRA. 8
+9 :
monthlyAllowances; L
;L M
var 
	dailyRate 
= 
totalPayable (
/) *
$num+ .
;. /
var 
	lopAmount 
= 
	dailyRate %
*& '
lopDays( /
;/ 0
var   
preTax   
=   
totalPayable   %
-  & '
	lopAmount  ( 1
-  2 3
monthlyDeductions  4 E
;  E F
if!! 
(!! 
preTax!! 
<!! 
$num!! 
)!! 
preTax"" 
="" 
$num"" 
;"" 
var$$ 
tax$$ 
=$$ 
preTax$$ 
*$$ 
($$  
ctc$$  #
.$$# $

TaxPercent$$$ .
/$$/ 0
$num$$1 5
)$$5 6
;$$6 7
var%% 
net%% 
=%% 
preTax%% 
-%% 
tax%% "
;%%" #
var(( 
slip(( 
=(( 
new(( 
Payslip(( "
{)) 
Year** 
=** 
year** 
,** 
Month++ 
=++ 
month++ 
,++ 
Basic,, 
=,, 
Math,, 
.,, 
Round,, "
(,," #
monthlyBasic,,# /
,,,/ 0
$num,,1 2
),,2 3
,,,3 4
HRA-- 
=-- 
Math-- 
.-- 
Round--  
(--  !

monthlyHRA--! +
,--+ ,
$num--- .
)--. /
,--/ 0
TaxDeducted.. 
=.. 
Math.. "
..." #
Round..# (
(..( )
tax..) ,
,.., -
$num... /
)../ 0
,..0 1
LOPDays// 
=// 
lopDays// !
,//! "
NetPay00 
=00 
Math00 
.00 
Round00 #
(00# $
net00$ '
,00' (
$num00) *
)00* +
,00+ ,
Status11 
=11 
$num11 
,11 

IsReleased22 
=22 
false22 "
,22" #
}33 
;33 
foreach66 
(66 
var66 
a66 
in66 
ctc66 !
.66! "

Allowances66" ,
??66- /
new660 3
List664 8
<668 9
CTCAllowance669 E
>66E F
(66F G
)66G H
)66H I
{77 
slip88 
.88 
AllowanceItems88 #
.88# $
Add88$ '
(88' (
new99 
PayslipAllowance99 (
{:: 
Label;; 
=;; 
a;;  !
.;;! "
Label;;" '
,;;' (
Amount<< 
=<<  
Math<<! %
.<<% &
Round<<& +
(<<+ ,
a<<, -
.<<- .
Amount<<. 4
/<<5 6
$num<<7 :
,<<: ;
$num<<< =
)<<= >
,<<> ?
}== 
)>> 
;>> 
}?? 
foreachBB 
(BB 
varBB 
dBB 
inBB 
ctcBB !
.BB! "

DeductionsBB" ,
??BB- /
newBB0 3
ListBB4 8
<BB8 9
CTCDeductionBB9 E
>BBE F
(BBF G
)BBG H
)BBH I
{CC 
slipDD 
.DD 
DeductionItemsDD #
.DD# $
AddDD$ '
(DD' (
newEE 
PayslipDeductionEE (
{EE) *
LabelEE+ 0
=EE1 2
dEE3 4
.EE4 5
LabelEE5 :
,EE: ;
AmountEE< B
=EEC D
MathEEE I
.EEI J
RoundEEJ O
(EEO P
dEEP Q
.EEQ R
AmountEER X
/EEY Z
$numEE[ ^
,EE^ _
$numEE` a
)EEa b
}EEc d
)FF 
;FF 
}GG 
ifJJ 
(JJ 
	lopAmountJJ 
>JJ 
$numJJ 
)JJ 
{KK 
slipLL 
.LL 
DeductionItemsLL #
.LL# $
AddLL$ '
(LL' (
newMM 
PayslipDeductionMM (
{MM) *
LabelMM+ 0
=MM1 2
$strMM3 8
,MM8 9
AmountMM: @
=MMA B
MathMMC G
.MMG H
RoundMMH M
(MMM N
	lopAmountMMN W
,MMW X
$numMMY Z
)MMZ [
}MM\ ]
)NN 
;NN 
}OO 
returnQQ 
slipQQ 
;QQ 
}RR 	
}SS 
}TT √!
LD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Services\JwtService.cs
	namespace 	

PayrollApi
 
. 
Services 
{		 
public

 

class

 

JwtService

 
:

 
IJwtService

 )
{ 
private 
readonly 
IConfiguration '
_config( /
;/ 0
public 

JwtService 
( 
IConfiguration (
config) /
)/ 0
=>1 3
_config4 ;
=< =
config> D
;D E
public 
( 
string 
token 
, 
DateTime &
expiresAtUtc' 3
)3 4
Generate5 =
(= >
User> B
userC G
)G H
{ 	
var 
jwt 
= 
_config 
. 

GetSection (
(( )
$str) .
). /
;/ 0
var 
key 
= 
new  
SymmetricSecurityKey .
(. /
Encoding/ 7
.7 8
UTF88 <
.< =
GetBytes= E
(E F
jwtF I
[I J
$strJ O
]O P
!P Q
)Q R
)R S
;S T
var 
creds 
= 
new 
SigningCredentials .
(. /
key/ 2
,2 3
SecurityAlgorithms4 F
.F G

HmacSha256G Q
)Q R
;R S
var 
expiry 
= 
DateTime !
.! "
UtcNow" (
.( )

AddMinutes) 3
(3 4
int4 7
.7 8
Parse8 =
(= >
jwt> A
[A B
$strB Q
]Q R
!R S
)S T
)T U
;U V
var 
claims 
= 
new 
List !
<! "
Claim" '
>' (
{ 
new 
Claim 
( #
JwtRegisteredClaimNames 1
.1 2
Sub2 5
,5 6
user7 ;
.; <
Id< >
.> ?
ToString? G
(G H
)H I
)I J
,J K
new 
Claim 
( 

ClaimTypes $
.$ %
NameIdentifier% 3
,3 4
user5 9
.9 :
Id: <
.< =
ToString= E
(E F
)F G
)G H
,H I
new 
Claim 
( 

ClaimTypes $
.$ %
Name% )
,) *
user+ /
./ 0
FullName0 8
)8 9
,9 :
new 
Claim 
( 

ClaimTypes $
.$ %
Email% *
,* +
user, 0
.0 1
Email1 6
)6 7
,7 8
new 
Claim 
( 

ClaimTypes $
.$ %
Role% )
,) *
user+ /
./ 0
Role0 4
.4 5
ToString5 =
(= >
)> ?
)? @
} 
; 
var 
token 
= 
new 
JwtSecurityToken ,
(, -
issuer   
:   
jwt   
[   
$str   $
]  $ %
,  % &
audience!! 
:!! 
jwt!! 
[!! 
$str!! (
]!!( )
,!!) *
claims"" 
:"" 
claims"" 
,"" 
expires## 
:## 
expiry## 
,##  
signingCredentials$$ "
:$$" #
creds$$$ )
)%% 
;%% 
return'' 
('' 
new'' #
JwtSecurityTokenHandler'' /
(''/ 0
)''0 1
.''1 2

WriteToken''2 <
(''< =
token''= B
)''B C
,''C D
expiry''E K
)''K L
;''L M
}(( 	
})) 
}** ˚
QD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Services\IPayrollService.cs
	namespace 	

PayrollApi
 
. 
Services 
{ 
public 

	interface 
IPayrollService $
{ 
Payslip !
ComputePayslipFromCTC %
(% &
CTCStructure& 2
ctc3 6
,6 7
int8 ;
year< @
,@ A
intB E
monthF K
,K L
intM P
lopDaysQ X
,X Y
decimalZ a
?a b
overrideAllowancesc u
,u v
decimalw ~
?~  
overrideDeductions
Ä í
)
í ì
;
ì î
} 
}		 à
MD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Services\IJwtService.cs
	namespace 	

PayrollApi
 
. 
Services 
{ 
public 

	interface 
IJwtService  
{ 
( 	
string	 
token 
, 
DateTime 
expiresAtUtc  ,
), -
Generate. 6
(6 7
User7 ;
user< @
)@ A
;A B
} 
}		 ≈	
OD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Services\IEmailService.cs
	namespace 	

PayrollApi
 
. 
Services 
{ 
public 

	interface 
IEmailService "
{ 
Task 
	SendAsync 
( 
string 
to  
,  !
string" (
subject) 0
,0 1
string2 8
htmlBody9 A
)A B
;B C
Task 
SendPlainAsync 
( 
string "
to# %
,% &
string' -
subject. 5
,5 6
string7 =
textBody> F
)F G
;G H
Task		 
SendTemplatedAsync		 
(		  
string		  &
to		' )
,		) *
string		+ 1
subject		2 9
,		9 :
string		; A
content		B I
,		I J
string		K Q
?		Q R

actionText		S ]
=		^ _
null		` d
,		d e
string		f l
?		l m
	actionUrl		n w
=		x y
null		z ~
)		~ 
;			 Ä
}

 
} ó
OD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Services\EmailTemplate.cs
	namespace 	

PayrollApi
 
. 
Services 
{ 
public 

static 
class 
EmailTemplate %
{ 
public 
static 
string 
Build "
(" #
string 
title 
, 
string		 
message		 
,		 
string

 
?

 

actionText

 
=

  
null

! %
,

% &
string 
? 
	actionUrl 
= 
null  $
,$ %
string 
? 
status 
= 
null !
) 	
{ 	
var 

buttonHtml 
= 
string #
.# $
Empty$ )
;) *
if 
( 
! 
string 
. 
IsNullOrEmpty %
(% &

actionText& 0
)0 1
&&2 4
!5 6
string6 <
.< =
IsNullOrEmpty= J
(J K
	actionUrlK T
)T U
)U V
{ 

buttonHtml 
= 
$@" 
$str 
{ 
	actionUrl '
}' (
$str( 
{ 

actionText !
}! "
$str!" 
"!! 
;!! 
}"" 
var$$ 

statusHtml$$ 
=$$ 
string$$ #
.$$# $
Empty$$$ )
;$$) *
if%% 
(%% 
!%% 
string%% 
.%% 
IsNullOrEmpty%% %
(%%% &
status%%& ,
)%%, -
)%%- .
{&& 

statusHtml'' 
='' 
$@"(( 
$str(0 
{00 
status00 
}00 
$str01 
"11 
;11 
}22 
return44 
$@"44 
$str4L 
{LL 

statusHtmlLL 
}LL 
$strLP S
{PPS T
titlePPT Y
}PPY Z
$strPQZ +
{QQ+ ,
messageQQ, 3
}QQ3 4
$strQR4 
{RR 

buttonHtmlRR 
}RR 
$strRW 
{WW 	
DateTimeWW	 
.WW 
UtcNowWW 
.WW 
YearWW 
}WW 
$strW[ 
"[[ 
;[[ 	
}\\ 	
}]] 
}^^  3
ND:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Services\EmailService.cs
	namespace 	

PayrollApi
 
. 
Services 
{ 
public 

class 
EmailService 
: 
IEmailService  -
{ 
private		 
readonly		 
IConfiguration		 '
_config		( /
;		/ 0
public 
EmailService 
( 
IConfiguration *
config+ 1
)1 2
=>3 5
_config6 =
=> ?
config@ F
;F G
public 
async 
Task 
	SendAsync #
(# $
string$ *
to+ -
,- .
string/ 5
subject6 =
,= >
string? E
htmlBodyF N
)N O
{ 	
var 
msg 
= 
BuildMessage "
(" #
to# %
,% &
subject' .
,. /
htmlBody0 8
,8 9
isHtml: @
:@ A
trueB F
)F G
;G H
await 
Send 
( 
msg 
) 
; 
} 	
public 
async 
Task 
SendPlainAsync (
(( )
string) /
to0 2
,2 3
string4 :
subject; B
,B C
stringD J
textBodyK S
)S T
{ 	
var 
msg 
= 
BuildMessage "
(" #
to# %
,% &
subject' .
,. /
textBody0 8
,8 9
isHtml: @
:@ A
falseB G
)G H
;H I
await 
Send 
( 
msg 
) 
; 
} 	
public 
async 
Task 
SendTemplatedAsync ,
(, -
string 
to 
, 
string 
subject 
, 
string 
content 
, 
string 
? 

actionText 
=  
null! %
,% &
string 
? 
	actionUrl 
= 
null  $
) 	
{   	
var!! 
htmlBody!! 
=!! 
EmailTemplate!! (
.!!( )
Build!!) .
(!!. /
subject!!/ 6
,!!6 7
content!!8 ?
,!!? @

actionText!!A K
,!!K L
	actionUrl!!M V
)!!V W
;!!W X
await"" 
	SendAsync"" 
("" 
to"" 
,"" 
subject""  '
,""' (
htmlBody"") 1
)""1 2
;""2 3
}## 	
private%% 
MimeMessage%% 
BuildMessage%% (
(%%( )
string%%) /
to%%0 2
,%%2 3
string%%4 :
subject%%; B
,%%B C
string%%D J
body%%K O
,%%O P
bool%%Q U
isHtml%%V \
)%%\ ]
{&& 	
var'' 
smtp'' 
='' 
_config'' 
.'' 

GetSection'' )
('') *
$str''* 0
)''0 1
;''1 2
var(( 
message(( 
=(( 
new(( 
MimeMessage(( )
((() *
)((* +
;((+ ,
message)) 
.)) 
From)) 
.)) 
Add)) 
()) 
new))  
MailboxAddress))! /
())/ 0
smtp))0 4
[))4 5
$str))5 ?
]))? @
,))@ A
smtp))B F
[))F G
$str))G R
]))R S
)))S T
)))T U
;))U V
message** 
.** 
To** 
.** 
Add** 
(** 
MailboxAddress** )
.**) *
Parse*** /
(**/ 0
to**0 2
)**2 3
)**3 4
;**4 5
message++ 
.++ 
Subject++ 
=++ 
subject++ %
;++% &
var-- 
bodyBuilder-- 
=-- 
new-- !
BodyBuilder--" -
(--- .
)--. /
;--/ 0
if.. 
(.. 
isHtml.. 
).. 
bodyBuilder// 
.// 
HtmlBody// $
=//% &
body//' +
;//+ ,
else00 
bodyBuilder11 
.11 
TextBody11 $
=11% &
body11' +
;11+ ,
message22 
.22 
Body22 
=22 
bodyBuilder22 &
.22& '
ToMessageBody22' 4
(224 5
)225 6
;226 7
return33 
message33 
;33 
}44 	
private77 
async77 
Task77 
Send77 
(77  
MimeMessage77  +
message77, 3
)773 4
{88 	
var99 
smtp99 
=99 
_config99 
.99 

GetSection99 )
(99) *
$str99* 0
)990 1
;991 2
using:: 
var:: 
client:: 
=:: 
new:: "

SmtpClient::# -
(::- .
)::. /
;::/ 0
await;; 
client;; 
.;; 
ConnectAsync;; %
(;;% &
smtp<< 
[<< 
$str<< 
]<< 
,<< 
int== 
.== 
Parse== 
(== 
smtp== 
[== 
$str== %
]==% &
!==& '
)==' (
,==( )
MailKit>> 
.>> 
Security>>  
.>>  !
SecureSocketOptions>>! 4
.>>4 5!
StartTlsWhenAvailable>>5 J
)?? 
;?? 
await@@ 
client@@ 
.@@ 
AuthenticateAsync@@ *
(@@* +
smtp@@+ /
[@@/ 0
$str@@0 :
]@@: ;
,@@; <
smtp@@= A
[@@A B
$str@@B L
]@@L M
)@@M N
;@@N O
awaitAA 
clientAA 
.AA 
	SendAsyncAA "
(AA" #
messageAA# *
)AA* +
;AA+ ,
awaitBB 
clientBB 
.BB 
DisconnectAsyncBB (
(BB( )
trueBB) -
)BB- .
;BB. /
}CC 	
}DD 
}EE •
ND:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Services\AuditService.cs
	namespace 	

PayrollApi
 
. 
Services 
{ 
public 

	interface 
IAuditService "
{ 
Task 
LogAsync 
( 
string 

entityType '
,' (
int) ,
?, -
entityId. 6
,6 7
string8 >
action? E
,E F
stringG M
?M N
detailsO V
,V W
intX [
?[ \
performedById] j
,j k
stringl r
?r s
performedByEmail	t Ñ
)
Ñ Ö
;
Ö Ü
}		 
public 

class 
AuditService 
: 
IAuditService  -
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
public 
AuditService 
( 
AppDbContext (
db) +
)+ ,
{ 	
_db 
= 
db 
; 
} 	
public 
async 
Task 
LogAsync "
(" #
string# )

entityType* 4
,4 5
int6 9
?9 :
entityId; C
,C D
stringE K
actionL R
,R S
stringT Z
?Z [
details\ c
,c d
inte h
?h i
performedByIdj w
,w x
stringy 
?	 Ä
performedByEmail
Å ë
)
ë í
{ 	
var 
log 
= 
new 
AuditLog "
{ 

EntityType 
= 

entityType '
,' (
EntityId 
= 
entityId #
,# $
Action 
= 
action 
,  
Details 
= 
details !
,! "
PerformedById 
= 
performedById  -
,- .
PerformedBy 
= 
performedByEmail .
,. /
PerformedAt 
= 
DateTime &
.& '
UtcNow' -
}   
;   
_db"" 
."" 
	AuditLogs"" 
."" 
Add"" 
("" 
log"" !
)""! "
;""" #
await## 
_db## 
.## 
SaveChangesAsync## &
(##& '
)##' (
;##( )
}$$ 	
}%% 
}&& ÿ8
@D:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Program.cs
var

 
builder

 
=

 
WebApplication

 
.

 
CreateBuilder

 *
(

* +
args

+ /
)

/ 0
;

0 1
QuestPDF 
. 	
Settings	 
. 
License 
= 
LicenseType '
.' (
	Community( 1
;1 2
ExcelPackage 
. 
LicenseContext 
= 
LicenseContext ,
., -
NonCommercial- :
;: ;
builder 
. 
Services 
. 
AddControllers 
( 
) 
. 
AddJsonOptions 
( 
o 
=> 
{ 
o 	
.	 
!
JsonSerializerOptions
 
.   
PropertyNamingPolicy  4
=5 6
null7 ;
;; <
} 
) 
; 
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddDbContext 
< 
AppDbContext *
>* +
(+ ,
options, 3
=>4 6
{ 
options 
. 
UseMySql 
( 
builder 
. 
Configuration 
. 
GetConnectionString 1
(1 2
$str2 E
)E F
,F G
ServerVersion 
. 

AutoDetect  
(  !
builder! (
.( )
Configuration) 6
.6 7
GetConnectionString7 J
(J K
$strK ^
)^ _
)_ `
) 
; 
}   
)   
;   
var## 

jwtSection## 
=## 
builder## 
.## 
Configuration## &
.##& '

GetSection##' 1
(##1 2
$str##2 7
)##7 8
;##8 9
var$$ 
key$$ 
=$$ 	
Encoding$$
 
.$$ 
UTF8$$ 
.$$ 
GetBytes$$  
($$  !

jwtSection$$! +
[$$+ ,
$str$$, 1
]$$1 2
!$$2 3
)$$3 4
;$$4 5
builder&& 
.'' 
Services'' 
.'' 
AddAuthentication'' 
(''  
options''  '
=>''( *
{(( 
options)) 
.)) %
DefaultAuthenticateScheme)) )
=))* +
JwtBearerDefaults)), =
.))= > 
AuthenticationScheme))> R
;))R S
options** 
.** "
DefaultChallengeScheme** &
=**' (
JwtBearerDefaults**) :
.**: ; 
AuthenticationScheme**; O
;**O P
}++ 
)++ 
.,, 
AddJwtBearer,, 
(,, 
options,, 
=>,, 
{-- 
options.. 
... 
	SaveToken.. 
=.. 
true..  
;..  !
options// 
.//  
RequireHttpsMetadata// $
=//% &
false//' ,
;//, -
options00 
.00 %
TokenValidationParameters00 )
=00* +
new00, /%
TokenValidationParameters000 I
{11 	
ValidateIssuer22 
=22 
true22 !
,22! "
ValidIssuer33 
=33 

jwtSection33 $
[33$ %
$str33% -
]33- .
,33. /
ValidateAudience44 
=44 
true44 #
,44# $
ValidAudience55 
=55 

jwtSection55 &
[55& '
$str55' 1
]551 2
,552 3$
ValidateIssuerSigningKey66 $
=66% &
true66' +
,66+ ,
IssuerSigningKey77 
=77 
new77 " 
SymmetricSecurityKey77# 7
(777 8
key778 ;
)77; <
,77< =
ValidateLifetime88 
=88 
true88 #
,88# $
}99 	
;99	 

}:: 
):: 
;:: 
builder<< 
.<< 
Services<< 
.<< 
AddAuthorization<< !
(<<! "
)<<" #
;<<# $
builder?? 
.?? 
Services?? 
.?? 
	AddScoped?? 
<?? 
IJwtService?? &
,??& '

JwtService??( 2
>??2 3
(??3 4
)??4 5
;??5 6
builder@@ 
.@@ 
Services@@ 
.@@ 
	AddScoped@@ 
<@@ 
IAuditService@@ (
,@@( )
AuditService@@* 6
>@@6 7
(@@7 8
)@@8 9
;@@9 :
builderAA 
.AA 
ServicesAA 
.AA 
	AddScopedAA 
<AA 
IEmailServiceAA (
,AA( )
EmailServiceAA* 6
>AA6 7
(AA7 8
)AA8 9
;AA9 :
builderBB 
.BB 
ServicesBB 
.BB 
	AddScopedBB 
<BB 
IPayrollServiceBB *
,BB* +
PayrollServiceBB, :
>BB: ;
(BB; <
)BB< =
;BB= >
builderEE 
.EE 
ServicesEE 
.EE 
AddCorsEE 
(EE 
optionsEE  
=>EE! #
{FF 
optionsGG 
.GG 
	AddPolicyGG 
(GG 
$strGG  
,GG  !
pGG" #
=>GG$ &
pGG' (
.GG( )
AllowAnyOriginGG) 7
(GG7 8
)GG8 9
.GG9 :
AllowAnyHeaderGG: H
(GGH I
)GGI J
.GGJ K
AllowAnyMethodGGK Y
(GGY Z
)GGZ [
)GG[ \
;GG\ ]
}HH 
)HH 
;HH 
varJJ 
appJJ 
=JJ 	
builderJJ
 
.JJ 
BuildJJ 
(JJ 
)JJ 
;JJ 
ifLL 
(LL 
appLL 
.LL 
EnvironmentLL 
.LL 
IsDevelopmentLL !
(LL! "
)LL" #
)LL# $
{MM 
appNN 
.NN 

UseSwaggerNN 
(NN 
)NN 
;NN 
appOO 
.OO 
UseSwaggerUIOO 
(OO 
)OO 
;OO 
}PP 
appRR 
.RR 
UseCorsRR 
(RR 
$strRR 
)RR 
;RR 
appSS 
.SS 
UseAuthenticationSS 
(SS 
)SS 
;SS 
appTT 
.TT 
UseAuthorizationTT 
(TT 
)TT 
;TT 
appUU 
.UU 
MapControllersUU 
(UU 
)UU 
;UU 
appWW 
.WW 
RunWW 
(WW 
)WW 	
;WW	 

DD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\User.cs
	namespace 	

PayrollApi
 
. 
Models 
{ 
public 

class 
User 
: 
AuditEntity #
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[

 	
Required

	 
,

 
	MaxLength

 
(

 
$num

  
)

  !
]

! "
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
default, 3
!3 4
;4 5
[ 	
Required	 
] 
public 
string 
PasswordHash "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
default3 :
!: ;
;; <
[ 	
Required	 
, 
	MaxLength 
( 
$num  
)  !
]! "
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
default/ 6
!6 7
;7 8
[ 	
Required	 
] 
public 
UserRole 
Role 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
IsActive 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
true- 1
;1 2
public 
EmployeeProfile 
? 
Profile  '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} Ä0
GD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\Payslip.cs
	namespace 	

PayrollApi
 
. 
Models 
{ 
public 

class 
Payslip 
: 
AuditEntity &
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public

 
ApprovalStatus

 
Status

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
=

3 4
ApprovalStatus

5 C
.

C D
Pending

D K
;

K L
[ 	

ForeignKey	 
( 
nameof 
( 
EmployeeProfile *
)* +
)+ ,
], -
public 
int 
EmployeeProfileId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
EmployeeProfile 
EmployeeProfile .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
== >
default? F
!F G
;G H
public 
int 
Year 
{ 
get 
; 
set "
;" #
}$ %
public 
int 
Month 
{ 
get 
; 
set  #
;# $
}% &
public 
decimal 
Basic 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 
HRA 
{ 
get  
;  !
set" %
;% &
}' (
public 
ICollection 
< 
PayslipAllowance +
>+ ,
AllowanceItems- ;
{< =
get> A
;A B
setC F
;F G
}H I
=J K
new 
List 
< 
PayslipAllowance %
>% &
(& '
)' (
;( )
public 
ICollection 
< 
PayslipDeduction +
>+ ,
DeductionItems- ;
{< =
get> A
;A B
setC F
;F G
}H I
=J K
new 
List 
< 
PayslipDeduction %
>% &
(& '
)' (
;( )
public 
decimal 
TaxDeducted "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
LOPDays 
{ 
get  
;  !
set" %
;% &
}' (
public 
decimal 
NetPay 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
CreatedByUserId "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
User 
CreatedByUser !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
? 
FilePath 
{  !
get" %
;% &
set' *
;* +
}, -
public   
bool   

IsReleased   
{    
get  ! $
;  $ %
set  & )
;  ) *
}  + ,
=  - .
false  / 4
;  4 5
}!! 
public## 

class## 
PayslipAllowance## !
{$$ 
public%% 
int%% 
Id%% 
{%% 
get%% 
;%% 
set%%  
;%%  !
}%%" #
['' 	

ForeignKey''	 
('' 
nameof'' 
('' 
Payslip'' "
)''" #
)''# $
]''$ %
public(( 
int(( 
	PayslipId(( 
{(( 
get(( "
;((" #
set(($ '
;((' (
}(() *
public)) 
Payslip)) 
Payslip)) 
{))  
get))! $
;))$ %
set))& )
;))) *
}))+ ,
=))- .
default))/ 6
!))6 7
;))7 8
public++ 
string++ 
Label++ 
{++ 
get++ !
;++! "
set++# &
;++& '
}++( )
=++* +
string++, 2
.++2 3
Empty++3 8
;++8 9
public,, 
decimal,, 
Amount,, 
{,, 
get,,  #
;,,# $
set,,% (
;,,( )
},,* +
}-- 
public// 

class// 
PayslipDeduction// !
{00 
public11 
int11 
Id11 
{11 
get11 
;11 
set11  
;11  !
}11" #
[33 	

ForeignKey33	 
(33 
nameof33 
(33 
Payslip33 "
)33" #
)33# $
]33$ %
public44 
int44 
	PayslipId44 
{44 
get44 "
;44" #
set44$ '
;44' (
}44) *
public55 
Payslip55 
Payslip55 
{55  
get55! $
;55$ %
set55& )
;55) *
}55+ ,
=55- .
default55/ 6
!556 7
;557 8
public77 
string77 
Label77 
{77 
get77 !
;77! "
set77# &
;77& '
}77( )
=77* +
string77, 2
.772 3
Empty773 8
;778 9
public88 
decimal88 
Amount88 
{88 
get88  #
;88# $
set88% (
;88( )
}88* +
}99 
}:: Ï	
LD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\Notification.cs
	namespace 	

PayrollApi
 
. 
Models 
{ 
public 

class 
Notification 
: 
AuditEntity  +
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Subject 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
default. 5
!5 6
;6 7
public 
string 
Message 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
default. 5
!5 6
;6 7
public		 
bool		 
IsRead		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
=		) *
false		+ 0
;		0 1
}

 
} µ
DD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\Memo.cs
	namespace 	

PayrollApi
 
. 
Models 
{ 
public 

class 
Memo 
: 
AuditEntity #
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[

 	

ForeignKey

	 
(

 
nameof

 
(

 
User

 
)

  
)

  !
]

! "
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public 
User 
? 
User 
{ 
get 
;  
set! $
;$ %
}& '
=( )
default* 1
!1 2
;2 3
[ 	
Required	 
] 
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
? 
Content 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ∆
ND:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\Enums\UserRole.cs
	namespace 	

PayrollApi
 
. 
Models 
. 
Enums !
{ 
public 

enum 
UserRole 
{ 
Admin 
= 
$num 
, 
HR 

= 
$num 
, 
	HRManager 
= 
$num 
, 
Employee 
= 
$num 
, 
}		 
}

 ì
TD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\Enums\ApprovalStatus.cs
	namespace 	

PayrollApi
 
. 
Models 
. 
Enums !
{ 
public 

enum 
ApprovalStatus 
{ 
Pending 
= 
$num 
, 
Approved 
= 
$num 
, 
Rejected 
= 
$num 
, 
} 
}		 ∞
OD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\EmployeeProfile.cs
	namespace 	

PayrollApi
 
. 
Models 
{ 
public 

class 
EmployeeProfile  
:! "
AuditEntity# .
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[

 	
Required

	 
,

 

ForeignKey

 
(

 
nameof

 $
(

$ %
User

% )
)

) *
)

* +
]

+ ,
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public 
User 
User 
{ 
get 
; 
set  #
;# $
}% &
=' (
default) 0
!0 1
;1 2
public 
int 
? 
DepartmentId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 

Department 
? 

Department %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
? 
EmployeeCode #
{$ %
get& )
;) *
set+ .
;. /
}0 1
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
? 
Address 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
? 
Phone 
{ 
get "
;" #
set$ '
;' (
}) *
public 
ICollection 
< 
CTCStructure '
>' (
CTCStructures) 6
{7 8
get9 <
;< =
set> A
;A B
}C D
=E F
newG J
ListK O
<O P
CTCStructureP \
>\ ]
(] ^
)^ _
;_ `
} 
public 

class 
ChangePasswordDto "
{ 
public 
string 
CurrentPassword %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
default6 =
!= >
;> ?
public   
string   
NewPassword   !
{  " #
get  $ '
;  ' (
set  ) ,
;  , -
}  . /
=  0 1
default  2 9
!  9 :
;  : ;
}!! 
}"" ≤
JD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\Department.cs
	namespace 	

PayrollApi
 
. 
Models 
{ 
public 

class 

Department 
: 
AuditEntity )
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[		 	
Required			 
,		 
	MaxLength		 
(		 
$num		  
)		  !
]		! "
public

 
string

 
Name

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
=

) *
default

+ 2
!

2 3
;

3 4
} 
} È-
LD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\CTCStructure.cs
	namespace 	

PayrollApi
 
. 
Models 
{ 
public 

class 
CTCAllowance 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[

 	

ForeignKey

	 
(

 
nameof

 
(

 
CTCStructure

 '
)

' (
)

( )
]

) *
public 
int 
CTCStructureId !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
CTCStructure 
CTCStructure (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
=7 8
default9 @
!@ A
;A B
public 
string 
Label 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
decimal 
Amount 
{ 
get  #
;# $
set% (
;( )
}* +
} 
public 

class 
CTCDeduction 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	

ForeignKey	 
( 
nameof 
( 
CTCStructure '
)' (
)( )
]) *
public 
int 
CTCStructureId !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
CTCStructure 
CTCStructure (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
=7 8
default9 @
!@ A
;A B
public 
string 
Label 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
decimal 
Amount 
{ 
get  #
;# $
set% (
;( )
}* +
} 
public 

class 
CTCStructure 
: 
AuditEntity  +
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
ApprovalStatus 
Status $
{% &
get' *
;* +
set, /
;/ 0
}1 2
=3 4
ApprovalStatus5 C
.C D
PendingD K
;K L
[!! 	

ForeignKey!!	 
(!! 
nameof!! 
(!! 
EmployeeProfile!! *
)!!* +
)!!+ ,
]!!, -
public"" 
int"" 
EmployeeProfileId"" $
{""% &
get""' *
;""* +
set"", /
;""/ 0
}""1 2
public## 
EmployeeProfile## 
EmployeeProfile## .
{##/ 0
get##1 4
;##4 5
set##6 9
;##9 :
}##; <
=##= >
default##? F
!##F G
;##G H
public$$ 
decimal$$ 
Basic$$ 
{$$ 
get$$ "
;$$" #
set$$$ '
;$$' (
}$$) *
public%% 
decimal%% 
HRA%% 
{%% 
get%%  
;%%  !
set%%" %
;%%% &
}%%' (
public&& 
ICollection&& 
<&& 
CTCAllowance&& '
>&&' (

Allowances&&) 3
{&&4 5
get&&6 9
;&&9 :
set&&; >
;&&> ?
}&&@ A
=&&B C
new&&D G
List&&H L
<&&L M
CTCAllowance&&M Y
>&&Y Z
(&&Z [
)&&[ \
;&&\ ]
public'' 
ICollection'' 
<'' 
CTCDeduction'' '
>''' (

Deductions'') 3
{''4 5
get''6 9
;''9 :
set''; >
;''> ?
}''@ A
=''B C
new''D G
List''H L
<''L M
CTCDeduction''M Y
>''Y Z
(''Z [
)''[ \
;''\ ]
public(( 
decimal(( 

TaxPercent(( !
{((" #
get(($ '
;((' (
set(() ,
;((, -
}((. /
public)) 
decimal)) 
GrossCTC)) 
{))  !
get))" %
;))% &
set))' *
;))* +
})), -
public** 
DateTime** 
EffectiveFrom** %
{**& '
get**( +
;**+ ,
set**- 0
;**0 1
}**2 3
public++ 
DateTime++ 
EffectiveTo++ #
{++$ %
get++& )
;++) *
set+++ .
;++. /
}++0 1
public,, 
bool,, 

IsApproved,, 
{,,  
get,,! $
;,,$ %
set,,& )
;,,) *
},,+ ,
=,,- .
false,,/ 4
;,,4 5
public-- 
int-- 
CreatedByUserId-- "
{--# $
get--% (
;--( )
set--* -
;--- .
}--/ 0
public.. 
User.. 
CreatedByUser.. !
{.." #
get..$ '
;..' (
set..) ,
;.., -
}... /
}// 
}00 É
HD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\AuditLog.cs
	namespace 	

PayrollApi
 
. 
Models 
{ 
public 

class 
AuditLog 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 

EntityType  
{! "
get# &
;& '
set( +
;+ ,
}- .
=/ 0
default1 8
!8 9
;9 :
public 
int 
? 
EntityId 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
string		 
Action		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
=		+ ,
default		- 4
!		4 5
;		5 6
public

 
string

 
?

 
PerformedBy

 "
{

# $
get

% (
;

( )
set

* -
;

- .
}

/ 0
public 
int 
? 
PerformedById !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
PerformedAt #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
DateTime4 <
.< =
UtcNow= C
;C D
public 
string 
? 
Details 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ß
KD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Models\AuditEntity.cs
	namespace 	

PayrollApi
 
. 
Models 
{ 
public 

abstract 
class 
AuditEntity %
{ 
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
DateTime2 :
.: ;
UtcNow; A
;A B
public 
string 
? 
	CreatedBy  
{! "
get# &
;& '
set( +
;+ ,
}- .
public		 
DateTime		 
?		 
	UpdatedAt		 "
{		# $
get		% (
;		( )
set		* -
;		- .
}		/ 0
public

 
string

 
?

 
	UpdatedBy

  
{

! "
get

# &
;

& '
set

( +
;

+ ,
}

- .
} 
} èï
[D:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Migrations\20250916094818_TheFifth.cs
	namespace 	

PayrollApi
 
. 

Migrations 
{ 
public		 

partial		 
class		 
TheFifth		 !
:		" #
	Migration		$ -
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str $
,$ %
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column 
: 
$str #
,# $
value 
: 
new 
DateTime #
(# $
$num$ (
,( )
$num* +
,+ ,
$num- /
,/ 0
$num1 2
,2 3
$num4 6
,6 7
$num8 :
,: ;
$num< ?
,? @
DateTimeKindA M
.M N
UtcN Q
)Q R
.R S
AddTicksS [
([ \
$num\ `
)` a
)a b
;b c
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str $
,$ %
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column 
: 
$str #
,# $
value 
: 
new 
DateTime #
(# $
$num$ (
,( )
$num* +
,+ ,
$num- /
,/ 0
$num1 2
,2 3
$num4 6
,6 7
$num8 :
,: ;
$num< ?
,? @
DateTimeKindA M
.M N
UtcN Q
)Q R
.R S
AddTicksS [
([ \
$num\ `
)` a
)a b
;b c
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str $
,$ %
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column   
:   
$str   #
,  # $
value!! 
:!! 
new!! 
DateTime!! #
(!!# $
$num!!$ (
,!!( )
$num!!* +
,!!+ ,
$num!!- /
,!!/ 0
$num!!1 2
,!!2 3
$num!!4 6
,!!6 7
$num!!8 :
,!!: ;
$num!!< ?
,!!? @
DateTimeKind!!A M
.!!M N
Utc!!N Q
)!!Q R
.!!R S
AddTicks!!S [
(!![ \
$num!!\ `
)!!` a
)!!a b
;!!b c
migrationBuilder## 
.## 

UpdateData## '
(##' (
table$$ 
:$$ 
$str$$ $
,$$$ %
	keyColumn%% 
:%% 
$str%% 
,%%  
keyValue&& 
:&& 
$num&& 
,&& 
column'' 
:'' 
$str'' #
,''# $
value(( 
:(( 
new(( 
DateTime(( #
(((# $
$num(($ (
,((( )
$num((* +
,((+ ,
$num((- /
,((/ 0
$num((1 2
,((2 3
$num((4 6
,((6 7
$num((8 :
,((: ;
$num((< ?
,((? @
DateTimeKind((A M
.((M N
Utc((N Q
)((Q R
.((R S
AddTicks((S [
((([ \
$num((\ `
)((` a
)((a b
;((b c
migrationBuilder** 
.** 

UpdateData** '
(**' (
table++ 
:++ 
$str++ $
,++$ %
	keyColumn,, 
:,, 
$str,, 
,,,  
keyValue-- 
:-- 
$num-- 
,-- 
column.. 
:.. 
$str.. #
,..# $
value// 
:// 
new// 
DateTime// #
(//# $
$num//$ (
,//( )
$num//* +
,//+ ,
$num//- /
,/// 0
$num//1 2
,//2 3
$num//4 6
,//6 7
$num//8 :
,//: ;
$num//< ?
,//? @
DateTimeKind//A M
.//M N
Utc//N Q
)//Q R
.//R S
AddTicks//S [
(//[ \
$num//\ `
)//` a
)//a b
;//b c
migrationBuilder11 
.11 

UpdateData11 '
(11' (
table22 
:22 
$str22 $
,22$ %
	keyColumn33 
:33 
$str33 
,33  
keyValue44 
:44 
$num44 
,44 
column55 
:55 
$str55 #
,55# $
value66 
:66 
new66 
DateTime66 #
(66# $
$num66$ (
,66( )
$num66* +
,66+ ,
$num66- /
,66/ 0
$num661 2
,662 3
$num664 6
,666 7
$num668 :
,66: ;
$num66< ?
,66? @
DateTimeKind66A M
.66M N
Utc66N Q
)66Q R
.66R S
AddTicks66S [
(66[ \
$num66\ `
)66` a
)66a b
;66b c
migrationBuilder88 
.88 

UpdateData88 '
(88' (
table99 
:99 
$str99 $
,99$ %
	keyColumn:: 
::: 
$str:: 
,::  
keyValue;; 
:;; 
$num;; 
,;; 
column<< 
:<< 
$str<< #
,<<# $
value== 
:== 
new== 
DateTime== #
(==# $
$num==$ (
,==( )
$num==* +
,==+ ,
$num==- /
,==/ 0
$num==1 2
,==2 3
$num==4 6
,==6 7
$num==8 :
,==: ;
$num==< ?
,==? @
DateTimeKind==A M
.==M N
Utc==N Q
)==Q R
.==R S
AddTicks==S [
(==[ \
$num==\ `
)==` a
)==a b
;==b c
migrationBuilder?? 
.?? 

UpdateData?? '
(??' (
table@@ 
:@@ 
$str@@ $
,@@$ %
	keyColumnAA 
:AA 
$strAA 
,AA  
keyValueBB 
:BB 
$numBB 
,BB 
columnCC 
:CC 
$strCC #
,CC# $
valueDD 
:DD 
newDD 
DateTimeDD #
(DD# $
$numDD$ (
,DD( )
$numDD* +
,DD+ ,
$numDD- /
,DD/ 0
$numDD1 2
,DD2 3
$numDD4 6
,DD6 7
$numDD8 :
,DD: ;
$numDD< ?
,DD? @
DateTimeKindDDA M
.DDM N
UtcDDN Q
)DDQ R
.DDR S
AddTicksDDS [
(DD[ \
$numDD\ `
)DD` a
)DDa b
;DDb c
migrationBuilderFF 
.FF 

UpdateDataFF '
(FF' (
tableGG 
:GG 
$strGG $
,GG$ %
	keyColumnHH 
:HH 
$strHH 
,HH  
keyValueII 
:II 
$numII 
,II 
columnJJ 
:JJ 
$strJJ #
,JJ# $
valueKK 
:KK 
newKK 
DateTimeKK #
(KK# $
$numKK$ (
,KK( )
$numKK* +
,KK+ ,
$numKK- /
,KK/ 0
$numKK1 2
,KK2 3
$numKK4 6
,KK6 7
$numKK8 :
,KK: ;
$numKK< ?
,KK? @
DateTimeKindKKA M
.KKM N
UtcKKN Q
)KKQ R
.KKR S
AddTicksKKS [
(KK[ \
$numKK\ `
)KK` a
)KKa b
;KKb c
migrationBuilderMM 
.MM 

UpdateDataMM '
(MM' (
tableNN 
:NN 
$strNN 
,NN 
	keyColumnOO 
:OO 
$strOO 
,OO  
keyValuePP 
:PP 
$numPP 
,PP 
columnsQQ 
:QQ 
newQQ 
[QQ 
]QQ 
{QQ  
$strQQ! ,
,QQ, -
$strQQ. <
}QQ= >
,QQ> ?
valuesRR 
:RR 
newRR 
objectRR "
[RR" #
]RR# $
{RR% &
newRR' *
DateTimeRR+ 3
(RR3 4
$numRR4 8
,RR8 9
$numRR: ;
,RR; <
$numRR= ?
,RR? @
$numRRA B
,RRB C
$numRRD F
,RRF G
$numRRH J
,RRJ K
$numRRL O
,RRO P
DateTimeKindRRQ ]
.RR] ^
UtcRR^ a
)RRa b
.RRb c
AddTicksRRc k
(RRk l
$numRRl p
)RRp q
,RRq r
$str	RRs ±
}
RR≤ ≥
)
RR≥ ¥
;
RR¥ µ
}SS 	
	protectedVV 
overrideVV 
voidVV 
DownVV  $
(VV$ %
MigrationBuilderVV% 5
migrationBuilderVV6 F
)VVF G
{WW 	
migrationBuilderXX 
.XX 

UpdateDataXX '
(XX' (
tableYY 
:YY 
$strYY $
,YY$ %
	keyColumnZZ 
:ZZ 
$strZZ 
,ZZ  
keyValue[[ 
:[[ 
$num[[ 
,[[ 
column\\ 
:\\ 
$str\\ #
,\\# $
value]] 
:]] 
new]] 
DateTime]] #
(]]# $
$num]]$ (
,]]( )
$num]]* +
,]]+ ,
$num]]- /
,]]/ 0
$num]]1 2
,]]2 3
$num]]4 6
,]]6 7
$num]]8 :
,]]: ;
$num]]< ?
,]]? @
DateTimeKind]]A M
.]]M N
Utc]]N Q
)]]Q R
.]]R S
AddTicks]]S [
(]][ \
$num]]\ `
)]]` a
)]]a b
;]]b c
migrationBuilder__ 
.__ 

UpdateData__ '
(__' (
table`` 
:`` 
$str`` $
,``$ %
	keyColumnaa 
:aa 
$straa 
,aa  
keyValuebb 
:bb 
$numbb 
,bb 
columncc 
:cc 
$strcc #
,cc# $
valuedd 
:dd 
newdd 
DateTimedd #
(dd# $
$numdd$ (
,dd( )
$numdd* +
,dd+ ,
$numdd- /
,dd/ 0
$numdd1 2
,dd2 3
$numdd4 6
,dd6 7
$numdd8 :
,dd: ;
$numdd< ?
,dd? @
DateTimeKindddA M
.ddM N
UtcddN Q
)ddQ R
.ddR S
AddTicksddS [
(dd[ \
$numdd\ `
)dd` a
)dda b
;ddb c
migrationBuilderff 
.ff 

UpdateDataff '
(ff' (
tablegg 
:gg 
$strgg $
,gg$ %
	keyColumnhh 
:hh 
$strhh 
,hh  
keyValueii 
:ii 
$numii 
,ii 
columnjj 
:jj 
$strjj #
,jj# $
valuekk 
:kk 
newkk 
DateTimekk #
(kk# $
$numkk$ (
,kk( )
$numkk* +
,kk+ ,
$numkk- /
,kk/ 0
$numkk1 2
,kk2 3
$numkk4 6
,kk6 7
$numkk8 :
,kk: ;
$numkk< ?
,kk? @
DateTimeKindkkA M
.kkM N
UtckkN Q
)kkQ R
.kkR S
AddTickskkS [
(kk[ \
$numkk\ `
)kk` a
)kka b
;kkb c
migrationBuildermm 
.mm 

UpdateDatamm '
(mm' (
tablenn 
:nn 
$strnn $
,nn$ %
	keyColumnoo 
:oo 
$stroo 
,oo  
keyValuepp 
:pp 
$numpp 
,pp 
columnqq 
:qq 
$strqq #
,qq# $
valuerr 
:rr 
newrr 
DateTimerr #
(rr# $
$numrr$ (
,rr( )
$numrr* +
,rr+ ,
$numrr- /
,rr/ 0
$numrr1 2
,rr2 3
$numrr4 6
,rr6 7
$numrr8 :
,rr: ;
$numrr< ?
,rr? @
DateTimeKindrrA M
.rrM N
UtcrrN Q
)rrQ R
.rrR S
AddTicksrrS [
(rr[ \
$numrr\ `
)rr` a
)rra b
;rrb c
migrationBuildertt 
.tt 

UpdateDatatt '
(tt' (
tableuu 
:uu 
$struu $
,uu$ %
	keyColumnvv 
:vv 
$strvv 
,vv  
keyValueww 
:ww 
$numww 
,ww 
columnxx 
:xx 
$strxx #
,xx# $
valueyy 
:yy 
newyy 
DateTimeyy #
(yy# $
$numyy$ (
,yy( )
$numyy* +
,yy+ ,
$numyy- /
,yy/ 0
$numyy1 2
,yy2 3
$numyy4 6
,yy6 7
$numyy8 :
,yy: ;
$numyy< ?
,yy? @
DateTimeKindyyA M
.yyM N
UtcyyN Q
)yyQ R
.yyR S
AddTicksyyS [
(yy[ \
$numyy\ `
)yy` a
)yya b
;yyb c
migrationBuilder{{ 
.{{ 

UpdateData{{ '
({{' (
table|| 
:|| 
$str|| $
,||$ %
	keyColumn}} 
:}} 
$str}} 
,}}  
keyValue~~ 
:~~ 
$num~~ 
,~~ 
column 
: 
$str #
,# $
value
ÄÄ 
:
ÄÄ 
new
ÄÄ 
DateTime
ÄÄ #
(
ÄÄ# $
$num
ÄÄ$ (
,
ÄÄ( )
$num
ÄÄ* +
,
ÄÄ+ ,
$num
ÄÄ- /
,
ÄÄ/ 0
$num
ÄÄ1 2
,
ÄÄ2 3
$num
ÄÄ4 6
,
ÄÄ6 7
$num
ÄÄ8 :
,
ÄÄ: ;
$num
ÄÄ< ?
,
ÄÄ? @
DateTimeKind
ÄÄA M
.
ÄÄM N
Utc
ÄÄN Q
)
ÄÄQ R
.
ÄÄR S
AddTicks
ÄÄS [
(
ÄÄ[ \
$num
ÄÄ\ `
)
ÄÄ` a
)
ÄÄa b
;
ÄÄb c
migrationBuilder
ÇÇ 
.
ÇÇ 

UpdateData
ÇÇ '
(
ÇÇ' (
table
ÉÉ 
:
ÉÉ 
$str
ÉÉ $
,
ÉÉ$ %
	keyColumn
ÑÑ 
:
ÑÑ 
$str
ÑÑ 
,
ÑÑ  
keyValue
ÖÖ 
:
ÖÖ 
$num
ÖÖ 
,
ÖÖ 
column
ÜÜ 
:
ÜÜ 
$str
ÜÜ #
,
ÜÜ# $
value
áá 
:
áá 
new
áá 
DateTime
áá #
(
áá# $
$num
áá$ (
,
áá( )
$num
áá* +
,
áá+ ,
$num
áá- /
,
áá/ 0
$num
áá1 2
,
áá2 3
$num
áá4 6
,
áá6 7
$num
áá8 :
,
áá: ;
$num
áá< ?
,
áá? @
DateTimeKind
ááA M
.
ááM N
Utc
ááN Q
)
ááQ R
.
ááR S
AddTicks
ááS [
(
áá[ \
$num
áá\ `
)
áá` a
)
ááa b
;
ááb c
migrationBuilder
ââ 
.
ââ 

UpdateData
ââ '
(
ââ' (
table
ää 
:
ää 
$str
ää $
,
ää$ %
	keyColumn
ãã 
:
ãã 
$str
ãã 
,
ãã  
keyValue
åå 
:
åå 
$num
åå 
,
åå 
column
çç 
:
çç 
$str
çç #
,
çç# $
value
éé 
:
éé 
new
éé 
DateTime
éé #
(
éé# $
$num
éé$ (
,
éé( )
$num
éé* +
,
éé+ ,
$num
éé- /
,
éé/ 0
$num
éé1 2
,
éé2 3
$num
éé4 6
,
éé6 7
$num
éé8 :
,
éé: ;
$num
éé< ?
,
éé? @
DateTimeKind
ééA M
.
ééM N
Utc
ééN Q
)
ééQ R
.
ééR S
AddTicks
ééS [
(
éé[ \
$num
éé\ `
)
éé` a
)
ééa b
;
ééb c
migrationBuilder
êê 
.
êê 

UpdateData
êê '
(
êê' (
table
ëë 
:
ëë 
$str
ëë $
,
ëë$ %
	keyColumn
íí 
:
íí 
$str
íí 
,
íí  
keyValue
ìì 
:
ìì 
$num
ìì 
,
ìì 
column
îî 
:
îî 
$str
îî #
,
îî# $
value
ïï 
:
ïï 
new
ïï 
DateTime
ïï #
(
ïï# $
$num
ïï$ (
,
ïï( )
$num
ïï* +
,
ïï+ ,
$num
ïï- /
,
ïï/ 0
$num
ïï1 2
,
ïï2 3
$num
ïï4 6
,
ïï6 7
$num
ïï8 :
,
ïï: ;
$num
ïï< ?
,
ïï? @
DateTimeKind
ïïA M
.
ïïM N
Utc
ïïN Q
)
ïïQ R
.
ïïR S
AddTicks
ïïS [
(
ïï[ \
$num
ïï\ `
)
ïï` a
)
ïïa b
;
ïïb c
migrationBuilder
óó 
.
óó 

UpdateData
óó '
(
óó' (
table
òò 
:
òò 
$str
òò 
,
òò 
	keyColumn
ôô 
:
ôô 
$str
ôô 
,
ôô  
keyValue
öö 
:
öö 
$num
öö 
,
öö 
columns
õõ 
:
õõ 
new
õõ 
[
õõ 
]
õõ 
{
õõ  
$str
õõ! ,
,
õõ, -
$str
õõ. <
}
õõ= >
,
õõ> ?
values
úú 
:
úú 
new
úú 
object
úú "
[
úú" #
]
úú# $
{
úú% &
new
úú' *
DateTime
úú+ 3
(
úú3 4
$num
úú4 8
,
úú8 9
$num
úú: ;
,
úú; <
$num
úú= ?
,
úú? @
$num
úúA B
,
úúB C
$num
úúD F
,
úúF G
$num
úúH J
,
úúJ K
$num
úúL O
,
úúO P
DateTimeKind
úúQ ]
.
úú] ^
Utc
úú^ a
)
úúa b
.
úúb c
AddTicks
úúc k
(
úúk l
$num
úúl p
)
úúp q
,
úúq r
$strúús ±
}úú≤ ≥
)úú≥ ¥
;úú¥ µ
}
ùù 	
}
ûû 
}üü ˘æ
\D:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Migrations\20250916093956_TheFourth.cs
	namespace 	

PayrollApi
 
. 

Migrations 
{ 
public

 

partial

 
class

 
	TheFourth

 "
:

# $
	Migration

% .
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ C
,C D(
MySqlValueGenerationStrategyE a
.a b
IdentityColumnb p
)p q
,q r
UserId 
= 
table "
." #
Column# )
<) *
int* -
>- .
(. /
type/ 3
:3 4
$str5 :
,: ;
nullable< D
:D E
falseF K
)K L
,L M
Date 
= 
table  
.  !
Column! '
<' (
DateTime( 0
>0 1
(1 2
type2 6
:6 7
$str8 E
,E F
nullableG O
:O P
falseQ V
)V W
,W X
Content 
= 
table #
.# $
Column$ *
<* +
string+ 1
>1 2
(2 3
type3 7
:7 8
$str9 G
,G H
	maxLengthI R
:R S
$numT W
,W X
nullableY a
:a b
truec g
)g h
. 

Annotation #
(# $
$str$ 3
,3 4
$str5 >
)> ?
,? @
	CreatedAt 
= 
table  %
.% &
Column& ,
<, -
DateTime- 5
>5 6
(6 7
type7 ;
:; <
$str= J
,J K
nullableL T
:T U
falseV [
)[ \
,\ ]
	CreatedBy 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
type5 9
:9 :
$str; E
,E F
nullableG O
:O P
trueQ U
)U V
. 

Annotation #
(# $
$str$ 3
,3 4
$str5 >
)> ?
,? @
	UpdatedAt 
= 
table  %
.% &
Column& ,
<, -
DateTime- 5
>5 6
(6 7
type7 ;
:; <
$str= J
,J K
nullableL T
:T U
trueV Z
)Z [
,[ \
	UpdatedBy 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
type5 9
:9 :
$str; E
,E F
nullableG O
:O P
trueQ U
)U V
. 

Annotation #
(# $
$str$ 3
,3 4
$str5 >
)> ?
} 
, 
constraints   
:   
table   "
=>  # %
{!! 
table"" 
."" 

PrimaryKey"" $
(""$ %
$str""% /
,""/ 0
x""1 2
=>""3 5
x""6 7
.""7 8
Id""8 :
)"": ;
;""; <
table## 
.## 

ForeignKey## $
(##$ %
name$$ 
:$$ 
$str$$ 5
,$$5 6
column%% 
:%% 
x%%  !
=>%%" $
x%%% &
.%%& '
UserId%%' -
,%%- .
principalTable&& &
:&&& '
$str&&( /
,&&/ 0
principalColumn'' '
:''' (
$str'') -
,''- .
onDelete((  
:((  !
ReferentialAction((" 3
.((3 4
Cascade((4 ;
)((; <
;((< =
})) 
))) 
.** 

Annotation** 
(** 
$str** +
,**+ ,
$str**- 6
)**6 7
;**7 8
migrationBuilder,, 
.,, 

UpdateData,, '
(,,' (
table-- 
:-- 
$str-- $
,--$ %
	keyColumn.. 
:.. 
$str.. 
,..  
keyValue// 
:// 
$num// 
,// 
column00 
:00 
$str00 #
,00# $
value11 
:11 
new11 
DateTime11 #
(11# $
$num11$ (
,11( )
$num11* +
,11+ ,
$num11- /
,11/ 0
$num111 2
,112 3
$num114 6
,116 7
$num118 :
,11: ;
$num11< ?
,11? @
DateTimeKind11A M
.11M N
Utc11N Q
)11Q R
.11R S
AddTicks11S [
(11[ \
$num11\ `
)11` a
)11a b
;11b c
migrationBuilder33 
.33 

UpdateData33 '
(33' (
table44 
:44 
$str44 $
,44$ %
	keyColumn55 
:55 
$str55 
,55  
keyValue66 
:66 
$num66 
,66 
column77 
:77 
$str77 #
,77# $
value88 
:88 
new88 
DateTime88 #
(88# $
$num88$ (
,88( )
$num88* +
,88+ ,
$num88- /
,88/ 0
$num881 2
,882 3
$num884 6
,886 7
$num888 :
,88: ;
$num88< ?
,88? @
DateTimeKind88A M
.88M N
Utc88N Q
)88Q R
.88R S
AddTicks88S [
(88[ \
$num88\ `
)88` a
)88a b
;88b c
migrationBuilder:: 
.:: 

UpdateData:: '
(::' (
table;; 
:;; 
$str;; $
,;;$ %
	keyColumn<< 
:<< 
$str<< 
,<<  
keyValue== 
:== 
$num== 
,== 
column>> 
:>> 
$str>> #
,>># $
value?? 
:?? 
new?? 
DateTime?? #
(??# $
$num??$ (
,??( )
$num??* +
,??+ ,
$num??- /
,??/ 0
$num??1 2
,??2 3
$num??4 6
,??6 7
$num??8 :
,??: ;
$num??< ?
,??? @
DateTimeKind??A M
.??M N
Utc??N Q
)??Q R
.??R S
AddTicks??S [
(??[ \
$num??\ `
)??` a
)??a b
;??b c
migrationBuilderAA 
.AA 

UpdateDataAA '
(AA' (
tableBB 
:BB 
$strBB $
,BB$ %
	keyColumnCC 
:CC 
$strCC 
,CC  
keyValueDD 
:DD 
$numDD 
,DD 
columnEE 
:EE 
$strEE #
,EE# $
valueFF 
:FF 
newFF 
DateTimeFF #
(FF# $
$numFF$ (
,FF( )
$numFF* +
,FF+ ,
$numFF- /
,FF/ 0
$numFF1 2
,FF2 3
$numFF4 6
,FF6 7
$numFF8 :
,FF: ;
$numFF< ?
,FF? @
DateTimeKindFFA M
.FFM N
UtcFFN Q
)FFQ R
.FFR S
AddTicksFFS [
(FF[ \
$numFF\ `
)FF` a
)FFa b
;FFb c
migrationBuilderHH 
.HH 

UpdateDataHH '
(HH' (
tableII 
:II 
$strII $
,II$ %
	keyColumnJJ 
:JJ 
$strJJ 
,JJ  
keyValueKK 
:KK 
$numKK 
,KK 
columnLL 
:LL 
$strLL #
,LL# $
valueMM 
:MM 
newMM 
DateTimeMM #
(MM# $
$numMM$ (
,MM( )
$numMM* +
,MM+ ,
$numMM- /
,MM/ 0
$numMM1 2
,MM2 3
$numMM4 6
,MM6 7
$numMM8 :
,MM: ;
$numMM< ?
,MM? @
DateTimeKindMMA M
.MMM N
UtcMMN Q
)MMQ R
.MMR S
AddTicksMMS [
(MM[ \
$numMM\ `
)MM` a
)MMa b
;MMb c
migrationBuilderOO 
.OO 

UpdateDataOO '
(OO' (
tablePP 
:PP 
$strPP $
,PP$ %
	keyColumnQQ 
:QQ 
$strQQ 
,QQ  
keyValueRR 
:RR 
$numRR 
,RR 
columnSS 
:SS 
$strSS #
,SS# $
valueTT 
:TT 
newTT 
DateTimeTT #
(TT# $
$numTT$ (
,TT( )
$numTT* +
,TT+ ,
$numTT- /
,TT/ 0
$numTT1 2
,TT2 3
$numTT4 6
,TT6 7
$numTT8 :
,TT: ;
$numTT< ?
,TT? @
DateTimeKindTTA M
.TTM N
UtcTTN Q
)TTQ R
.TTR S
AddTicksTTS [
(TT[ \
$numTT\ `
)TT` a
)TTa b
;TTb c
migrationBuilderVV 
.VV 

UpdateDataVV '
(VV' (
tableWW 
:WW 
$strWW $
,WW$ %
	keyColumnXX 
:XX 
$strXX 
,XX  
keyValueYY 
:YY 
$numYY 
,YY 
columnZZ 
:ZZ 
$strZZ #
,ZZ# $
value[[ 
:[[ 
new[[ 
DateTime[[ #
([[# $
$num[[$ (
,[[( )
$num[[* +
,[[+ ,
$num[[- /
,[[/ 0
$num[[1 2
,[[2 3
$num[[4 6
,[[6 7
$num[[8 :
,[[: ;
$num[[< ?
,[[? @
DateTimeKind[[A M
.[[M N
Utc[[N Q
)[[Q R
.[[R S
AddTicks[[S [
([[[ \
$num[[\ `
)[[` a
)[[a b
;[[b c
migrationBuilder]] 
.]] 

UpdateData]] '
(]]' (
table^^ 
:^^ 
$str^^ $
,^^$ %
	keyColumn__ 
:__ 
$str__ 
,__  
keyValue`` 
:`` 
$num`` 
,`` 
columnaa 
:aa 
$straa #
,aa# $
valuebb 
:bb 
newbb 
DateTimebb #
(bb# $
$numbb$ (
,bb( )
$numbb* +
,bb+ ,
$numbb- /
,bb/ 0
$numbb1 2
,bb2 3
$numbb4 6
,bb6 7
$numbb8 :
,bb: ;
$numbb< ?
,bb? @
DateTimeKindbbA M
.bbM N
UtcbbN Q
)bbQ R
.bbR S
AddTicksbbS [
(bb[ \
$numbb\ `
)bb` a
)bba b
;bbb c
migrationBuilderdd 
.dd 

UpdateDatadd '
(dd' (
tableee 
:ee 
$stree $
,ee$ %
	keyColumnff 
:ff 
$strff 
,ff  
keyValuegg 
:gg 
$numgg 
,gg 
columnhh 
:hh 
$strhh #
,hh# $
valueii 
:ii 
newii 
DateTimeii #
(ii# $
$numii$ (
,ii( )
$numii* +
,ii+ ,
$numii- /
,ii/ 0
$numii1 2
,ii2 3
$numii4 6
,ii6 7
$numii8 :
,ii: ;
$numii< ?
,ii? @
DateTimeKindiiA M
.iiM N
UtciiN Q
)iiQ R
.iiR S
AddTicksiiS [
(ii[ \
$numii\ `
)ii` a
)iia b
;iib c
migrationBuilderkk 
.kk 

UpdateDatakk '
(kk' (
tablell 
:ll 
$strll 
,ll 
	keyColumnmm 
:mm 
$strmm 
,mm  
keyValuenn 
:nn 
$numnn 
,nn 
columnsoo 
:oo 
newoo 
[oo 
]oo 
{oo  
$stroo! ,
,oo, -
$stroo. <
}oo= >
,oo> ?
valuespp 
:pp 
newpp 
objectpp "
[pp" #
]pp# $
{pp% &
newpp' *
DateTimepp+ 3
(pp3 4
$numpp4 8
,pp8 9
$numpp: ;
,pp; <
$numpp= ?
,pp? @
$numppA B
,ppB C
$numppD F
,ppF G
$numppH J
,ppJ K
$numppL O
,ppO P
DateTimeKindppQ ]
.pp] ^
Utcpp^ a
)ppa b
.ppb c
AddTicksppc k
(ppk l
$numppl p
)ppp q
,ppq r
$str	pps ±
}
pp≤ ≥
)
pp≥ ¥
;
pp¥ µ
migrationBuilderrr 
.rr 
CreateIndexrr (
(rr( )
namess 
:ss 
$strss '
,ss' (
tablett 
:tt 
$strtt 
,tt 
columnuu 
:uu 
$struu  
)uu  !
;uu! "
}vv 	
	protectedyy 
overrideyy 
voidyy 
Downyy  $
(yy$ %
MigrationBuilderyy% 5
migrationBuilderyy6 F
)yyF G
{zz 	
migrationBuilder{{ 
.{{ 
	DropTable{{ &
({{& '
name|| 
:|| 
$str|| 
)|| 
;|| 
migrationBuilder~~ 
.~~ 

UpdateData~~ '
(~~' (
table 
: 
$str $
,$ %
	keyColumn
ÄÄ 
:
ÄÄ 
$str
ÄÄ 
,
ÄÄ  
keyValue
ÅÅ 
:
ÅÅ 
$num
ÅÅ 
,
ÅÅ 
column
ÇÇ 
:
ÇÇ 
$str
ÇÇ #
,
ÇÇ# $
value
ÉÉ 
:
ÉÉ 
new
ÉÉ 
DateTime
ÉÉ #
(
ÉÉ# $
$num
ÉÉ$ (
,
ÉÉ( )
$num
ÉÉ* +
,
ÉÉ+ ,
$num
ÉÉ- /
,
ÉÉ/ 0
$num
ÉÉ1 3
,
ÉÉ3 4
$num
ÉÉ5 7
,
ÉÉ7 8
$num
ÉÉ9 :
,
ÉÉ: ;
$num
ÉÉ< >
,
ÉÉ> ?
DateTimeKind
ÉÉ@ L
.
ÉÉL M
Utc
ÉÉM P
)
ÉÉP Q
.
ÉÉQ R
AddTicks
ÉÉR Z
(
ÉÉZ [
$num
ÉÉ[ _
)
ÉÉ_ `
)
ÉÉ` a
;
ÉÉa b
migrationBuilder
ÖÖ 
.
ÖÖ 

UpdateData
ÖÖ '
(
ÖÖ' (
table
ÜÜ 
:
ÜÜ 
$str
ÜÜ $
,
ÜÜ$ %
	keyColumn
áá 
:
áá 
$str
áá 
,
áá  
keyValue
àà 
:
àà 
$num
àà 
,
àà 
column
ââ 
:
ââ 
$str
ââ #
,
ââ# $
value
ää 
:
ää 
new
ää 
DateTime
ää #
(
ää# $
$num
ää$ (
,
ää( )
$num
ää* +
,
ää+ ,
$num
ää- /
,
ää/ 0
$num
ää1 3
,
ää3 4
$num
ää5 7
,
ää7 8
$num
ää9 :
,
ää: ;
$num
ää< >
,
ää> ?
DateTimeKind
ää@ L
.
ääL M
Utc
ääM P
)
ääP Q
.
ääQ R
AddTicks
ääR Z
(
ääZ [
$num
ää[ _
)
ää_ `
)
ää` a
;
ääa b
migrationBuilder
åå 
.
åå 

UpdateData
åå '
(
åå' (
table
çç 
:
çç 
$str
çç $
,
çç$ %
	keyColumn
éé 
:
éé 
$str
éé 
,
éé  
keyValue
èè 
:
èè 
$num
èè 
,
èè 
column
êê 
:
êê 
$str
êê #
,
êê# $
value
ëë 
:
ëë 
new
ëë 
DateTime
ëë #
(
ëë# $
$num
ëë$ (
,
ëë( )
$num
ëë* +
,
ëë+ ,
$num
ëë- /
,
ëë/ 0
$num
ëë1 3
,
ëë3 4
$num
ëë5 7
,
ëë7 8
$num
ëë9 :
,
ëë: ;
$num
ëë< >
,
ëë> ?
DateTimeKind
ëë@ L
.
ëëL M
Utc
ëëM P
)
ëëP Q
.
ëëQ R
AddTicks
ëëR Z
(
ëëZ [
$num
ëë[ _
)
ëë_ `
)
ëë` a
;
ëëa b
migrationBuilder
ìì 
.
ìì 

UpdateData
ìì '
(
ìì' (
table
îî 
:
îî 
$str
îî $
,
îî$ %
	keyColumn
ïï 
:
ïï 
$str
ïï 
,
ïï  
keyValue
ññ 
:
ññ 
$num
ññ 
,
ññ 
column
óó 
:
óó 
$str
óó #
,
óó# $
value
òò 
:
òò 
new
òò 
DateTime
òò #
(
òò# $
$num
òò$ (
,
òò( )
$num
òò* +
,
òò+ ,
$num
òò- /
,
òò/ 0
$num
òò1 3
,
òò3 4
$num
òò5 7
,
òò7 8
$num
òò9 :
,
òò: ;
$num
òò< >
,
òò> ?
DateTimeKind
òò@ L
.
òòL M
Utc
òòM P
)
òòP Q
.
òòQ R
AddTicks
òòR Z
(
òòZ [
$num
òò[ _
)
òò_ `
)
òò` a
;
òòa b
migrationBuilder
öö 
.
öö 

UpdateData
öö '
(
öö' (
table
õõ 
:
õõ 
$str
õõ $
,
õõ$ %
	keyColumn
úú 
:
úú 
$str
úú 
,
úú  
keyValue
ùù 
:
ùù 
$num
ùù 
,
ùù 
column
ûû 
:
ûû 
$str
ûû #
,
ûû# $
value
üü 
:
üü 
new
üü 
DateTime
üü #
(
üü# $
$num
üü$ (
,
üü( )
$num
üü* +
,
üü+ ,
$num
üü- /
,
üü/ 0
$num
üü1 3
,
üü3 4
$num
üü5 7
,
üü7 8
$num
üü9 :
,
üü: ;
$num
üü< >
,
üü> ?
DateTimeKind
üü@ L
.
üüL M
Utc
üüM P
)
üüP Q
.
üüQ R
AddTicks
üüR Z
(
üüZ [
$num
üü[ _
)
üü_ `
)
üü` a
;
üüa b
migrationBuilder
°° 
.
°° 

UpdateData
°° '
(
°°' (
table
¢¢ 
:
¢¢ 
$str
¢¢ $
,
¢¢$ %
	keyColumn
££ 
:
££ 
$str
££ 
,
££  
keyValue
§§ 
:
§§ 
$num
§§ 
,
§§ 
column
•• 
:
•• 
$str
•• #
,
••# $
value
¶¶ 
:
¶¶ 
new
¶¶ 
DateTime
¶¶ #
(
¶¶# $
$num
¶¶$ (
,
¶¶( )
$num
¶¶* +
,
¶¶+ ,
$num
¶¶- /
,
¶¶/ 0
$num
¶¶1 3
,
¶¶3 4
$num
¶¶5 7
,
¶¶7 8
$num
¶¶9 :
,
¶¶: ;
$num
¶¶< >
,
¶¶> ?
DateTimeKind
¶¶@ L
.
¶¶L M
Utc
¶¶M P
)
¶¶P Q
.
¶¶Q R
AddTicks
¶¶R Z
(
¶¶Z [
$num
¶¶[ _
)
¶¶_ `
)
¶¶` a
;
¶¶a b
migrationBuilder
®® 
.
®® 

UpdateData
®® '
(
®®' (
table
©© 
:
©© 
$str
©© $
,
©©$ %
	keyColumn
™™ 
:
™™ 
$str
™™ 
,
™™  
keyValue
´´ 
:
´´ 
$num
´´ 
,
´´ 
column
¨¨ 
:
¨¨ 
$str
¨¨ #
,
¨¨# $
value
≠≠ 
:
≠≠ 
new
≠≠ 
DateTime
≠≠ #
(
≠≠# $
$num
≠≠$ (
,
≠≠( )
$num
≠≠* +
,
≠≠+ ,
$num
≠≠- /
,
≠≠/ 0
$num
≠≠1 3
,
≠≠3 4
$num
≠≠5 7
,
≠≠7 8
$num
≠≠9 :
,
≠≠: ;
$num
≠≠< >
,
≠≠> ?
DateTimeKind
≠≠@ L
.
≠≠L M
Utc
≠≠M P
)
≠≠P Q
.
≠≠Q R
AddTicks
≠≠R Z
(
≠≠Z [
$num
≠≠[ _
)
≠≠_ `
)
≠≠` a
;
≠≠a b
migrationBuilder
ØØ 
.
ØØ 

UpdateData
ØØ '
(
ØØ' (
table
∞∞ 
:
∞∞ 
$str
∞∞ $
,
∞∞$ %
	keyColumn
±± 
:
±± 
$str
±± 
,
±±  
keyValue
≤≤ 
:
≤≤ 
$num
≤≤ 
,
≤≤ 
column
≥≥ 
:
≥≥ 
$str
≥≥ #
,
≥≥# $
value
¥¥ 
:
¥¥ 
new
¥¥ 
DateTime
¥¥ #
(
¥¥# $
$num
¥¥$ (
,
¥¥( )
$num
¥¥* +
,
¥¥+ ,
$num
¥¥- /
,
¥¥/ 0
$num
¥¥1 3
,
¥¥3 4
$num
¥¥5 7
,
¥¥7 8
$num
¥¥9 :
,
¥¥: ;
$num
¥¥< >
,
¥¥> ?
DateTimeKind
¥¥@ L
.
¥¥L M
Utc
¥¥M P
)
¥¥P Q
.
¥¥Q R
AddTicks
¥¥R Z
(
¥¥Z [
$num
¥¥[ _
)
¥¥_ `
)
¥¥` a
;
¥¥a b
migrationBuilder
∂∂ 
.
∂∂ 

UpdateData
∂∂ '
(
∂∂' (
table
∑∑ 
:
∑∑ 
$str
∑∑ $
,
∑∑$ %
	keyColumn
∏∏ 
:
∏∏ 
$str
∏∏ 
,
∏∏  
keyValue
ππ 
:
ππ 
$num
ππ 
,
ππ 
column
∫∫ 
:
∫∫ 
$str
∫∫ #
,
∫∫# $
value
ªª 
:
ªª 
new
ªª 
DateTime
ªª #
(
ªª# $
$num
ªª$ (
,
ªª( )
$num
ªª* +
,
ªª+ ,
$num
ªª- /
,
ªª/ 0
$num
ªª1 3
,
ªª3 4
$num
ªª5 7
,
ªª7 8
$num
ªª9 :
,
ªª: ;
$num
ªª< >
,
ªª> ?
DateTimeKind
ªª@ L
.
ªªL M
Utc
ªªM P
)
ªªP Q
.
ªªQ R
AddTicks
ªªR Z
(
ªªZ [
$num
ªª[ _
)
ªª_ `
)
ªª` a
;
ªªa b
migrationBuilder
ΩΩ 
.
ΩΩ 

UpdateData
ΩΩ '
(
ΩΩ' (
table
ææ 
:
ææ 
$str
ææ 
,
ææ 
	keyColumn
øø 
:
øø 
$str
øø 
,
øø  
keyValue
¿¿ 
:
¿¿ 
$num
¿¿ 
,
¿¿ 
columns
¡¡ 
:
¡¡ 
new
¡¡ 
[
¡¡ 
]
¡¡ 
{
¡¡  
$str
¡¡! ,
,
¡¡, -
$str
¡¡. <
}
¡¡= >
,
¡¡> ?
values
¬¬ 
:
¬¬ 
new
¬¬ 
object
¬¬ "
[
¬¬" #
]
¬¬# $
{
¬¬% &
new
¬¬' *
DateTime
¬¬+ 3
(
¬¬3 4
$num
¬¬4 8
,
¬¬8 9
$num
¬¬: ;
,
¬¬; <
$num
¬¬= ?
,
¬¬? @
$num
¬¬A C
,
¬¬C D
$num
¬¬E G
,
¬¬G H
$num
¬¬I J
,
¬¬J K
$num
¬¬L O
,
¬¬O P
DateTimeKind
¬¬Q ]
.
¬¬] ^
Utc
¬¬^ a
)
¬¬a b
.
¬¬b c
AddTicks
¬¬c k
(
¬¬k l
$num
¬¬l p
)
¬¬p q
,
¬¬q r
$str¬¬s ±
}¬¬≤ ≥
)¬¬≥ ¥
;¬¬¥ µ
}
√√ 	
}
ƒƒ 
}≈≈ ≈û
[D:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Migrations\20250915153403_TheThird.cs
	namespace 	

PayrollApi
 
. 

Migrations 
{ 
public		 

partial		 
class		 
TheThird		 !
:		" #
	Migration		$ -
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
DateTime' /
>/ 0
(0 1
name 
: 
$str #
,# $
table 
: 
$str &
,& '
type 
: 
$str #
,# $
nullable 
: 
false 
,  
defaultValue 
: 
new !
DateTime" *
(* +
$num+ ,
,, -
$num. /
,/ 0
$num1 2
,2 3
$num4 5
,5 6
$num7 8
,8 9
$num: ;
,; <
$num= >
,> ?
DateTimeKind@ L
.L M
UnspecifiedM X
)X Y
)Y Z
;Z [
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str $
,$ %
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column 
: 
$str #
,# $
value 
: 
new 
DateTime #
(# $
$num$ (
,( )
$num* +
,+ ,
$num- /
,/ 0
$num1 3
,3 4
$num5 7
,7 8
$num9 :
,: ;
$num< >
,> ?
DateTimeKind@ L
.L M
UtcM P
)P Q
.Q R
AddTicksR Z
(Z [
$num[ _
)_ `
)` a
;a b
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str $
,$ %
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column   
:   
$str   #
,  # $
value!! 
:!! 
new!! 
DateTime!! #
(!!# $
$num!!$ (
,!!( )
$num!!* +
,!!+ ,
$num!!- /
,!!/ 0
$num!!1 3
,!!3 4
$num!!5 7
,!!7 8
$num!!9 :
,!!: ;
$num!!< >
,!!> ?
DateTimeKind!!@ L
.!!L M
Utc!!M P
)!!P Q
.!!Q R
AddTicks!!R Z
(!!Z [
$num!![ _
)!!_ `
)!!` a
;!!a b
migrationBuilder## 
.## 

UpdateData## '
(##' (
table$$ 
:$$ 
$str$$ $
,$$$ %
	keyColumn%% 
:%% 
$str%% 
,%%  
keyValue&& 
:&& 
$num&& 
,&& 
column'' 
:'' 
$str'' #
,''# $
value(( 
:(( 
new(( 
DateTime(( #
(((# $
$num(($ (
,((( )
$num((* +
,((+ ,
$num((- /
,((/ 0
$num((1 3
,((3 4
$num((5 7
,((7 8
$num((9 :
,((: ;
$num((< >
,((> ?
DateTimeKind((@ L
.((L M
Utc((M P
)((P Q
.((Q R
AddTicks((R Z
(((Z [
$num(([ _
)((_ `
)((` a
;((a b
migrationBuilder** 
.** 

UpdateData** '
(**' (
table++ 
:++ 
$str++ $
,++$ %
	keyColumn,, 
:,, 
$str,, 
,,,  
keyValue-- 
:-- 
$num-- 
,-- 
column.. 
:.. 
$str.. #
,..# $
value// 
:// 
new// 
DateTime// #
(//# $
$num//$ (
,//( )
$num//* +
,//+ ,
$num//- /
,/// 0
$num//1 3
,//3 4
$num//5 7
,//7 8
$num//9 :
,//: ;
$num//< >
,//> ?
DateTimeKind//@ L
.//L M
Utc//M P
)//P Q
.//Q R
AddTicks//R Z
(//Z [
$num//[ _
)//_ `
)//` a
;//a b
migrationBuilder11 
.11 

UpdateData11 '
(11' (
table22 
:22 
$str22 $
,22$ %
	keyColumn33 
:33 
$str33 
,33  
keyValue44 
:44 
$num44 
,44 
column55 
:55 
$str55 #
,55# $
value66 
:66 
new66 
DateTime66 #
(66# $
$num66$ (
,66( )
$num66* +
,66+ ,
$num66- /
,66/ 0
$num661 3
,663 4
$num665 7
,667 8
$num669 :
,66: ;
$num66< >
,66> ?
DateTimeKind66@ L
.66L M
Utc66M P
)66P Q
.66Q R
AddTicks66R Z
(66Z [
$num66[ _
)66_ `
)66` a
;66a b
migrationBuilder88 
.88 

UpdateData88 '
(88' (
table99 
:99 
$str99 $
,99$ %
	keyColumn:: 
::: 
$str:: 
,::  
keyValue;; 
:;; 
$num;; 
,;; 
column<< 
:<< 
$str<< #
,<<# $
value== 
:== 
new== 
DateTime== #
(==# $
$num==$ (
,==( )
$num==* +
,==+ ,
$num==- /
,==/ 0
$num==1 3
,==3 4
$num==5 7
,==7 8
$num==9 :
,==: ;
$num==< >
,==> ?
DateTimeKind==@ L
.==L M
Utc==M P
)==P Q
.==Q R
AddTicks==R Z
(==Z [
$num==[ _
)==_ `
)==` a
;==a b
migrationBuilder?? 
.?? 

UpdateData?? '
(??' (
table@@ 
:@@ 
$str@@ $
,@@$ %
	keyColumnAA 
:AA 
$strAA 
,AA  
keyValueBB 
:BB 
$numBB 
,BB 
columnCC 
:CC 
$strCC #
,CC# $
valueDD 
:DD 
newDD 
DateTimeDD #
(DD# $
$numDD$ (
,DD( )
$numDD* +
,DD+ ,
$numDD- /
,DD/ 0
$numDD1 3
,DD3 4
$numDD5 7
,DD7 8
$numDD9 :
,DD: ;
$numDD< >
,DD> ?
DateTimeKindDD@ L
.DDL M
UtcDDM P
)DDP Q
.DDQ R
AddTicksDDR Z
(DDZ [
$numDD[ _
)DD_ `
)DD` a
;DDa b
migrationBuilderFF 
.FF 

UpdateDataFF '
(FF' (
tableGG 
:GG 
$strGG $
,GG$ %
	keyColumnHH 
:HH 
$strHH 
,HH  
keyValueII 
:II 
$numII 
,II 
columnJJ 
:JJ 
$strJJ #
,JJ# $
valueKK 
:KK 
newKK 
DateTimeKK #
(KK# $
$numKK$ (
,KK( )
$numKK* +
,KK+ ,
$numKK- /
,KK/ 0
$numKK1 3
,KK3 4
$numKK5 7
,KK7 8
$numKK9 :
,KK: ;
$numKK< >
,KK> ?
DateTimeKindKK@ L
.KKL M
UtcKKM P
)KKP Q
.KKQ R
AddTicksKKR Z
(KKZ [
$numKK[ _
)KK_ `
)KK` a
;KKa b
migrationBuilderMM 
.MM 

UpdateDataMM '
(MM' (
tableNN 
:NN 
$strNN $
,NN$ %
	keyColumnOO 
:OO 
$strOO 
,OO  
keyValuePP 
:PP 
$numPP 
,PP 
columnQQ 
:QQ 
$strQQ #
,QQ# $
valueRR 
:RR 
newRR 
DateTimeRR #
(RR# $
$numRR$ (
,RR( )
$numRR* +
,RR+ ,
$numRR- /
,RR/ 0
$numRR1 3
,RR3 4
$numRR5 7
,RR7 8
$numRR9 :
,RR: ;
$numRR< >
,RR> ?
DateTimeKindRR@ L
.RRL M
UtcRRM P
)RRP Q
.RRQ R
AddTicksRRR Z
(RRZ [
$numRR[ _
)RR_ `
)RR` a
;RRa b
migrationBuilderTT 
.TT 

UpdateDataTT '
(TT' (
tableUU 
:UU 
$strUU 
,UU 
	keyColumnVV 
:VV 
$strVV 
,VV  
keyValueWW 
:WW 
$numWW 
,WW 
columnsXX 
:XX 
newXX 
[XX 
]XX 
{XX  
$strXX! ,
,XX, -
$strXX. <
}XX= >
,XX> ?
valuesYY 
:YY 
newYY 
objectYY "
[YY" #
]YY# $
{YY% &
newYY' *
DateTimeYY+ 3
(YY3 4
$numYY4 8
,YY8 9
$numYY: ;
,YY; <
$numYY= ?
,YY? @
$numYYA C
,YYC D
$numYYE G
,YYG H
$numYYI J
,YYJ K
$numYYL O
,YYO P
DateTimeKindYYQ ]
.YY] ^
UtcYY^ a
)YYa b
.YYb c
AddTicksYYc k
(YYk l
$numYYl p
)YYp q
,YYq r
$str	YYs ±
}
YY≤ ≥
)
YY≥ ¥
;
YY¥ µ
}ZZ 	
	protected]] 
override]] 
void]] 
Down]]  $
(]]$ %
MigrationBuilder]]% 5
migrationBuilder]]6 F
)]]F G
{^^ 	
migrationBuilder__ 
.__ 

DropColumn__ '
(__' (
name`` 
:`` 
$str`` #
,``# $
tableaa 
:aa 
$straa &
)aa& '
;aa' (
migrationBuildercc 
.cc 

UpdateDatacc '
(cc' (
tabledd 
:dd 
$strdd $
,dd$ %
	keyColumnee 
:ee 
$stree 
,ee  
keyValueff 
:ff 
$numff 
,ff 
columngg 
:gg 
$strgg #
,gg# $
valuehh 
:hh 
newhh 
DateTimehh #
(hh# $
$numhh$ (
,hh( )
$numhh* +
,hh+ ,
$numhh- /
,hh/ 0
$numhh1 3
,hh3 4
$numhh5 7
,hh7 8
$numhh9 ;
,hh; <
$numhh= @
,hh@ A
DateTimeKindhhB N
.hhN O
UtchhO R
)hhR S
.hhS T
AddTickshhT \
(hh\ ]
$numhh] a
)hha b
)hhb c
;hhc d
migrationBuilderjj 
.jj 

UpdateDatajj '
(jj' (
tablekk 
:kk 
$strkk $
,kk$ %
	keyColumnll 
:ll 
$strll 
,ll  
keyValuemm 
:mm 
$nummm 
,mm 
columnnn 
:nn 
$strnn #
,nn# $
valueoo 
:oo 
newoo 
DateTimeoo #
(oo# $
$numoo$ (
,oo( )
$numoo* +
,oo+ ,
$numoo- /
,oo/ 0
$numoo1 3
,oo3 4
$numoo5 7
,oo7 8
$numoo9 ;
,oo; <
$numoo= @
,oo@ A
DateTimeKindooB N
.ooN O
UtcooO R
)ooR S
.ooS T
AddTicksooT \
(oo\ ]
$numoo] a
)ooa b
)oob c
;ooc d
migrationBuilderqq 
.qq 

UpdateDataqq '
(qq' (
tablerr 
:rr 
$strrr $
,rr$ %
	keyColumnss 
:ss 
$strss 
,ss  
keyValuett 
:tt 
$numtt 
,tt 
columnuu 
:uu 
$struu #
,uu# $
valuevv 
:vv 
newvv 
DateTimevv #
(vv# $
$numvv$ (
,vv( )
$numvv* +
,vv+ ,
$numvv- /
,vv/ 0
$numvv1 3
,vv3 4
$numvv5 7
,vv7 8
$numvv9 ;
,vv; <
$numvv= @
,vv@ A
DateTimeKindvvB N
.vvN O
UtcvvO R
)vvR S
.vvS T
AddTicksvvT \
(vv\ ]
$numvv] a
)vva b
)vvb c
;vvc d
migrationBuilderxx 
.xx 

UpdateDataxx '
(xx' (
tableyy 
:yy 
$stryy $
,yy$ %
	keyColumnzz 
:zz 
$strzz 
,zz  
keyValue{{ 
:{{ 
$num{{ 
,{{ 
column|| 
:|| 
$str|| #
,||# $
value}} 
:}} 
new}} 
DateTime}} #
(}}# $
$num}}$ (
,}}( )
$num}}* +
,}}+ ,
$num}}- /
,}}/ 0
$num}}1 3
,}}3 4
$num}}5 7
,}}7 8
$num}}9 ;
,}}; <
$num}}= @
,}}@ A
DateTimeKind}}B N
.}}N O
Utc}}O R
)}}R S
.}}S T
AddTicks}}T \
(}}\ ]
$num}}] a
)}}a b
)}}b c
;}}c d
migrationBuilder 
. 

UpdateData '
(' (
table
ÄÄ 
:
ÄÄ 
$str
ÄÄ $
,
ÄÄ$ %
	keyColumn
ÅÅ 
:
ÅÅ 
$str
ÅÅ 
,
ÅÅ  
keyValue
ÇÇ 
:
ÇÇ 
$num
ÇÇ 
,
ÇÇ 
column
ÉÉ 
:
ÉÉ 
$str
ÉÉ #
,
ÉÉ# $
value
ÑÑ 
:
ÑÑ 
new
ÑÑ 
DateTime
ÑÑ #
(
ÑÑ# $
$num
ÑÑ$ (
,
ÑÑ( )
$num
ÑÑ* +
,
ÑÑ+ ,
$num
ÑÑ- /
,
ÑÑ/ 0
$num
ÑÑ1 3
,
ÑÑ3 4
$num
ÑÑ5 7
,
ÑÑ7 8
$num
ÑÑ9 ;
,
ÑÑ; <
$num
ÑÑ= @
,
ÑÑ@ A
DateTimeKind
ÑÑB N
.
ÑÑN O
Utc
ÑÑO R
)
ÑÑR S
.
ÑÑS T
AddTicks
ÑÑT \
(
ÑÑ\ ]
$num
ÑÑ] a
)
ÑÑa b
)
ÑÑb c
;
ÑÑc d
migrationBuilder
ÜÜ 
.
ÜÜ 

UpdateData
ÜÜ '
(
ÜÜ' (
table
áá 
:
áá 
$str
áá $
,
áá$ %
	keyColumn
àà 
:
àà 
$str
àà 
,
àà  
keyValue
ââ 
:
ââ 
$num
ââ 
,
ââ 
column
ää 
:
ää 
$str
ää #
,
ää# $
value
ãã 
:
ãã 
new
ãã 
DateTime
ãã #
(
ãã# $
$num
ãã$ (
,
ãã( )
$num
ãã* +
,
ãã+ ,
$num
ãã- /
,
ãã/ 0
$num
ãã1 3
,
ãã3 4
$num
ãã5 7
,
ãã7 8
$num
ãã9 ;
,
ãã; <
$num
ãã= @
,
ãã@ A
DateTimeKind
ããB N
.
ããN O
Utc
ããO R
)
ããR S
.
ããS T
AddTicks
ããT \
(
ãã\ ]
$num
ãã] a
)
ããa b
)
ããb c
;
ããc d
migrationBuilder
çç 
.
çç 

UpdateData
çç '
(
çç' (
table
éé 
:
éé 
$str
éé $
,
éé$ %
	keyColumn
èè 
:
èè 
$str
èè 
,
èè  
keyValue
êê 
:
êê 
$num
êê 
,
êê 
column
ëë 
:
ëë 
$str
ëë #
,
ëë# $
value
íí 
:
íí 
new
íí 
DateTime
íí #
(
íí# $
$num
íí$ (
,
íí( )
$num
íí* +
,
íí+ ,
$num
íí- /
,
íí/ 0
$num
íí1 3
,
íí3 4
$num
íí5 7
,
íí7 8
$num
íí9 ;
,
íí; <
$num
íí= @
,
íí@ A
DateTimeKind
ííB N
.
ííN O
Utc
ííO R
)
ííR S
.
ííS T
AddTicks
ííT \
(
íí\ ]
$num
íí] a
)
íía b
)
ííb c
;
ííc d
migrationBuilder
îî 
.
îî 

UpdateData
îî '
(
îî' (
table
ïï 
:
ïï 
$str
ïï $
,
ïï$ %
	keyColumn
ññ 
:
ññ 
$str
ññ 
,
ññ  
keyValue
óó 
:
óó 
$num
óó 
,
óó 
column
òò 
:
òò 
$str
òò #
,
òò# $
value
ôô 
:
ôô 
new
ôô 
DateTime
ôô #
(
ôô# $
$num
ôô$ (
,
ôô( )
$num
ôô* +
,
ôô+ ,
$num
ôô- /
,
ôô/ 0
$num
ôô1 3
,
ôô3 4
$num
ôô5 7
,
ôô7 8
$num
ôô9 ;
,
ôô; <
$num
ôô= @
,
ôô@ A
DateTimeKind
ôôB N
.
ôôN O
Utc
ôôO R
)
ôôR S
.
ôôS T
AddTicks
ôôT \
(
ôô\ ]
$num
ôô] a
)
ôôa b
)
ôôb c
;
ôôc d
migrationBuilder
õõ 
.
õõ 

UpdateData
õõ '
(
õõ' (
table
úú 
:
úú 
$str
úú $
,
úú$ %
	keyColumn
ùù 
:
ùù 
$str
ùù 
,
ùù  
keyValue
ûû 
:
ûû 
$num
ûû 
,
ûû 
column
üü 
:
üü 
$str
üü #
,
üü# $
value
†† 
:
†† 
new
†† 
DateTime
†† #
(
††# $
$num
††$ (
,
††( )
$num
††* +
,
††+ ,
$num
††- /
,
††/ 0
$num
††1 3
,
††3 4
$num
††5 7
,
††7 8
$num
††9 ;
,
††; <
$num
††= @
,
††@ A
DateTimeKind
††B N
.
††N O
Utc
††O R
)
††R S
.
††S T
AddTicks
††T \
(
††\ ]
$num
††] a
)
††a b
)
††b c
;
††c d
migrationBuilder
¢¢ 
.
¢¢ 

UpdateData
¢¢ '
(
¢¢' (
table
££ 
:
££ 
$str
££ 
,
££ 
	keyColumn
§§ 
:
§§ 
$str
§§ 
,
§§  
keyValue
•• 
:
•• 
$num
•• 
,
•• 
columns
¶¶ 
:
¶¶ 
new
¶¶ 
[
¶¶ 
]
¶¶ 
{
¶¶  
$str
¶¶! ,
,
¶¶, -
$str
¶¶. <
}
¶¶= >
,
¶¶> ?
values
ßß 
:
ßß 
new
ßß 
object
ßß "
[
ßß" #
]
ßß# $
{
ßß% &
new
ßß' *
DateTime
ßß+ 3
(
ßß3 4
$num
ßß4 8
,
ßß8 9
$num
ßß: ;
,
ßß; <
$num
ßß= ?
,
ßß? @
$num
ßßA C
,
ßßC D
$num
ßßE G
,
ßßG H
$num
ßßI K
,
ßßK L
$num
ßßM P
,
ßßP Q
DateTimeKind
ßßR ^
.
ßß^ _
Utc
ßß_ b
)
ßßb c
.
ßßc d
AddTicks
ßßd l
(
ßßl m
$num
ßßm q
)
ßßq r
,
ßßr s
$strßßt ≤
}ßß≥ ¥
)ßß¥ µ
;ßßµ ∂
}
®® 	
}
©© 
}™™ Ëõ
\D:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Migrations\20250914212845_TheSecond.cs
	namespace 	

PayrollApi
 
. 

Migrations 
{ 
public		 

partial		 
class		 
	TheSecond		 "
:		# $
	Migration		% .
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str "
," #
table 
: 
$str !
)! "
;" #
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str $
,$ %
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column 
: 
$str #
,# $
value 
: 
new 
DateTime #
(# $
$num$ (
,( )
$num* +
,+ ,
$num- /
,/ 0
$num1 3
,3 4
$num5 7
,7 8
$num9 ;
,; <
$num= @
,@ A
DateTimeKindB N
.N O
UtcO R
)R S
.S T
AddTicksT \
(\ ]
$num] a
)a b
)b c
;c d
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str $
,$ %
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column 
: 
$str #
,# $
value 
: 
new 
DateTime #
(# $
$num$ (
,( )
$num* +
,+ ,
$num- /
,/ 0
$num1 3
,3 4
$num5 7
,7 8
$num9 ;
,; <
$num= @
,@ A
DateTimeKindB N
.N O
UtcO R
)R S
.S T
AddTicksT \
(\ ]
$num] a
)a b
)b c
;c d
migrationBuilder   
.   

UpdateData   '
(  ' (
table!! 
:!! 
$str!! $
,!!$ %
	keyColumn"" 
:"" 
$str"" 
,""  
keyValue## 
:## 
$num## 
,## 
column$$ 
:$$ 
$str$$ #
,$$# $
value%% 
:%% 
new%% 
DateTime%% #
(%%# $
$num%%$ (
,%%( )
$num%%* +
,%%+ ,
$num%%- /
,%%/ 0
$num%%1 3
,%%3 4
$num%%5 7
,%%7 8
$num%%9 ;
,%%; <
$num%%= @
,%%@ A
DateTimeKind%%B N
.%%N O
Utc%%O R
)%%R S
.%%S T
AddTicks%%T \
(%%\ ]
$num%%] a
)%%a b
)%%b c
;%%c d
migrationBuilder'' 
.'' 

UpdateData'' '
(''' (
table(( 
:(( 
$str(( $
,(($ %
	keyColumn)) 
:)) 
$str)) 
,))  
keyValue** 
:** 
$num** 
,** 
column++ 
:++ 
$str++ #
,++# $
value,, 
:,, 
new,, 
DateTime,, #
(,,# $
$num,,$ (
,,,( )
$num,,* +
,,,+ ,
$num,,- /
,,,/ 0
$num,,1 3
,,,3 4
$num,,5 7
,,,7 8
$num,,9 ;
,,,; <
$num,,= @
,,,@ A
DateTimeKind,,B N
.,,N O
Utc,,O R
),,R S
.,,S T
AddTicks,,T \
(,,\ ]
$num,,] a
),,a b
),,b c
;,,c d
migrationBuilder.. 
... 

UpdateData.. '
(..' (
table// 
:// 
$str// $
,//$ %
	keyColumn00 
:00 
$str00 
,00  
keyValue11 
:11 
$num11 
,11 
column22 
:22 
$str22 #
,22# $
value33 
:33 
new33 
DateTime33 #
(33# $
$num33$ (
,33( )
$num33* +
,33+ ,
$num33- /
,33/ 0
$num331 3
,333 4
$num335 7
,337 8
$num339 ;
,33; <
$num33= @
,33@ A
DateTimeKind33B N
.33N O
Utc33O R
)33R S
.33S T
AddTicks33T \
(33\ ]
$num33] a
)33a b
)33b c
;33c d
migrationBuilder55 
.55 

UpdateData55 '
(55' (
table66 
:66 
$str66 $
,66$ %
	keyColumn77 
:77 
$str77 
,77  
keyValue88 
:88 
$num88 
,88 
column99 
:99 
$str99 #
,99# $
value:: 
::: 
new:: 
DateTime:: #
(::# $
$num::$ (
,::( )
$num::* +
,::+ ,
$num::- /
,::/ 0
$num::1 3
,::3 4
$num::5 7
,::7 8
$num::9 ;
,::; <
$num::= @
,::@ A
DateTimeKind::B N
.::N O
Utc::O R
)::R S
.::S T
AddTicks::T \
(::\ ]
$num::] a
)::a b
)::b c
;::c d
migrationBuilder<< 
.<< 

UpdateData<< '
(<<' (
table== 
:== 
$str== $
,==$ %
	keyColumn>> 
:>> 
$str>> 
,>>  
keyValue?? 
:?? 
$num?? 
,?? 
column@@ 
:@@ 
$str@@ #
,@@# $
valueAA 
:AA 
newAA 
DateTimeAA #
(AA# $
$numAA$ (
,AA( )
$numAA* +
,AA+ ,
$numAA- /
,AA/ 0
$numAA1 3
,AA3 4
$numAA5 7
,AA7 8
$numAA9 ;
,AA; <
$numAA= @
,AA@ A
DateTimeKindAAB N
.AAN O
UtcAAO R
)AAR S
.AAS T
AddTicksAAT \
(AA\ ]
$numAA] a
)AAa b
)AAb c
;AAc d
migrationBuilderCC 
.CC 

UpdateDataCC '
(CC' (
tableDD 
:DD 
$strDD $
,DD$ %
	keyColumnEE 
:EE 
$strEE 
,EE  
keyValueFF 
:FF 
$numFF 
,FF 
columnGG 
:GG 
$strGG #
,GG# $
valueHH 
:HH 
newHH 
DateTimeHH #
(HH# $
$numHH$ (
,HH( )
$numHH* +
,HH+ ,
$numHH- /
,HH/ 0
$numHH1 3
,HH3 4
$numHH5 7
,HH7 8
$numHH9 ;
,HH; <
$numHH= @
,HH@ A
DateTimeKindHHB N
.HHN O
UtcHHO R
)HHR S
.HHS T
AddTicksHHT \
(HH\ ]
$numHH] a
)HHa b
)HHb c
;HHc d
migrationBuilderJJ 
.JJ 

UpdateDataJJ '
(JJ' (
tableKK 
:KK 
$strKK $
,KK$ %
	keyColumnLL 
:LL 
$strLL 
,LL  
keyValueMM 
:MM 
$numMM 
,MM 
columnNN 
:NN 
$strNN #
,NN# $
valueOO 
:OO 
newOO 
DateTimeOO #
(OO# $
$numOO$ (
,OO( )
$numOO* +
,OO+ ,
$numOO- /
,OO/ 0
$numOO1 3
,OO3 4
$numOO5 7
,OO7 8
$numOO9 ;
,OO; <
$numOO= @
,OO@ A
DateTimeKindOOB N
.OON O
UtcOOO R
)OOR S
.OOS T
AddTicksOOT \
(OO\ ]
$numOO] a
)OOa b
)OOb c
;OOc d
migrationBuilderQQ 
.QQ 

UpdateDataQQ '
(QQ' (
tableRR 
:RR 
$strRR 
,RR 
	keyColumnSS 
:SS 
$strSS 
,SS  
keyValueTT 
:TT 
$numTT 
,TT 
columnsUU 
:UU 
newUU 
[UU 
]UU 
{UU  
$strUU! ,
,UU, -
$strUU. <
}UU= >
,UU> ?
valuesVV 
:VV 
newVV 
objectVV "
[VV" #
]VV# $
{VV% &
newVV' *
DateTimeVV+ 3
(VV3 4
$numVV4 8
,VV8 9
$numVV: ;
,VV; <
$numVV= ?
,VV? @
$numVVA C
,VVC D
$numVVE G
,VVG H
$numVVI K
,VVK L
$numVVM P
,VVP Q
DateTimeKindVVR ^
.VV^ _
UtcVV_ b
)VVb c
.VVc d
AddTicksVVd l
(VVl m
$numVVm q
)VVq r
,VVr s
$str	VVt ≤
}
VV≥ ¥
)
VV¥ µ
;
VVµ ∂
}WW 	
	protectedZZ 
overrideZZ 
voidZZ 
DownZZ  $
(ZZ$ %
MigrationBuilderZZ% 5
migrationBuilderZZ6 F
)ZZF G
{[[ 	
migrationBuilder\\ 
.\\ 
	AddColumn\\ &
<\\& '
bool\\' +
>\\+ ,
(\\, -
name]] 
:]] 
$str]] "
,]]" #
table^^ 
:^^ 
$str^^ !
,^^! "
type__ 
:__ 
$str__ "
,__" #
nullable`` 
:`` 
false`` 
,``  
defaultValueaa 
:aa 
falseaa #
)aa# $
;aa$ %
migrationBuildercc 
.cc 

UpdateDatacc '
(cc' (
tabledd 
:dd 
$strdd $
,dd$ %
	keyColumnee 
:ee 
$stree 
,ee  
keyValueff 
:ff 
$numff 
,ff 
columngg 
:gg 
$strgg #
,gg# $
valuehh 
:hh 
newhh 
DateTimehh #
(hh# $
$numhh$ (
,hh( )
$numhh* +
,hh+ ,
$numhh- /
,hh/ 0
$numhh1 3
,hh3 4
$numhh5 7
,hh7 8
$numhh9 ;
,hh; <
$numhh= @
,hh@ A
DateTimeKindhhB N
.hhN O
UtchhO R
)hhR S
.hhS T
AddTickshhT \
(hh\ ]
$numhh] a
)hha b
)hhb c
;hhc d
migrationBuilderjj 
.jj 

UpdateDatajj '
(jj' (
tablekk 
:kk 
$strkk $
,kk$ %
	keyColumnll 
:ll 
$strll 
,ll  
keyValuemm 
:mm 
$nummm 
,mm 
columnnn 
:nn 
$strnn #
,nn# $
valueoo 
:oo 
newoo 
DateTimeoo #
(oo# $
$numoo$ (
,oo( )
$numoo* +
,oo+ ,
$numoo- /
,oo/ 0
$numoo1 3
,oo3 4
$numoo5 7
,oo7 8
$numoo9 ;
,oo; <
$numoo= @
,oo@ A
DateTimeKindooB N
.ooN O
UtcooO R
)ooR S
.ooS T
AddTicksooT \
(oo\ ]
$numoo] a
)ooa b
)oob c
;ooc d
migrationBuilderqq 
.qq 

UpdateDataqq '
(qq' (
tablerr 
:rr 
$strrr $
,rr$ %
	keyColumnss 
:ss 
$strss 
,ss  
keyValuett 
:tt 
$numtt 
,tt 
columnuu 
:uu 
$struu #
,uu# $
valuevv 
:vv 
newvv 
DateTimevv #
(vv# $
$numvv$ (
,vv( )
$numvv* +
,vv+ ,
$numvv- /
,vv/ 0
$numvv1 3
,vv3 4
$numvv5 7
,vv7 8
$numvv9 ;
,vv; <
$numvv= @
,vv@ A
DateTimeKindvvB N
.vvN O
UtcvvO R
)vvR S
.vvS T
AddTicksvvT \
(vv\ ]
$numvv] a
)vva b
)vvb c
;vvc d
migrationBuilderxx 
.xx 

UpdateDataxx '
(xx' (
tableyy 
:yy 
$stryy $
,yy$ %
	keyColumnzz 
:zz 
$strzz 
,zz  
keyValue{{ 
:{{ 
$num{{ 
,{{ 
column|| 
:|| 
$str|| #
,||# $
value}} 
:}} 
new}} 
DateTime}} #
(}}# $
$num}}$ (
,}}( )
$num}}* +
,}}+ ,
$num}}- /
,}}/ 0
$num}}1 3
,}}3 4
$num}}5 7
,}}7 8
$num}}9 ;
,}}; <
$num}}= @
,}}@ A
DateTimeKind}}B N
.}}N O
Utc}}O R
)}}R S
.}}S T
AddTicks}}T \
(}}\ ]
$num}}] a
)}}a b
)}}b c
;}}c d
migrationBuilder 
. 

UpdateData '
(' (
table
ÄÄ 
:
ÄÄ 
$str
ÄÄ $
,
ÄÄ$ %
	keyColumn
ÅÅ 
:
ÅÅ 
$str
ÅÅ 
,
ÅÅ  
keyValue
ÇÇ 
:
ÇÇ 
$num
ÇÇ 
,
ÇÇ 
column
ÉÉ 
:
ÉÉ 
$str
ÉÉ #
,
ÉÉ# $
value
ÑÑ 
:
ÑÑ 
new
ÑÑ 
DateTime
ÑÑ #
(
ÑÑ# $
$num
ÑÑ$ (
,
ÑÑ( )
$num
ÑÑ* +
,
ÑÑ+ ,
$num
ÑÑ- /
,
ÑÑ/ 0
$num
ÑÑ1 3
,
ÑÑ3 4
$num
ÑÑ5 7
,
ÑÑ7 8
$num
ÑÑ9 ;
,
ÑÑ; <
$num
ÑÑ= @
,
ÑÑ@ A
DateTimeKind
ÑÑB N
.
ÑÑN O
Utc
ÑÑO R
)
ÑÑR S
.
ÑÑS T
AddTicks
ÑÑT \
(
ÑÑ\ ]
$num
ÑÑ] a
)
ÑÑa b
)
ÑÑb c
;
ÑÑc d
migrationBuilder
ÜÜ 
.
ÜÜ 

UpdateData
ÜÜ '
(
ÜÜ' (
table
áá 
:
áá 
$str
áá $
,
áá$ %
	keyColumn
àà 
:
àà 
$str
àà 
,
àà  
keyValue
ââ 
:
ââ 
$num
ââ 
,
ââ 
column
ää 
:
ää 
$str
ää #
,
ää# $
value
ãã 
:
ãã 
new
ãã 
DateTime
ãã #
(
ãã# $
$num
ãã$ (
,
ãã( )
$num
ãã* +
,
ãã+ ,
$num
ãã- /
,
ãã/ 0
$num
ãã1 3
,
ãã3 4
$num
ãã5 7
,
ãã7 8
$num
ãã9 ;
,
ãã; <
$num
ãã= @
,
ãã@ A
DateTimeKind
ããB N
.
ããN O
Utc
ããO R
)
ããR S
.
ããS T
AddTicks
ããT \
(
ãã\ ]
$num
ãã] a
)
ããa b
)
ããb c
;
ããc d
migrationBuilder
çç 
.
çç 

UpdateData
çç '
(
çç' (
table
éé 
:
éé 
$str
éé $
,
éé$ %
	keyColumn
èè 
:
èè 
$str
èè 
,
èè  
keyValue
êê 
:
êê 
$num
êê 
,
êê 
column
ëë 
:
ëë 
$str
ëë #
,
ëë# $
value
íí 
:
íí 
new
íí 
DateTime
íí #
(
íí# $
$num
íí$ (
,
íí( )
$num
íí* +
,
íí+ ,
$num
íí- /
,
íí/ 0
$num
íí1 3
,
íí3 4
$num
íí5 7
,
íí7 8
$num
íí9 ;
,
íí; <
$num
íí= @
,
íí@ A
DateTimeKind
ííB N
.
ííN O
Utc
ííO R
)
ííR S
.
ííS T
AddTicks
ííT \
(
íí\ ]
$num
íí] a
)
íía b
)
ííb c
;
ííc d
migrationBuilder
îî 
.
îî 

UpdateData
îî '
(
îî' (
table
ïï 
:
ïï 
$str
ïï $
,
ïï$ %
	keyColumn
ññ 
:
ññ 
$str
ññ 
,
ññ  
keyValue
óó 
:
óó 
$num
óó 
,
óó 
column
òò 
:
òò 
$str
òò #
,
òò# $
value
ôô 
:
ôô 
new
ôô 
DateTime
ôô #
(
ôô# $
$num
ôô$ (
,
ôô( )
$num
ôô* +
,
ôô+ ,
$num
ôô- /
,
ôô/ 0
$num
ôô1 3
,
ôô3 4
$num
ôô5 7
,
ôô7 8
$num
ôô9 ;
,
ôô; <
$num
ôô= @
,
ôô@ A
DateTimeKind
ôôB N
.
ôôN O
Utc
ôôO R
)
ôôR S
.
ôôS T
AddTicks
ôôT \
(
ôô\ ]
$num
ôô] a
)
ôôa b
)
ôôb c
;
ôôc d
migrationBuilder
õõ 
.
õõ 

UpdateData
õõ '
(
õõ' (
table
úú 
:
úú 
$str
úú $
,
úú$ %
	keyColumn
ùù 
:
ùù 
$str
ùù 
,
ùù  
keyValue
ûû 
:
ûû 
$num
ûû 
,
ûû 
column
üü 
:
üü 
$str
üü #
,
üü# $
value
†† 
:
†† 
new
†† 
DateTime
†† #
(
††# $
$num
††$ (
,
††( )
$num
††* +
,
††+ ,
$num
††- /
,
††/ 0
$num
††1 3
,
††3 4
$num
††5 7
,
††7 8
$num
††9 ;
,
††; <
$num
††= @
,
††@ A
DateTimeKind
††B N
.
††N O
Utc
††O R
)
††R S
.
††S T
AddTicks
††T \
(
††\ ]
$num
††] a
)
††a b
)
††b c
;
††c d
migrationBuilder
¢¢ 
.
¢¢ 

UpdateData
¢¢ '
(
¢¢' (
table
££ 
:
££ 
$str
££ 
,
££ 
	keyColumn
§§ 
:
§§ 
$str
§§ 
,
§§  
keyValue
•• 
:
•• 
$num
•• 
,
•• 
columns
¶¶ 
:
¶¶ 
new
¶¶ 
[
¶¶ 
]
¶¶ 
{
¶¶  
$str
¶¶! ,
,
¶¶, -
$str
¶¶. <
}
¶¶= >
,
¶¶> ?
values
ßß 
:
ßß 
new
ßß 
object
ßß "
[
ßß" #
]
ßß# $
{
ßß% &
new
ßß' *
DateTime
ßß+ 3
(
ßß3 4
$num
ßß4 8
,
ßß8 9
$num
ßß: ;
,
ßß; <
$num
ßß= ?
,
ßß? @
$num
ßßA C
,
ßßC D
$num
ßßE G
,
ßßG H
$num
ßßI K
,
ßßK L
$num
ßßM P
,
ßßP Q
DateTimeKind
ßßR ^
.
ßß^ _
Utc
ßß_ b
)
ßßb c
.
ßßc d
AddTicks
ßßd l
(
ßßl m
$num
ßßm p
)
ßßp q
,
ßßq r
$strßßs ±
}ßß≤ ≥
)ßß≥ ¥
;ßß¥ µ
}
®® 	
}
©© 
}™™ ›˚
[D:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Migrations\20250914104425_TheFirst.cs
	namespace		 	

PayrollApi		
 
.		 

Migrations		 
{

 
public 

partial 
class 
TheFirst !
:" #
	Migration$ -
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
AlterDatabase *
(* +
)+ ,
. 

Annotation 
( 
$str +
,+ ,
$str- 6
)6 7
;7 8
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str !
,! "
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ C
,C D(
MySqlValueGenerationStrategyE a
.a b
IdentityColumnb p
)p q
,q r

EntityType 
=  
table! &
.& '
Column' -
<- .
string. 4
>4 5
(5 6
type6 :
:: ;
$str< F
,F G
nullableH P
:P Q
falseR W
)W X
. 

Annotation #
(# $
$str$ 3
,3 4
$str5 >
)> ?
,? @
EntityId 
= 
table $
.$ %
Column% +
<+ ,
int, /
>/ 0
(0 1
type1 5
:5 6
$str7 <
,< =
nullable> F
:F G
trueH L
)L M
,M N
Action 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 B
,B C
nullableD L
:L M
falseN S
)S T
. 

Annotation #
(# $
$str$ 3
,3 4
$str5 >
)> ?
,? @
PerformedBy 
=  !
table" '
.' (
Column( .
<. /
string/ 5
>5 6
(6 7
type7 ;
:; <
$str= G
,G H
nullableI Q
:Q R
trueS W
)W X
.   

Annotation   #
(  # $
$str  $ 3
,  3 4
$str  5 >
)  > ?
,  ? @
PerformedById!! !
=!!" #
table!!$ )
.!!) *
Column!!* 0
<!!0 1
int!!1 4
>!!4 5
(!!5 6
type!!6 :
:!!: ;
$str!!< A
,!!A B
nullable!!C K
:!!K L
true!!M Q
)!!Q R
,!!R S
PerformedAt"" 
=""  !
table""" '
.""' (
Column""( .
<"". /
DateTime""/ 7
>""7 8
(""8 9
type""9 =
:""= >
$str""? L
,""L M
nullable""N V
:""V W
false""X ]
)""] ^
,""^ _
Details## 
=## 
table## #
.### $
Column##$ *
<##* +
string##+ 1
>##1 2
(##2 3
type##3 7
:##7 8
$str##9 C
,##C D
nullable##E M
:##M N
true##O S
)##S T
.$$ 

Annotation$$ #
($$# $
$str$$$ 3
,$$3 4
$str$$5 >
)$$> ?
}%% 
,%% 
constraints&& 
:&& 
table&& "
=>&&# %
{'' 
table(( 
.(( 

PrimaryKey(( $
((($ %
$str((% 3
,((3 4
x((5 6
=>((7 9
x((: ;
.((; <
Id((< >
)((> ?
;((? @
})) 
))) 
.** 

Annotation** 
(** 
$str** +
,**+ ,
$str**- 6
)**6 7
;**7 8
migrationBuilder,, 
.,, 
CreateTable,, (
(,,( )
name-- 
:-- 
$str-- #
,--# $
columns.. 
:.. 
table.. 
=>.. !
new.." %
{// 
Id00 
=00 
table00 
.00 
Column00 %
<00% &
int00& )
>00) *
(00* +
type00+ /
:00/ 0
$str001 6
,006 7
nullable008 @
:00@ A
false00B G
)00G H
.11 

Annotation11 #
(11# $
$str11$ C
,11C D(
MySqlValueGenerationStrategy11E a
.11a b
IdentityColumn11b p
)11p q
,11q r
Name22 
=22 
table22  
.22  !
Column22! '
<22' (
string22( .
>22. /
(22/ 0
type220 4
:224 5
$str226 D
,22D E
	maxLength22F O
:22O P
$num22Q T
,22T U
nullable22V ^
:22^ _
false22` e
)22e f
.33 

Annotation33 #
(33# $
$str33$ 3
,333 4
$str335 >
)33> ?
,33? @
	CreatedAt44 
=44 
table44  %
.44% &
Column44& ,
<44, -
DateTime44- 5
>445 6
(446 7
type447 ;
:44; <
$str44= J
,44J K
nullable44L T
:44T U
false44V [
)44[ \
,44\ ]
	CreatedBy55 
=55 
table55  %
.55% &
Column55& ,
<55, -
string55- 3
>553 4
(554 5
type555 9
:559 :
$str55; E
,55E F
nullable55G O
:55O P
true55Q U
)55U V
.66 

Annotation66 #
(66# $
$str66$ 3
,663 4
$str665 >
)66> ?
,66? @
	UpdatedAt77 
=77 
table77  %
.77% &
Column77& ,
<77, -
DateTime77- 5
>775 6
(776 7
type777 ;
:77; <
$str77= J
,77J K
nullable77L T
:77T U
true77V Z
)77Z [
,77[ \
	UpdatedBy88 
=88 
table88  %
.88% &
Column88& ,
<88, -
string88- 3
>883 4
(884 5
type885 9
:889 :
$str88; E
,88E F
nullable88G O
:88O P
true88Q U
)88U V
.99 

Annotation99 #
(99# $
$str99$ 3
,993 4
$str995 >
)99> ?
}:: 
,:: 
constraints;; 
:;; 
table;; "
=>;;# %
{<< 
table== 
.== 

PrimaryKey== $
(==$ %
$str==% 5
,==5 6
x==7 8
=>==9 ;
x==< =
.=== >
Id==> @
)==@ A
;==A B
}>> 
)>> 
.?? 

Annotation?? 
(?? 
$str?? +
,??+ ,
$str??- 6
)??6 7
;??7 8
migrationBuilderAA 
.AA 
CreateTableAA (
(AA( )
nameBB 
:BB 
$strBB %
,BB% &
columnsCC 
:CC 
tableCC 
=>CC !
newCC" %
{DD 
IdEE 
=EE 
tableEE 
.EE 
ColumnEE %
<EE% &
intEE& )
>EE) *
(EE* +
typeEE+ /
:EE/ 0
$strEE1 6
,EE6 7
nullableEE8 @
:EE@ A
falseEEB G
)EEG H
.FF 

AnnotationFF #
(FF# $
$strFF$ C
,FFC D(
MySqlValueGenerationStrategyFFE a
.FFa b
IdentityColumnFFb p
)FFp q
,FFq r
UserIdGG 
=GG 
tableGG "
.GG" #
ColumnGG# )
<GG) *
intGG* -
>GG- .
(GG. /
typeGG/ 3
:GG3 4
$strGG5 :
,GG: ;
nullableGG< D
:GGD E
falseGGF K
)GGK L
,GGL M
SubjectHH 
=HH 
tableHH #
.HH# $
ColumnHH$ *
<HH* +
stringHH+ 1
>HH1 2
(HH2 3
typeHH3 7
:HH7 8
$strHH9 C
,HHC D
nullableHHE M
:HHM N
falseHHO T
)HHT U
.II 

AnnotationII #
(II# $
$strII$ 3
,II3 4
$strII5 >
)II> ?
,II? @
MessageJJ 
=JJ 
tableJJ #
.JJ# $
ColumnJJ$ *
<JJ* +
stringJJ+ 1
>JJ1 2
(JJ2 3
typeJJ3 7
:JJ7 8
$strJJ9 C
,JJC D
nullableJJE M
:JJM N
falseJJO T
)JJT U
.KK 

AnnotationKK #
(KK# $
$strKK$ 3
,KK3 4
$strKK5 >
)KK> ?
,KK? @
IsReadLL 
=LL 
tableLL "
.LL" #
ColumnLL# )
<LL) *
boolLL* .
>LL. /
(LL/ 0
typeLL0 4
:LL4 5
$strLL6 B
,LLB C
nullableLLD L
:LLL M
falseLLN S
)LLS T
,LLT U
	CreatedAtMM 
=MM 
tableMM  %
.MM% &
ColumnMM& ,
<MM, -
DateTimeMM- 5
>MM5 6
(MM6 7
typeMM7 ;
:MM; <
$strMM= J
,MMJ K
nullableMML T
:MMT U
falseMMV [
)MM[ \
,MM\ ]
	CreatedByNN 
=NN 
tableNN  %
.NN% &
ColumnNN& ,
<NN, -
stringNN- 3
>NN3 4
(NN4 5
typeNN5 9
:NN9 :
$strNN; E
,NNE F
nullableNNG O
:NNO P
trueNNQ U
)NNU V
.OO 

AnnotationOO #
(OO# $
$strOO$ 3
,OO3 4
$strOO5 >
)OO> ?
,OO? @
	UpdatedAtPP 
=PP 
tablePP  %
.PP% &
ColumnPP& ,
<PP, -
DateTimePP- 5
>PP5 6
(PP6 7
typePP7 ;
:PP; <
$strPP= J
,PPJ K
nullablePPL T
:PPT U
truePPV Z
)PPZ [
,PP[ \
	UpdatedByQQ 
=QQ 
tableQQ  %
.QQ% &
ColumnQQ& ,
<QQ, -
stringQQ- 3
>QQ3 4
(QQ4 5
typeQQ5 9
:QQ9 :
$strQQ; E
,QQE F
nullableQQG O
:QQO P
trueQQQ U
)QQU V
.RR 

AnnotationRR #
(RR# $
$strRR$ 3
,RR3 4
$strRR5 >
)RR> ?
}SS 
,SS 
constraintsTT 
:TT 
tableTT "
=>TT# %
{UU 
tableVV 
.VV 

PrimaryKeyVV $
(VV$ %
$strVV% 7
,VV7 8
xVV9 :
=>VV; =
xVV> ?
.VV? @
IdVV@ B
)VVB C
;VVC D
}WW 
)WW 
.XX 

AnnotationXX 
(XX 
$strXX +
,XX+ ,
$strXX- 6
)XX6 7
;XX7 8
migrationBuilderZZ 
.ZZ 
CreateTableZZ (
(ZZ( )
name[[ 
:[[ 
$str[[ 
,[[ 
columns\\ 
:\\ 
table\\ 
=>\\ !
new\\" %
{]] 
Id^^ 
=^^ 
table^^ 
.^^ 
Column^^ %
<^^% &
int^^& )
>^^) *
(^^* +
type^^+ /
:^^/ 0
$str^^1 6
,^^6 7
nullable^^8 @
:^^@ A
false^^B G
)^^G H
.__ 

Annotation__ #
(__# $
$str__$ C
,__C D(
MySqlValueGenerationStrategy__E a
.__a b
IdentityColumn__b p
)__p q
,__q r
Email`` 
=`` 
table`` !
.``! "
Column``" (
<``( )
string``) /
>``/ 0
(``0 1
type``1 5
:``5 6
$str``7 E
,``E F
	maxLength``G P
:``P Q
$num``R U
,``U V
nullable``W _
:``_ `
false``a f
)``f g
.aa 

Annotationaa #
(aa# $
$straa$ 3
,aa3 4
$straa5 >
)aa> ?
,aa? @
PasswordHashbb  
=bb! "
tablebb# (
.bb( )
Columnbb) /
<bb/ 0
stringbb0 6
>bb6 7
(bb7 8
typebb8 <
:bb< =
$strbb> H
,bbH I
nullablebbJ R
:bbR S
falsebbT Y
)bbY Z
.cc 

Annotationcc #
(cc# $
$strcc$ 3
,cc3 4
$strcc5 >
)cc> ?
,cc? @
FullNamedd 
=dd 
tabledd $
.dd$ %
Columndd% +
<dd+ ,
stringdd, 2
>dd2 3
(dd3 4
typedd4 8
:dd8 9
$strdd: H
,ddH I
	maxLengthddJ S
:ddS T
$numddU X
,ddX Y
nullableddZ b
:ddb c
falseddd i
)ddi j
.ee 

Annotationee #
(ee# $
$stree$ 3
,ee3 4
$stree5 >
)ee> ?
,ee? @
Roleff 
=ff 
tableff  
.ff  !
Columnff! '
<ff' (
intff( +
>ff+ ,
(ff, -
typeff- 1
:ff1 2
$strff3 8
,ff8 9
nullableff: B
:ffB C
falseffD I
)ffI J
,ffJ K
IsActivegg 
=gg 
tablegg $
.gg$ %
Columngg% +
<gg+ ,
boolgg, 0
>gg0 1
(gg1 2
typegg2 6
:gg6 7
$strgg8 D
,ggD E
nullableggF N
:ggN O
falseggP U
)ggU V
,ggV W
	CreatedAthh 
=hh 
tablehh  %
.hh% &
Columnhh& ,
<hh, -
DateTimehh- 5
>hh5 6
(hh6 7
typehh7 ;
:hh; <
$strhh= J
,hhJ K
nullablehhL T
:hhT U
falsehhV [
)hh[ \
,hh\ ]
	CreatedByii 
=ii 
tableii  %
.ii% &
Columnii& ,
<ii, -
stringii- 3
>ii3 4
(ii4 5
typeii5 9
:ii9 :
$strii; E
,iiE F
nullableiiG O
:iiO P
trueiiQ U
)iiU V
.jj 

Annotationjj #
(jj# $
$strjj$ 3
,jj3 4
$strjj5 >
)jj> ?
,jj? @
	UpdatedAtkk 
=kk 
tablekk  %
.kk% &
Columnkk& ,
<kk, -
DateTimekk- 5
>kk5 6
(kk6 7
typekk7 ;
:kk; <
$strkk= J
,kkJ K
nullablekkL T
:kkT U
truekkV Z
)kkZ [
,kk[ \
	UpdatedByll 
=ll 
tablell  %
.ll% &
Columnll& ,
<ll, -
stringll- 3
>ll3 4
(ll4 5
typell5 9
:ll9 :
$strll; E
,llE F
nullablellG O
:llO P
truellQ U
)llU V
.mm 

Annotationmm #
(mm# $
$strmm$ 3
,mm3 4
$strmm5 >
)mm> ?
}nn 
,nn 
constraintsoo 
:oo 
tableoo "
=>oo# %
{pp 
tableqq 
.qq 

PrimaryKeyqq $
(qq$ %
$strqq% /
,qq/ 0
xqq1 2
=>qq3 5
xqq6 7
.qq7 8
Idqq8 :
)qq: ;
;qq; <
}rr 
)rr 
.ss 

Annotationss 
(ss 
$strss +
,ss+ ,
$strss- 6
)ss6 7
;ss7 8
migrationBuilderuu 
.uu 
CreateTableuu (
(uu( )
namevv 
:vv 
$strvv (
,vv( )
columnsww 
:ww 
tableww 
=>ww !
newww" %
{xx 
Idyy 
=yy 
tableyy 
.yy 
Columnyy %
<yy% &
intyy& )
>yy) *
(yy* +
typeyy+ /
:yy/ 0
$stryy1 6
,yy6 7
nullableyy8 @
:yy@ A
falseyyB G
)yyG H
.zz 

Annotationzz #
(zz# $
$strzz$ C
,zzC D(
MySqlValueGenerationStrategyzzE a
.zza b
IdentityColumnzzb p
)zzp q
,zzq r
UserId{{ 
={{ 
table{{ "
.{{" #
Column{{# )
<{{) *
int{{* -
>{{- .
({{. /
type{{/ 3
:{{3 4
$str{{5 :
,{{: ;
nullable{{< D
:{{D E
false{{F K
){{K L
,{{L M
DepartmentId||  
=||! "
table||# (
.||( )
Column||) /
<||/ 0
int||0 3
>||3 4
(||4 5
type||5 9
:||9 :
$str||; @
,||@ A
nullable||B J
:||J K
true||L P
)||P Q
,||Q R
EmployeeCode}}  
=}}! "
table}}# (
.}}( )
Column}}) /
<}}/ 0
string}}0 6
>}}6 7
(}}7 8
type}}8 <
:}}< =
$str}}> K
,}}K L
	maxLength}}M V
:}}V W
$num}}X Z
,}}Z [
nullable}}\ d
:}}d e
true}}f j
)}}j k
.~~ 

Annotation~~ #
(~~# $
$str~~$ 3
,~~3 4
$str~~5 >
)~~> ?
,~~? @
Address 
= 
table #
.# $
Column$ *
<* +
string+ 1
>1 2
(2 3
type3 7
:7 8
$str9 G
,G H
	maxLengthI R
:R S
$numT W
,W X
nullableY a
:a b
truec g
)g h
.
ÄÄ 

Annotation
ÄÄ #
(
ÄÄ# $
$str
ÄÄ$ 3
,
ÄÄ3 4
$str
ÄÄ5 >
)
ÄÄ> ?
,
ÄÄ? @
Phone
ÅÅ 
=
ÅÅ 
table
ÅÅ !
.
ÅÅ! "
Column
ÅÅ" (
<
ÅÅ( )
string
ÅÅ) /
>
ÅÅ/ 0
(
ÅÅ0 1
type
ÅÅ1 5
:
ÅÅ5 6
$str
ÅÅ7 D
,
ÅÅD E
	maxLength
ÅÅF O
:
ÅÅO P
$num
ÅÅQ S
,
ÅÅS T
nullable
ÅÅU ]
:
ÅÅ] ^
true
ÅÅ_ c
)
ÅÅc d
.
ÇÇ 

Annotation
ÇÇ #
(
ÇÇ# $
$str
ÇÇ$ 3
,
ÇÇ3 4
$str
ÇÇ5 >
)
ÇÇ> ?
,
ÇÇ? @
	CreatedAt
ÉÉ 
=
ÉÉ 
table
ÉÉ  %
.
ÉÉ% &
Column
ÉÉ& ,
<
ÉÉ, -
DateTime
ÉÉ- 5
>
ÉÉ5 6
(
ÉÉ6 7
type
ÉÉ7 ;
:
ÉÉ; <
$str
ÉÉ= J
,
ÉÉJ K
nullable
ÉÉL T
:
ÉÉT U
false
ÉÉV [
)
ÉÉ[ \
,
ÉÉ\ ]
	CreatedBy
ÑÑ 
=
ÑÑ 
table
ÑÑ  %
.
ÑÑ% &
Column
ÑÑ& ,
<
ÑÑ, -
string
ÑÑ- 3
>
ÑÑ3 4
(
ÑÑ4 5
type
ÑÑ5 9
:
ÑÑ9 :
$str
ÑÑ; E
,
ÑÑE F
nullable
ÑÑG O
:
ÑÑO P
true
ÑÑQ U
)
ÑÑU V
.
ÖÖ 

Annotation
ÖÖ #
(
ÖÖ# $
$str
ÖÖ$ 3
,
ÖÖ3 4
$str
ÖÖ5 >
)
ÖÖ> ?
,
ÖÖ? @
	UpdatedAt
ÜÜ 
=
ÜÜ 
table
ÜÜ  %
.
ÜÜ% &
Column
ÜÜ& ,
<
ÜÜ, -
DateTime
ÜÜ- 5
>
ÜÜ5 6
(
ÜÜ6 7
type
ÜÜ7 ;
:
ÜÜ; <
$str
ÜÜ= J
,
ÜÜJ K
nullable
ÜÜL T
:
ÜÜT U
true
ÜÜV Z
)
ÜÜZ [
,
ÜÜ[ \
	UpdatedBy
áá 
=
áá 
table
áá  %
.
áá% &
Column
áá& ,
<
áá, -
string
áá- 3
>
áá3 4
(
áá4 5
type
áá5 9
:
áá9 :
$str
áá; E
,
ááE F
nullable
ááG O
:
ááO P
true
ááQ U
)
ááU V
.
àà 

Annotation
àà #
(
àà# $
$str
àà$ 3
,
àà3 4
$str
àà5 >
)
àà> ?
}
ââ 
,
ââ 
constraints
ää 
:
ää 
table
ää "
=>
ää# %
{
ãã 
table
åå 
.
åå 

PrimaryKey
åå $
(
åå$ %
$str
åå% :
,
åå: ;
x
åå< =
=>
åå> @
x
ååA B
.
ååB C
Id
ååC E
)
ååE F
;
ååF G
table
çç 
.
çç 

ForeignKey
çç $
(
çç$ %
name
éé 
:
éé 
$str
éé L
,
ééL M
column
èè 
:
èè 
x
èè  !
=>
èè" $
x
èè% &
.
èè& '
DepartmentId
èè' 3
,
èè3 4
principalTable
êê &
:
êê& '
$str
êê( 5
,
êê5 6
principalColumn
ëë '
:
ëë' (
$str
ëë) -
)
ëë- .
;
ëë. /
table
íí 
.
íí 

ForeignKey
íí $
(
íí$ %
name
ìì 
:
ìì 
$str
ìì @
,
ìì@ A
column
îî 
:
îî 
x
îî  !
=>
îî" $
x
îî% &
.
îî& '
UserId
îî' -
,
îî- .
principalTable
ïï &
:
ïï& '
$str
ïï( /
,
ïï/ 0
principalColumn
ññ '
:
ññ' (
$str
ññ) -
,
ññ- .
onDelete
óó  
:
óó  !
ReferentialAction
óó" 3
.
óó3 4
Cascade
óó4 ;
)
óó; <
;
óó< =
}
òò 
)
òò 
.
ôô 

Annotation
ôô 
(
ôô 
$str
ôô +
,
ôô+ ,
$str
ôô- 6
)
ôô6 7
;
ôô7 8
migrationBuilder
õõ 
.
õõ 
CreateTable
õõ (
(
õõ( )
name
úú 
:
úú 
$str
úú %
,
úú% &
columns
ùù 
:
ùù 
table
ùù 
=>
ùù !
new
ùù" %
{
ûû 
Id
üü 
=
üü 
table
üü 
.
üü 
Column
üü %
<
üü% &
int
üü& )
>
üü) *
(
üü* +
type
üü+ /
:
üü/ 0
$str
üü1 6
,
üü6 7
nullable
üü8 @
:
üü@ A
false
üüB G
)
üüG H
.
†† 

Annotation
†† #
(
††# $
$str
††$ C
,
††C D*
MySqlValueGenerationStrategy
††E a
.
††a b
IdentityColumn
††b p
)
††p q
,
††q r
Status
°° 
=
°° 
table
°° "
.
°°" #
Column
°°# )
<
°°) *
int
°°* -
>
°°- .
(
°°. /
type
°°/ 3
:
°°3 4
$str
°°5 :
,
°°: ;
nullable
°°< D
:
°°D E
false
°°F K
)
°°K L
,
°°L M
EmployeeProfileId
¢¢ %
=
¢¢& '
table
¢¢( -
.
¢¢- .
Column
¢¢. 4
<
¢¢4 5
int
¢¢5 8
>
¢¢8 9
(
¢¢9 :
type
¢¢: >
:
¢¢> ?
$str
¢¢@ E
,
¢¢E F
nullable
¢¢G O
:
¢¢O P
false
¢¢Q V
)
¢¢V W
,
¢¢W X
Basic
££ 
=
££ 
table
££ !
.
££! "
Column
££" (
<
££( )
decimal
££) 0
>
££0 1
(
££1 2
type
££2 6
:
££6 7
$str
££8 H
,
££H I
nullable
££J R
:
££R S
false
££T Y
)
££Y Z
,
££Z [
HRA
§§ 
=
§§ 
table
§§ 
.
§§  
Column
§§  &
<
§§& '
decimal
§§' .
>
§§. /
(
§§/ 0
type
§§0 4
:
§§4 5
$str
§§6 F
,
§§F G
nullable
§§H P
:
§§P Q
false
§§R W
)
§§W X
,
§§X Y

TaxPercent
•• 
=
••  
table
••! &
.
••& '
Column
••' -
<
••- .
decimal
••. 5
>
••5 6
(
••6 7
type
••7 ;
:
••; <
$str
••= M
,
••M N
nullable
••O W
:
••W X
false
••Y ^
)
••^ _
,
••_ `
GrossCTC
¶¶ 
=
¶¶ 
table
¶¶ $
.
¶¶$ %
Column
¶¶% +
<
¶¶+ ,
decimal
¶¶, 3
>
¶¶3 4
(
¶¶4 5
type
¶¶5 9
:
¶¶9 :
$str
¶¶; K
,
¶¶K L
nullable
¶¶M U
:
¶¶U V
false
¶¶W \
)
¶¶\ ]
,
¶¶] ^
EffectiveFrom
ßß !
=
ßß" #
table
ßß$ )
.
ßß) *
Column
ßß* 0
<
ßß0 1
DateTime
ßß1 9
>
ßß9 :
(
ßß: ;
type
ßß; ?
:
ßß? @
$str
ßßA N
,
ßßN O
nullable
ßßP X
:
ßßX Y
false
ßßZ _
)
ßß_ `
,
ßß` a

IsApproved
®® 
=
®®  
table
®®! &
.
®®& '
Column
®®' -
<
®®- .
bool
®®. 2
>
®®2 3
(
®®3 4
type
®®4 8
:
®®8 9
$str
®®: F
,
®®F G
nullable
®®H P
:
®®P Q
false
®®R W
)
®®W X
,
®®X Y
CreatedByUserId
©© #
=
©©$ %
table
©©& +
.
©©+ ,
Column
©©, 2
<
©©2 3
int
©©3 6
>
©©6 7
(
©©7 8
type
©©8 <
:
©©< =
$str
©©> C
,
©©C D
nullable
©©E M
:
©©M N
false
©©O T
)
©©T U
,
©©U V
	CreatedAt
™™ 
=
™™ 
table
™™  %
.
™™% &
Column
™™& ,
<
™™, -
DateTime
™™- 5
>
™™5 6
(
™™6 7
type
™™7 ;
:
™™; <
$str
™™= J
,
™™J K
nullable
™™L T
:
™™T U
false
™™V [
)
™™[ \
,
™™\ ]
	UpdatedAt
´´ 
=
´´ 
table
´´  %
.
´´% &
Column
´´& ,
<
´´, -
DateTime
´´- 5
>
´´5 6
(
´´6 7
type
´´7 ;
:
´´; <
$str
´´= J
,
´´J K
nullable
´´L T
:
´´T U
true
´´V Z
)
´´Z [
}
¨¨ 
,
¨¨ 
constraints
≠≠ 
:
≠≠ 
table
≠≠ "
=>
≠≠# %
{
ÆÆ 
table
ØØ 
.
ØØ 

PrimaryKey
ØØ $
(
ØØ$ %
$str
ØØ% 7
,
ØØ7 8
x
ØØ9 :
=>
ØØ; =
x
ØØ> ?
.
ØØ? @
Id
ØØ@ B
)
ØØB C
;
ØØC D
table
∞∞ 
.
∞∞ 

ForeignKey
∞∞ $
(
∞∞$ %
name
±± 
:
±± 
$str
±± S
,
±±S T
column
≤≤ 
:
≤≤ 
x
≤≤  !
=>
≤≤" $
x
≤≤% &
.
≤≤& '
EmployeeProfileId
≤≤' 8
,
≤≤8 9
principalTable
≥≥ &
:
≥≥& '
$str
≥≥( :
,
≥≥: ;
principalColumn
¥¥ '
:
¥¥' (
$str
¥¥) -
,
¥¥- .
onDelete
µµ  
:
µµ  !
ReferentialAction
µµ" 3
.
µµ3 4
Cascade
µµ4 ;
)
µµ; <
;
µµ< =
table
∂∂ 
.
∂∂ 

ForeignKey
∂∂ $
(
∂∂$ %
name
∑∑ 
:
∑∑ 
$str
∑∑ F
,
∑∑F G
column
∏∏ 
:
∏∏ 
x
∏∏  !
=>
∏∏" $
x
∏∏% &
.
∏∏& '
CreatedByUserId
∏∏' 6
,
∏∏6 7
principalTable
ππ &
:
ππ& '
$str
ππ( /
,
ππ/ 0
principalColumn
∫∫ '
:
∫∫' (
$str
∫∫) -
,
∫∫- .
onDelete
ªª  
:
ªª  !
ReferentialAction
ªª" 3
.
ªª3 4
Restrict
ªª4 <
)
ªª< =
;
ªª= >
}
ºº 
)
ºº 
.
ΩΩ 

Annotation
ΩΩ 
(
ΩΩ 
$str
ΩΩ +
,
ΩΩ+ ,
$str
ΩΩ- 6
)
ΩΩ6 7
;
ΩΩ7 8
migrationBuilder
øø 
.
øø 
CreateTable
øø (
(
øø( )
name
¿¿ 
:
¿¿ 
$str
¿¿  
,
¿¿  !
columns
¡¡ 
:
¡¡ 
table
¡¡ 
=>
¡¡ !
new
¡¡" %
{
¬¬ 
Id
√√ 
=
√√ 
table
√√ 
.
√√ 
Column
√√ %
<
√√% &
int
√√& )
>
√√) *
(
√√* +
type
√√+ /
:
√√/ 0
$str
√√1 6
,
√√6 7
nullable
√√8 @
:
√√@ A
false
√√B G
)
√√G H
.
ƒƒ 

Annotation
ƒƒ #
(
ƒƒ# $
$str
ƒƒ$ C
,
ƒƒC D*
MySqlValueGenerationStrategy
ƒƒE a
.
ƒƒa b
IdentityColumn
ƒƒb p
)
ƒƒp q
,
ƒƒq r
Status
≈≈ 
=
≈≈ 
table
≈≈ "
.
≈≈" #
Column
≈≈# )
<
≈≈) *
int
≈≈* -
>
≈≈- .
(
≈≈. /
type
≈≈/ 3
:
≈≈3 4
$str
≈≈5 :
,
≈≈: ;
nullable
≈≈< D
:
≈≈D E
false
≈≈F K
)
≈≈K L
,
≈≈L M
EmployeeProfileId
∆∆ %
=
∆∆& '
table
∆∆( -
.
∆∆- .
Column
∆∆. 4
<
∆∆4 5
int
∆∆5 8
>
∆∆8 9
(
∆∆9 :
type
∆∆: >
:
∆∆> ?
$str
∆∆@ E
,
∆∆E F
nullable
∆∆G O
:
∆∆O P
false
∆∆Q V
)
∆∆V W
,
∆∆W X
Year
«« 
=
«« 
table
««  
.
««  !
Column
««! '
<
««' (
int
««( +
>
««+ ,
(
««, -
type
««- 1
:
««1 2
$str
««3 8
,
««8 9
nullable
««: B
:
««B C
false
««D I
)
««I J
,
««J K
Month
»» 
=
»» 
table
»» !
.
»»! "
Column
»»" (
<
»»( )
int
»») ,
>
»», -
(
»»- .
type
»». 2
:
»»2 3
$str
»»4 9
,
»»9 :
nullable
»»; C
:
»»C D
false
»»E J
)
»»J K
,
»»K L
Basic
…… 
=
…… 
table
…… !
.
……! "
Column
……" (
<
……( )
decimal
……) 0
>
……0 1
(
……1 2
type
……2 6
:
……6 7
$str
……8 H
,
……H I
nullable
……J R
:
……R S
false
……T Y
)
……Y Z
,
……Z [
HRA
   
=
   
table
   
.
    
Column
    &
<
  & '
decimal
  ' .
>
  . /
(
  / 0
type
  0 4
:
  4 5
$str
  6 F
,
  F G
nullable
  H P
:
  P Q
false
  R W
)
  W X
,
  X Y
TaxDeducted
ÀÀ 
=
ÀÀ  !
table
ÀÀ" '
.
ÀÀ' (
Column
ÀÀ( .
<
ÀÀ. /
decimal
ÀÀ/ 6
>
ÀÀ6 7
(
ÀÀ7 8
type
ÀÀ8 <
:
ÀÀ< =
$str
ÀÀ> N
,
ÀÀN O
nullable
ÀÀP X
:
ÀÀX Y
false
ÀÀZ _
)
ÀÀ_ `
,
ÀÀ` a
LOPDays
ÃÃ 
=
ÃÃ 
table
ÃÃ #
.
ÃÃ# $
Column
ÃÃ$ *
<
ÃÃ* +
int
ÃÃ+ .
>
ÃÃ. /
(
ÃÃ/ 0
type
ÃÃ0 4
:
ÃÃ4 5
$str
ÃÃ6 ;
,
ÃÃ; <
nullable
ÃÃ= E
:
ÃÃE F
false
ÃÃG L
)
ÃÃL M
,
ÃÃM N
NetPay
ÕÕ 
=
ÕÕ 
table
ÕÕ "
.
ÕÕ" #
Column
ÕÕ# )
<
ÕÕ) *
decimal
ÕÕ* 1
>
ÕÕ1 2
(
ÕÕ2 3
type
ÕÕ3 7
:
ÕÕ7 8
$str
ÕÕ9 I
,
ÕÕI J
nullable
ÕÕK S
:
ÕÕS T
false
ÕÕU Z
)
ÕÕZ [
,
ÕÕ[ \
CreatedByUserId
ŒŒ #
=
ŒŒ$ %
table
ŒŒ& +
.
ŒŒ+ ,
Column
ŒŒ, 2
<
ŒŒ2 3
int
ŒŒ3 6
>
ŒŒ6 7
(
ŒŒ7 8
type
ŒŒ8 <
:
ŒŒ< =
$str
ŒŒ> C
,
ŒŒC D
nullable
ŒŒE M
:
ŒŒM N
false
ŒŒO T
)
ŒŒT U
,
ŒŒU V
FilePath
œœ 
=
œœ 
table
œœ $
.
œœ$ %
Column
œœ% +
<
œœ+ ,
string
œœ, 2
>
œœ2 3
(
œœ3 4
type
œœ4 8
:
œœ8 9
$str
œœ: D
,
œœD E
nullable
œœF N
:
œœN O
true
œœP T
)
œœT U
.
–– 

Annotation
–– #
(
––# $
$str
––$ 3
,
––3 4
$str
––5 >
)
––> ?
,
––? @

IsApproved
—— 
=
——  
table
——! &
.
——& '
Column
——' -
<
——- .
bool
——. 2
>
——2 3
(
——3 4
type
——4 8
:
——8 9
$str
——: F
,
——F G
nullable
——H P
:
——P Q
false
——R W
)
——W X
,
——X Y

IsReleased
““ 
=
““  
table
““! &
.
““& '
Column
““' -
<
““- .
bool
““. 2
>
““2 3
(
““3 4
type
““4 8
:
““8 9
$str
““: F
,
““F G
nullable
““H P
:
““P Q
false
““R W
)
““W X
,
““X Y
	CreatedAt
”” 
=
”” 
table
””  %
.
””% &
Column
””& ,
<
””, -
DateTime
””- 5
>
””5 6
(
””6 7
type
””7 ;
:
””; <
$str
””= J
,
””J K
nullable
””L T
:
””T U
false
””V [
)
””[ \
,
””\ ]
	UpdatedAt
‘‘ 
=
‘‘ 
table
‘‘  %
.
‘‘% &
Column
‘‘& ,
<
‘‘, -
DateTime
‘‘- 5
>
‘‘5 6
(
‘‘6 7
type
‘‘7 ;
:
‘‘; <
$str
‘‘= J
,
‘‘J K
nullable
‘‘L T
:
‘‘T U
true
‘‘V Z
)
‘‘Z [
}
’’ 
,
’’ 
constraints
÷÷ 
:
÷÷ 
table
÷÷ "
=>
÷÷# %
{
◊◊ 
table
ÿÿ 
.
ÿÿ 

PrimaryKey
ÿÿ $
(
ÿÿ$ %
$str
ÿÿ% 2
,
ÿÿ2 3
x
ÿÿ4 5
=>
ÿÿ6 8
x
ÿÿ9 :
.
ÿÿ: ;
Id
ÿÿ; =
)
ÿÿ= >
;
ÿÿ> ?
table
ŸŸ 
.
ŸŸ 

ForeignKey
ŸŸ $
(
ŸŸ$ %
name
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ N
,
⁄⁄N O
column
€€ 
:
€€ 
x
€€  !
=>
€€" $
x
€€% &
.
€€& '
EmployeeProfileId
€€' 8
,
€€8 9
principalTable
‹‹ &
:
‹‹& '
$str
‹‹( :
,
‹‹: ;
principalColumn
›› '
:
››' (
$str
››) -
,
››- .
onDelete
ﬁﬁ  
:
ﬁﬁ  !
ReferentialAction
ﬁﬁ" 3
.
ﬁﬁ3 4
Cascade
ﬁﬁ4 ;
)
ﬁﬁ; <
;
ﬁﬁ< =
table
ﬂﬂ 
.
ﬂﬂ 

ForeignKey
ﬂﬂ $
(
ﬂﬂ$ %
name
‡‡ 
:
‡‡ 
$str
‡‡ A
,
‡‡A B
column
·· 
:
·· 
x
··  !
=>
··" $
x
··% &
.
··& '
CreatedByUserId
··' 6
,
··6 7
principalTable
‚‚ &
:
‚‚& '
$str
‚‚( /
,
‚‚/ 0
principalColumn
„„ '
:
„„' (
$str
„„) -
,
„„- .
onDelete
‰‰  
:
‰‰  !
ReferentialAction
‰‰" 3
.
‰‰3 4
Restrict
‰‰4 <
)
‰‰< =
;
‰‰= >
}
ÂÂ 
)
ÂÂ 
.
ÊÊ 

Annotation
ÊÊ 
(
ÊÊ 
$str
ÊÊ +
,
ÊÊ+ ,
$str
ÊÊ- 6
)
ÊÊ6 7
;
ÊÊ7 8
migrationBuilder
ËË 
.
ËË 
CreateTable
ËË (
(
ËË( )
name
ÈÈ 
:
ÈÈ 
$str
ÈÈ %
,
ÈÈ% &
columns
ÍÍ 
:
ÍÍ 
table
ÍÍ 
=>
ÍÍ !
new
ÍÍ" %
{
ÎÎ 
Id
ÏÏ 
=
ÏÏ 
table
ÏÏ 
.
ÏÏ 
Column
ÏÏ %
<
ÏÏ% &
int
ÏÏ& )
>
ÏÏ) *
(
ÏÏ* +
type
ÏÏ+ /
:
ÏÏ/ 0
$str
ÏÏ1 6
,
ÏÏ6 7
nullable
ÏÏ8 @
:
ÏÏ@ A
false
ÏÏB G
)
ÏÏG H
.
ÌÌ 

Annotation
ÌÌ #
(
ÌÌ# $
$str
ÌÌ$ C
,
ÌÌC D*
MySqlValueGenerationStrategy
ÌÌE a
.
ÌÌa b
IdentityColumn
ÌÌb p
)
ÌÌp q
,
ÌÌq r
CTCStructureId
ÓÓ "
=
ÓÓ# $
table
ÓÓ% *
.
ÓÓ* +
Column
ÓÓ+ 1
<
ÓÓ1 2
int
ÓÓ2 5
>
ÓÓ5 6
(
ÓÓ6 7
type
ÓÓ7 ;
:
ÓÓ; <
$str
ÓÓ= B
,
ÓÓB C
nullable
ÓÓD L
:
ÓÓL M
false
ÓÓN S
)
ÓÓS T
,
ÓÓT U
Label
ÔÔ 
=
ÔÔ 
table
ÔÔ !
.
ÔÔ! "
Column
ÔÔ" (
<
ÔÔ( )
string
ÔÔ) /
>
ÔÔ/ 0
(
ÔÔ0 1
type
ÔÔ1 5
:
ÔÔ5 6
$str
ÔÔ7 A
,
ÔÔA B
nullable
ÔÔC K
:
ÔÔK L
false
ÔÔM R
)
ÔÔR S
.
 

Annotation
 #
(
# $
$str
$ 3
,
3 4
$str
5 >
)
> ?
,
? @
Amount
ÒÒ 
=
ÒÒ 
table
ÒÒ "
.
ÒÒ" #
Column
ÒÒ# )
<
ÒÒ) *
decimal
ÒÒ* 1
>
ÒÒ1 2
(
ÒÒ2 3
type
ÒÒ3 7
:
ÒÒ7 8
$str
ÒÒ9 I
,
ÒÒI J
nullable
ÒÒK S
:
ÒÒS T
false
ÒÒU Z
)
ÒÒZ [
}
ÚÚ 
,
ÚÚ 
constraints
ÛÛ 
:
ÛÛ 
table
ÛÛ "
=>
ÛÛ# %
{
ÙÙ 
table
ıı 
.
ıı 

PrimaryKey
ıı $
(
ıı$ %
$str
ıı% 7
,
ıı7 8
x
ıı9 :
=>
ıı; =
x
ıı> ?
.
ıı? @
Id
ıı@ B
)
ııB C
;
ııC D
table
ˆˆ 
.
ˆˆ 

ForeignKey
ˆˆ $
(
ˆˆ$ %
name
˜˜ 
:
˜˜ 
$str
˜˜ M
,
˜˜M N
column
¯¯ 
:
¯¯ 
x
¯¯  !
=>
¯¯" $
x
¯¯% &
.
¯¯& '
CTCStructureId
¯¯' 5
,
¯¯5 6
principalTable
˘˘ &
:
˘˘& '
$str
˘˘( 7
,
˘˘7 8
principalColumn
˙˙ '
:
˙˙' (
$str
˙˙) -
,
˙˙- .
onDelete
˚˚  
:
˚˚  !
ReferentialAction
˚˚" 3
.
˚˚3 4
Cascade
˚˚4 ;
)
˚˚; <
;
˚˚< =
}
¸¸ 
)
¸¸ 
.
˝˝ 

Annotation
˝˝ 
(
˝˝ 
$str
˝˝ +
,
˝˝+ ,
$str
˝˝- 6
)
˝˝6 7
;
˝˝7 8
migrationBuilder
ˇˇ 
.
ˇˇ 
CreateTable
ˇˇ (
(
ˇˇ( )
name
ÄÄ 
:
ÄÄ 
$str
ÄÄ %
,
ÄÄ% &
columns
ÅÅ 
:
ÅÅ 
table
ÅÅ 
=>
ÅÅ !
new
ÅÅ" %
{
ÇÇ 
Id
ÉÉ 
=
ÉÉ 
table
ÉÉ 
.
ÉÉ 
Column
ÉÉ %
<
ÉÉ% &
int
ÉÉ& )
>
ÉÉ) *
(
ÉÉ* +
type
ÉÉ+ /
:
ÉÉ/ 0
$str
ÉÉ1 6
,
ÉÉ6 7
nullable
ÉÉ8 @
:
ÉÉ@ A
false
ÉÉB G
)
ÉÉG H
.
ÑÑ 

Annotation
ÑÑ #
(
ÑÑ# $
$str
ÑÑ$ C
,
ÑÑC D*
MySqlValueGenerationStrategy
ÑÑE a
.
ÑÑa b
IdentityColumn
ÑÑb p
)
ÑÑp q
,
ÑÑq r
CTCStructureId
ÖÖ "
=
ÖÖ# $
table
ÖÖ% *
.
ÖÖ* +
Column
ÖÖ+ 1
<
ÖÖ1 2
int
ÖÖ2 5
>
ÖÖ5 6
(
ÖÖ6 7
type
ÖÖ7 ;
:
ÖÖ; <
$str
ÖÖ= B
,
ÖÖB C
nullable
ÖÖD L
:
ÖÖL M
false
ÖÖN S
)
ÖÖS T
,
ÖÖT U
Label
ÜÜ 
=
ÜÜ 
table
ÜÜ !
.
ÜÜ! "
Column
ÜÜ" (
<
ÜÜ( )
string
ÜÜ) /
>
ÜÜ/ 0
(
ÜÜ0 1
type
ÜÜ1 5
:
ÜÜ5 6
$str
ÜÜ7 A
,
ÜÜA B
nullable
ÜÜC K
:
ÜÜK L
false
ÜÜM R
)
ÜÜR S
.
áá 

Annotation
áá #
(
áá# $
$str
áá$ 3
,
áá3 4
$str
áá5 >
)
áá> ?
,
áá? @
Amount
àà 
=
àà 
table
àà "
.
àà" #
Column
àà# )
<
àà) *
decimal
àà* 1
>
àà1 2
(
àà2 3
type
àà3 7
:
àà7 8
$str
àà9 I
,
ààI J
nullable
ààK S
:
ààS T
false
ààU Z
)
ààZ [
}
ââ 
,
ââ 
constraints
ää 
:
ää 
table
ää "
=>
ää# %
{
ãã 
table
åå 
.
åå 

PrimaryKey
åå $
(
åå$ %
$str
åå% 7
,
åå7 8
x
åå9 :
=>
åå; =
x
åå> ?
.
åå? @
Id
åå@ B
)
ååB C
;
ååC D
table
çç 
.
çç 

ForeignKey
çç $
(
çç$ %
name
éé 
:
éé 
$str
éé M
,
ééM N
column
èè 
:
èè 
x
èè  !
=>
èè" $
x
èè% &
.
èè& '
CTCStructureId
èè' 5
,
èè5 6
principalTable
êê &
:
êê& '
$str
êê( 7
,
êê7 8
principalColumn
ëë '
:
ëë' (
$str
ëë) -
,
ëë- .
onDelete
íí  
:
íí  !
ReferentialAction
íí" 3
.
íí3 4
Cascade
íí4 ;
)
íí; <
;
íí< =
}
ìì 
)
ìì 
.
îî 

Annotation
îî 
(
îî 
$str
îî +
,
îî+ ,
$str
îî- 6
)
îî6 7
;
îî7 8
migrationBuilder
ññ 
.
ññ 
CreateTable
ññ (
(
ññ( )
name
óó 
:
óó 
$str
óó )
,
óó) *
columns
òò 
:
òò 
table
òò 
=>
òò !
new
òò" %
{
ôô 
Id
öö 
=
öö 
table
öö 
.
öö 
Column
öö %
<
öö% &
int
öö& )
>
öö) *
(
öö* +
type
öö+ /
:
öö/ 0
$str
öö1 6
,
öö6 7
nullable
öö8 @
:
öö@ A
false
ööB G
)
ööG H
.
õõ 

Annotation
õõ #
(
õõ# $
$str
õõ$ C
,
õõC D*
MySqlValueGenerationStrategy
õõE a
.
õõa b
IdentityColumn
õõb p
)
õõp q
,
õõq r
	PayslipId
úú 
=
úú 
table
úú  %
.
úú% &
Column
úú& ,
<
úú, -
int
úú- 0
>
úú0 1
(
úú1 2
type
úú2 6
:
úú6 7
$str
úú8 =
,
úú= >
nullable
úú? G
:
úúG H
false
úúI N
)
úúN O
,
úúO P
Label
ùù 
=
ùù 
table
ùù !
.
ùù! "
Column
ùù" (
<
ùù( )
string
ùù) /
>
ùù/ 0
(
ùù0 1
type
ùù1 5
:
ùù5 6
$str
ùù7 A
,
ùùA B
nullable
ùùC K
:
ùùK L
false
ùùM R
)
ùùR S
.
ûû 

Annotation
ûû #
(
ûû# $
$str
ûû$ 3
,
ûû3 4
$str
ûû5 >
)
ûû> ?
,
ûû? @
Amount
üü 
=
üü 
table
üü "
.
üü" #
Column
üü# )
<
üü) *
decimal
üü* 1
>
üü1 2
(
üü2 3
type
üü3 7
:
üü7 8
$str
üü9 I
,
üüI J
nullable
üüK S
:
üüS T
false
üüU Z
)
üüZ [
}
†† 
,
†† 
constraints
°° 
:
°° 
table
°° "
=>
°°# %
{
¢¢ 
table
££ 
.
££ 

PrimaryKey
££ $
(
££$ %
$str
££% ;
,
££; <
x
££= >
=>
££? A
x
££B C
.
££C D
Id
££D F
)
££F G
;
££G H
table
§§ 
.
§§ 

ForeignKey
§§ $
(
§§$ %
name
•• 
:
•• 
$str
•• G
,
••G H
column
¶¶ 
:
¶¶ 
x
¶¶  !
=>
¶¶" $
x
¶¶% &
.
¶¶& '
	PayslipId
¶¶' 0
,
¶¶0 1
principalTable
ßß &
:
ßß& '
$str
ßß( 2
,
ßß2 3
principalColumn
®® '
:
®®' (
$str
®®) -
,
®®- .
onDelete
©©  
:
©©  !
ReferentialAction
©©" 3
.
©©3 4
Cascade
©©4 ;
)
©©; <
;
©©< =
}
™™ 
)
™™ 
.
´´ 

Annotation
´´ 
(
´´ 
$str
´´ +
,
´´+ ,
$str
´´- 6
)
´´6 7
;
´´7 8
migrationBuilder
≠≠ 
.
≠≠ 
CreateTable
≠≠ (
(
≠≠( )
name
ÆÆ 
:
ÆÆ 
$str
ÆÆ )
,
ÆÆ) *
columns
ØØ 
:
ØØ 
table
ØØ 
=>
ØØ !
new
ØØ" %
{
∞∞ 
Id
±± 
=
±± 
table
±± 
.
±± 
Column
±± %
<
±±% &
int
±±& )
>
±±) *
(
±±* +
type
±±+ /
:
±±/ 0
$str
±±1 6
,
±±6 7
nullable
±±8 @
:
±±@ A
false
±±B G
)
±±G H
.
≤≤ 

Annotation
≤≤ #
(
≤≤# $
$str
≤≤$ C
,
≤≤C D*
MySqlValueGenerationStrategy
≤≤E a
.
≤≤a b
IdentityColumn
≤≤b p
)
≤≤p q
,
≤≤q r
	PayslipId
≥≥ 
=
≥≥ 
table
≥≥  %
.
≥≥% &
Column
≥≥& ,
<
≥≥, -
int
≥≥- 0
>
≥≥0 1
(
≥≥1 2
type
≥≥2 6
:
≥≥6 7
$str
≥≥8 =
,
≥≥= >
nullable
≥≥? G
:
≥≥G H
false
≥≥I N
)
≥≥N O
,
≥≥O P
Label
¥¥ 
=
¥¥ 
table
¥¥ !
.
¥¥! "
Column
¥¥" (
<
¥¥( )
string
¥¥) /
>
¥¥/ 0
(
¥¥0 1
type
¥¥1 5
:
¥¥5 6
$str
¥¥7 A
,
¥¥A B
nullable
¥¥C K
:
¥¥K L
false
¥¥M R
)
¥¥R S
.
µµ 

Annotation
µµ #
(
µµ# $
$str
µµ$ 3
,
µµ3 4
$str
µµ5 >
)
µµ> ?
,
µµ? @
Amount
∂∂ 
=
∂∂ 
table
∂∂ "
.
∂∂" #
Column
∂∂# )
<
∂∂) *
decimal
∂∂* 1
>
∂∂1 2
(
∂∂2 3
type
∂∂3 7
:
∂∂7 8
$str
∂∂9 I
,
∂∂I J
nullable
∂∂K S
:
∂∂S T
false
∂∂U Z
)
∂∂Z [
}
∑∑ 
,
∑∑ 
constraints
∏∏ 
:
∏∏ 
table
∏∏ "
=>
∏∏# %
{
ππ 
table
∫∫ 
.
∫∫ 

PrimaryKey
∫∫ $
(
∫∫$ %
$str
∫∫% ;
,
∫∫; <
x
∫∫= >
=>
∫∫? A
x
∫∫B C
.
∫∫C D
Id
∫∫D F
)
∫∫F G
;
∫∫G H
table
ªª 
.
ªª 

ForeignKey
ªª $
(
ªª$ %
name
ºº 
:
ºº 
$str
ºº G
,
ººG H
column
ΩΩ 
:
ΩΩ 
x
ΩΩ  !
=>
ΩΩ" $
x
ΩΩ% &
.
ΩΩ& '
	PayslipId
ΩΩ' 0
,
ΩΩ0 1
principalTable
ææ &
:
ææ& '
$str
ææ( 2
,
ææ2 3
principalColumn
øø '
:
øø' (
$str
øø) -
,
øø- .
onDelete
¿¿  
:
¿¿  !
ReferentialAction
¿¿" 3
.
¿¿3 4
Cascade
¿¿4 ;
)
¿¿; <
;
¿¿< =
}
¡¡ 
)
¡¡ 
.
¬¬ 

Annotation
¬¬ 
(
¬¬ 
$str
¬¬ +
,
¬¬+ ,
$str
¬¬- 6
)
¬¬6 7
;
¬¬7 8
migrationBuilder
ƒƒ 
.
ƒƒ 

InsertData
ƒƒ '
(
ƒƒ' (
table
≈≈ 
:
≈≈ 
$str
≈≈ $
,
≈≈$ %
columns
∆∆ 
:
∆∆ 
new
∆∆ 
[
∆∆ 
]
∆∆ 
{
∆∆  
$str
∆∆! %
,
∆∆% &
$str
∆∆' 2
,
∆∆2 3
$str
∆∆4 ?
,
∆∆? @
$str
∆∆A G
,
∆∆G H
$str
∆∆I T
,
∆∆T U
$str
∆∆V a
}
∆∆b c
,
∆∆c d
values
«« 
:
«« 
new
«« 
object
«« "
[
««" #
,
««# $
]
««$ %
{
»» 
{
…… 
$num
…… 
,
…… 
new
…… 
DateTime
…… %
(
……% &
$num
……& *
,
……* +
$num
……, -
,
……- .
$num
……/ 1
,
……1 2
$num
……3 5
,
……5 6
$num
……7 9
,
……9 :
$num
……; =
,
……= >
$num
……? B
,
……B C
DateTimeKind
……D P
.
……P Q
Utc
……Q T
)
……T U
.
……U V
AddTicks
……V ^
(
……^ _
$num
……_ c
)
……c d
,
……d e
null
……f j
,
……j k
$str
……l y
,
……y z
null
……{ 
,…… Ä
null……Å Ö
}……Ü á
,……á à
{
   
$num
   
,
   
new
   
DateTime
   %
(
  % &
$num
  & *
,
  * +
$num
  , -
,
  - .
$num
  / 1
,
  1 2
$num
  3 5
,
  5 6
$num
  7 9
,
  9 :
$num
  ; =
,
  = >
$num
  ? B
,
  B C
DateTimeKind
  D P
.
  P Q
Utc
  Q T
)
  T U
.
  U V
AddTicks
  V ^
(
  ^ _
$num
  _ c
)
  c d
,
  d e
null
  f j
,
  j k
$str
  l u
,
  u v
null
  w {
,
  { |
null  } Å
}  Ç É
,  É Ñ
{
ÀÀ 
$num
ÀÀ 
,
ÀÀ 
new
ÀÀ 
DateTime
ÀÀ %
(
ÀÀ% &
$num
ÀÀ& *
,
ÀÀ* +
$num
ÀÀ, -
,
ÀÀ- .
$num
ÀÀ/ 1
,
ÀÀ1 2
$num
ÀÀ3 5
,
ÀÀ5 6
$num
ÀÀ7 9
,
ÀÀ9 :
$num
ÀÀ; =
,
ÀÀ= >
$num
ÀÀ? B
,
ÀÀB C
DateTimeKind
ÀÀD P
.
ÀÀP Q
Utc
ÀÀQ T
)
ÀÀT U
.
ÀÀU V
AddTicks
ÀÀV ^
(
ÀÀ^ _
$num
ÀÀ_ c
)
ÀÀc d
,
ÀÀd e
null
ÀÀf j
,
ÀÀj k
$str
ÀÀl w
,
ÀÀw x
null
ÀÀy }
,
ÀÀ} ~
nullÀÀ É
}ÀÀÑ Ö
,ÀÀÖ Ü
{
ÃÃ 
$num
ÃÃ 
,
ÃÃ 
new
ÃÃ 
DateTime
ÃÃ %
(
ÃÃ% &
$num
ÃÃ& *
,
ÃÃ* +
$num
ÃÃ, -
,
ÃÃ- .
$num
ÃÃ/ 1
,
ÃÃ1 2
$num
ÃÃ3 5
,
ÃÃ5 6
$num
ÃÃ7 9
,
ÃÃ9 :
$num
ÃÃ; =
,
ÃÃ= >
$num
ÃÃ? B
,
ÃÃB C
DateTimeKind
ÃÃD P
.
ÃÃP Q
Utc
ÃÃQ T
)
ÃÃT U
.
ÃÃU V
AddTicks
ÃÃV ^
(
ÃÃ^ _
$num
ÃÃ_ c
)
ÃÃc d
,
ÃÃd e
null
ÃÃf j
,
ÃÃj k
$str
ÃÃl s
,
ÃÃs t
null
ÃÃu y
,
ÃÃy z
null
ÃÃ{ 
}ÃÃÄ Å
,ÃÃÅ Ç
{
ÕÕ 
$num
ÕÕ 
,
ÕÕ 
new
ÕÕ 
DateTime
ÕÕ %
(
ÕÕ% &
$num
ÕÕ& *
,
ÕÕ* +
$num
ÕÕ, -
,
ÕÕ- .
$num
ÕÕ/ 1
,
ÕÕ1 2
$num
ÕÕ3 5
,
ÕÕ5 6
$num
ÕÕ7 9
,
ÕÕ9 :
$num
ÕÕ; =
,
ÕÕ= >
$num
ÕÕ? B
,
ÕÕB C
DateTimeKind
ÕÕD P
.
ÕÕP Q
Utc
ÕÕQ T
)
ÕÕT U
.
ÕÕU V
AddTicks
ÕÕV ^
(
ÕÕ^ _
$num
ÕÕ_ c
)
ÕÕc d
,
ÕÕd e
null
ÕÕf j
,
ÕÕj k
$str
ÕÕl x
,
ÕÕx y
null
ÕÕz ~
,
ÕÕ~ 
nullÕÕÄ Ñ
}ÕÕÖ Ü
,ÕÕÜ á
{
ŒŒ 
$num
ŒŒ 
,
ŒŒ 
new
ŒŒ 
DateTime
ŒŒ %
(
ŒŒ% &
$num
ŒŒ& *
,
ŒŒ* +
$num
ŒŒ, -
,
ŒŒ- .
$num
ŒŒ/ 1
,
ŒŒ1 2
$num
ŒŒ3 5
,
ŒŒ5 6
$num
ŒŒ7 9
,
ŒŒ9 :
$num
ŒŒ; =
,
ŒŒ= >
$num
ŒŒ? B
,
ŒŒB C
DateTimeKind
ŒŒD P
.
ŒŒP Q
Utc
ŒŒQ T
)
ŒŒT U
.
ŒŒU V
AddTicks
ŒŒV ^
(
ŒŒ^ _
$num
ŒŒ_ c
)
ŒŒc d
,
ŒŒd e
null
ŒŒf j
,
ŒŒj k
$str
ŒŒl x
,
ŒŒx y
null
ŒŒz ~
,
ŒŒ~ 
nullŒŒÄ Ñ
}ŒŒÖ Ü
,ŒŒÜ á
{
œœ 
$num
œœ 
,
œœ 
new
œœ 
DateTime
œœ %
(
œœ% &
$num
œœ& *
,
œœ* +
$num
œœ, -
,
œœ- .
$num
œœ/ 1
,
œœ1 2
$num
œœ3 5
,
œœ5 6
$num
œœ7 9
,
œœ9 :
$num
œœ; =
,
œœ= >
$num
œœ? B
,
œœB C
DateTimeKind
œœD P
.
œœP Q
Utc
œœQ T
)
œœT U
.
œœU V
AddTicks
œœV ^
(
œœ^ _
$num
œœ_ c
)
œœc d
,
œœd e
null
œœf j
,
œœj k
$str
œœl q
,
œœq r
null
œœs w
,
œœw x
null
œœy }
}
œœ~ 
,œœ Ä
{
–– 
$num
–– 
,
–– 
new
–– 
DateTime
–– %
(
––% &
$num
––& *
,
––* +
$num
––, -
,
––- .
$num
––/ 1
,
––1 2
$num
––3 5
,
––5 6
$num
––7 9
,
––9 :
$num
––; =
,
––= >
$num
––? B
,
––B C
DateTimeKind
––D P
.
––P Q
Utc
––Q T
)
––T U
.
––U V
AddTicks
––V ^
(
––^ _
$num
––_ c
)
––c d
,
––d e
null
––f j
,
––j k
$str
––l ~
,
––~ 
null––Ä Ñ
,––Ñ Ö
null––Ü ä
}––ã å
,––å ç
{
—— 
$num
—— 
,
—— 
new
—— 
DateTime
—— %
(
——% &
$num
——& *
,
——* +
$num
——, -
,
——- .
$num
——/ 1
,
——1 2
$num
——3 5
,
——5 6
$num
——7 9
,
——9 :
$num
——; =
,
——= >
$num
——? B
,
——B C
DateTimeKind
——D P
.
——P Q
Utc
——Q T
)
——T U
.
——U V
AddTicks
——V ^
(
——^ _
$num
——_ c
)
——c d
,
——d e
null
——f j
,
——j k
$str
——l p
,
——p q
null
——r v
,
——v w
null
——x |
}
——} ~
}
““ 
)
““ 
;
““ 
migrationBuilder
‘‘ 
.
‘‘ 

InsertData
‘‘ '
(
‘‘' (
table
’’ 
:
’’ 
$str
’’ 
,
’’ 
columns
÷÷ 
:
÷÷ 
new
÷÷ 
[
÷÷ 
]
÷÷ 
{
÷÷  
$str
÷÷! %
,
÷÷% &
$str
÷÷' 2
,
÷÷2 3
$str
÷÷4 ?
,
÷÷? @
$str
÷÷A H
,
÷÷H I
$str
÷÷J T
,
÷÷T U
$str
÷÷V `
,
÷÷` a
$str
÷÷b p
,
÷÷p q
$str
÷÷r x
,
÷÷x y
$str÷÷z Ö
,÷÷Ö Ü
$str÷÷á í
}÷÷ì î
,÷÷î ï
values
◊◊ 
:
◊◊ 
new
◊◊ 
object
◊◊ "
[
◊◊" #
]
◊◊# $
{
◊◊% &
$num
◊◊' (
,
◊◊( )
new
◊◊* -
DateTime
◊◊. 6
(
◊◊6 7
$num
◊◊7 ;
,
◊◊; <
$num
◊◊= >
,
◊◊> ?
$num
◊◊@ B
,
◊◊B C
$num
◊◊D F
,
◊◊F G
$num
◊◊H J
,
◊◊J K
$num
◊◊L N
,
◊◊N O
$num
◊◊P S
,
◊◊S T
DateTimeKind
◊◊U a
.
◊◊a b
Utc
◊◊b e
)
◊◊e f
.
◊◊f g
AddTicks
◊◊g o
(
◊◊o p
$num
◊◊p s
)
◊◊s t
,
◊◊t u
null
◊◊v z
,
◊◊z {
$str◊◊| ó
,◊◊ó ò
$str◊◊ô ß
,◊◊ß ®
true◊◊© ≠
,◊◊≠ Æ
$str◊◊Ø Ì
,◊◊Ì Ó
$num◊◊Ô 
,◊◊ Ò
null◊◊Ú ˆ
,◊◊ˆ ˜
null◊◊¯ ¸
}◊◊˝ ˛
)◊◊˛ ˇ
;◊◊ˇ Ä
migrationBuilder
ŸŸ 
.
ŸŸ 
CreateIndex
ŸŸ (
(
ŸŸ( )
name
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ 7
,
⁄⁄7 8
table
€€ 
:
€€ 
$str
€€ &
,
€€& '
column
‹‹ 
:
‹‹ 
$str
‹‹ (
)
‹‹( )
;
‹‹) *
migrationBuilder
ﬁﬁ 
.
ﬁﬁ 
CreateIndex
ﬁﬁ (
(
ﬁﬁ( )
name
ﬂﬂ 
:
ﬂﬂ 
$str
ﬂﬂ 7
,
ﬂﬂ7 8
table
‡‡ 
:
‡‡ 
$str
‡‡ &
,
‡‡& '
column
·· 
:
·· 
$str
·· (
)
··( )
;
··) *
migrationBuilder
„„ 
.
„„ 
CreateIndex
„„ (
(
„„( )
name
‰‰ 
:
‰‰ 
$str
‰‰ 8
,
‰‰8 9
table
ÂÂ 
:
ÂÂ 
$str
ÂÂ &
,
ÂÂ& '
column
ÊÊ 
:
ÊÊ 
$str
ÊÊ )
)
ÊÊ) *
;
ÊÊ* +
migrationBuilder
ËË 
.
ËË 
CreateIndex
ËË (
(
ËË( )
name
ÈÈ 
:
ÈÈ 
$str
ÈÈ :
,
ÈÈ: ;
table
ÍÍ 
:
ÍÍ 
$str
ÍÍ &
,
ÍÍ& '
column
ÎÎ 
:
ÎÎ 
$str
ÎÎ +
)
ÎÎ+ ,
;
ÎÎ, -
migrationBuilder
ÌÌ 
.
ÌÌ 
CreateIndex
ÌÌ (
(
ÌÌ( )
name
ÓÓ 
:
ÓÓ 
$str
ÓÓ 8
,
ÓÓ8 9
table
ÔÔ 
:
ÔÔ 
$str
ÔÔ )
,
ÔÔ) *
column
 
:
 
$str
 &
)
& '
;
' (
migrationBuilder
ÚÚ 
.
ÚÚ 
CreateIndex
ÚÚ (
(
ÚÚ( )
name
ÛÛ 
:
ÛÛ 
$str
ÛÛ 2
,
ÛÛ2 3
table
ÙÙ 
:
ÙÙ 
$str
ÙÙ )
,
ÙÙ) *
column
ıı 
:
ıı 
$str
ıı  
,
ıı  !
unique
ˆˆ 
:
ˆˆ 
true
ˆˆ 
)
ˆˆ 
;
ˆˆ 
migrationBuilder
¯¯ 
.
¯¯ 
CreateIndex
¯¯ (
(
¯¯( )
name
˘˘ 
:
˘˘ 
$str
˘˘ 6
,
˘˘6 7
table
˙˙ 
:
˙˙ 
$str
˙˙ *
,
˙˙* +
column
˚˚ 
:
˚˚ 
$str
˚˚ #
)
˚˚# $
;
˚˚$ %
migrationBuilder
˝˝ 
.
˝˝ 
CreateIndex
˝˝ (
(
˝˝( )
name
˛˛ 
:
˛˛ 
$str
˛˛ 6
,
˛˛6 7
table
ˇˇ 
:
ˇˇ 
$str
ˇˇ *
,
ˇˇ* +
column
ÄÄ 
:
ÄÄ 
$str
ÄÄ #
)
ÄÄ# $
;
ÄÄ$ %
migrationBuilder
ÇÇ 
.
ÇÇ 
CreateIndex
ÇÇ (
(
ÇÇ( )
name
ÉÉ 
:
ÉÉ 
$str
ÉÉ 3
,
ÉÉ3 4
table
ÑÑ 
:
ÑÑ 
$str
ÑÑ !
,
ÑÑ! "
column
ÖÖ 
:
ÖÖ 
$str
ÖÖ )
)
ÖÖ) *
;
ÖÖ* +
migrationBuilder
áá 
.
áá 
CreateIndex
áá (
(
áá( )
name
àà 
:
àà 
$str
àà 5
,
àà5 6
table
ââ 
:
ââ 
$str
ââ !
,
ââ! "
column
ää 
:
ää 
$str
ää +
)
ää+ ,
;
ää, -
migrationBuilder
åå 
.
åå 
CreateIndex
åå (
(
åå( )
name
çç 
:
çç 
$str
çç &
,
çç& '
table
éé 
:
éé 
$str
éé 
,
éé 
column
èè 
:
èè 
$str
èè 
,
èè  
unique
êê 
:
êê 
true
êê 
)
êê 
;
êê 
}
ëë 	
	protected
îî 
override
îî 
void
îî 
Down
îî  $
(
îî$ %
MigrationBuilder
îî% 5
migrationBuilder
îî6 F
)
îîF G
{
ïï 	
migrationBuilder
ññ 
.
ññ 
	DropTable
ññ &
(
ññ& '
name
óó 
:
óó 
$str
óó !
)
óó! "
;
óó" #
migrationBuilder
ôô 
.
ôô 
	DropTable
ôô &
(
ôô& '
name
öö 
:
öö 
$str
öö %
)
öö% &
;
öö& '
migrationBuilder
úú 
.
úú 
	DropTable
úú &
(
úú& '
name
ùù 
:
ùù 
$str
ùù %
)
ùù% &
;
ùù& '
migrationBuilder
üü 
.
üü 
	DropTable
üü &
(
üü& '
name
†† 
:
†† 
$str
†† %
)
††% &
;
††& '
migrationBuilder
¢¢ 
.
¢¢ 
	DropTable
¢¢ &
(
¢¢& '
name
££ 
:
££ 
$str
££ )
)
££) *
;
££* +
migrationBuilder
•• 
.
•• 
	DropTable
•• &
(
••& '
name
¶¶ 
:
¶¶ 
$str
¶¶ )
)
¶¶) *
;
¶¶* +
migrationBuilder
®® 
.
®® 
	DropTable
®® &
(
®®& '
name
©© 
:
©© 
$str
©© %
)
©©% &
;
©©& '
migrationBuilder
´´ 
.
´´ 
	DropTable
´´ &
(
´´& '
name
¨¨ 
:
¨¨ 
$str
¨¨  
)
¨¨  !
;
¨¨! "
migrationBuilder
ÆÆ 
.
ÆÆ 
	DropTable
ÆÆ &
(
ÆÆ& '
name
ØØ 
:
ØØ 
$str
ØØ (
)
ØØ( )
;
ØØ) *
migrationBuilder
±± 
.
±± 
	DropTable
±± &
(
±±& '
name
≤≤ 
:
≤≤ 
$str
≤≤ #
)
≤≤# $
;
≤≤$ %
migrationBuilder
¥¥ 
.
¥¥ 
	DropTable
¥¥ &
(
¥¥& '
name
µµ 
:
µµ 
$str
µµ 
)
µµ 
;
µµ 
}
∂∂ 	
}
∑∑ 
}∏∏ Œ
FD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\DTOs\MemoDtos.cs
	namespace 	

PayrollApi
 
. 
DTOs 
{ 
public 

class 
MemoDto 
{ 
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
Content 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ˘h
DD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\DTOs\HRDtos.cs
	namespace 	

PayrollApi
 
. 
DTOs 
{ 
public 

class 
CTCLineItem 
{ 
public 
string 
Label 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
decimal 
Amount 
{ 
get  #
;# $
set% (
;( )
}* +
} 
public		 

class		 

CTCRequest		 
{

 
public 
decimal 
Basic 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 
HRA 
{ 
get  
;  !
set" %
;% &
}' (
public 
List 
< 
CTCLineItem 
>  
AllowanceItems! /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
=> ?
new@ C
(C D
)D E
;E F
public 
List 
< 
CTCLineItem 
>  
DeductionItems! /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
=> ?
new@ C
(C D
)D E
;E F
public 
decimal 

TaxPercent !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
EffectiveFrom %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
List 
< 
int 
> 
EmployeeUserIds (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
=7 8
new9 <
(< =
)= >
;> ?
} 
public 

class 
CTCBatchRequest  
{ 
public 
List 
< 
int 
> 
EmployeeUserIds (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
=7 8
new9 <
(< =
)= >
;> ?
public 
decimal 
Basic 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 
HRA 
{ 
get  
;  !
set" %
;% &
}' (
public 
List 
< 
CTCLineItem 
>  
AllowanceItems! /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
=> ?
new@ C
(C D
)D E
;E F
public 
List 
< 
CTCLineItem 
>  
DeductionItems! /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
=> ?
new@ C
(C D
)D E
;E F
public 
decimal 

TaxPercent !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
EffectiveFrom %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
public 

class  
PayslipCreateRequest %
{ 
public 
int 
EmployeeUserId !
{" #
get$ '
;' (
set) ,
;, -
}. /
public   
int   
Year   
{   
get   
;   
set   "
;  " #
}  $ %
public!! 
int!! 
Month!! 
{!! 
get!! 
;!! 
set!!  #
;!!# $
}!!% &
public"" 
int"" 
LOPDays"" 
{"" 
get""  
;""  !
set""" %
;""% &
}""' (
public## 
decimal## 
?## 
OverridesAllowances## +
{##, -
get##. 1
;##1 2
set##3 6
;##6 7
}##8 9
public$$ 
decimal$$ 
?$$ 
OverridesDeductions$$ +
{$$, -
get$$. 1
;$$1 2
set$$3 6
;$$6 7
}$$8 9
}%% 
public&& 

class&& 
PayslipFilter&& 
{'' 
public(( 
int(( 
?(( 
DepartmentId((  
{((! "
get((# &
;((& '
set((( +
;((+ ,
}((- .
public)) 
int)) 
?)) 
Year)) 
{)) 
get)) 
;)) 
set))  #
;))# $
}))% &
public** 
int** 
?** 
Month** 
{** 
get** 
;**  
set**! $
;**$ %
}**& '
public++ 
string++ 
?++ 
Search++ 
{++ 
get++  #
;++# $
set++% (
;++( )
}++* +
public,, 
int,, 
Page,, 
{,, 
get,, 
;,, 
set,, "
;,," #
},,$ %
=,,& '
$num,,( )
;,,) *
public-- 
int-- 
PageSize-- 
{-- 
get-- !
;--! "
set--# &
;--& '
}--( )
=--* +
$num--, .
;--. /
}.. 
public// 

class// 
CTCResponse// 
{00 
public11 
int11 
Id11 
{11 
get11 
;11 
set11  
;11  !
}11" #
public22 
int22 
EmployeeProfileId22 $
{22% &
get22' *
;22* +
set22, /
;22/ 0
}221 2
public33 
decimal33 
Basic33 
{33 
get33 "
;33" #
set33$ '
;33' (
}33) *
public44 
decimal44 
HRA44 
{44 
get44  
;44  !
set44" %
;44% &
}44' (
public55 
List55 
<55 
CTCComponentDto55 #
>55# $
AllowanceItems55% 3
{554 5
get556 9
;559 :
set55; >
;55> ?
}55@ A
=55B C
new55D G
(55G H
)55H I
;55I J
public66 
List66 
<66 
CTCComponentDto66 #
>66# $
DeductionItems66% 3
{664 5
get666 9
;669 :
set66; >
;66> ?
}66@ A
=66B C
new66D G
(66G H
)66H I
;66I J
public77 
decimal77 

Allowances77 !
=>77" $
AllowanceItems77% 3
.773 4
Sum774 7
(777 8
a778 9
=>77: <
a77= >
.77> ?
Amount77? E
)77E F
;77F G
public88 
decimal88 

Deductions88 !
=>88" $
DeductionItems88% 3
.883 4
Sum884 7
(887 8
d888 9
=>88: <
d88= >
.88> ?
Amount88? E
)88E F
;88F G
public99 
decimal99 

TaxPercent99 !
{99" #
get99$ '
;99' (
set99) ,
;99, -
}99. /
public:: 
decimal:: 
GrossCTC:: 
{::  !
get::" %
;::% &
set::' *
;::* +
}::, -
public;; 
DateTime;; 
EffectiveFrom;; %
{;;& '
get;;( +
;;;+ ,
set;;- 0
;;;0 1
};;2 3
public<< 
bool<< 

IsApproved<< 
{<<  
get<<! $
;<<$ %
set<<& )
;<<) *
}<<+ ,
}== 
public>> 

class>> 
CTCBatchResult>> 
{?? 
public@@ 
int@@ 

EmployeeId@@ 
{@@ 
get@@  #
;@@# $
set@@% (
;@@( )
}@@* +
publicAA 
stringAA 
EmployeeAA 
{AA  
getAA! $
;AA$ %
setAA& )
;AA) *
}AA+ ,
=AA- .
stringAA/ 5
.AA5 6
EmptyAA6 ;
;AA; <
publicBB 
stringBB 
EmailBB 
{BB 
getBB !
;BB! "
setBB# &
;BB& '
}BB( )
=BB* +
stringBB, 2
.BB2 3
EmptyBB3 8
;BB8 9
publicCC 
stringCC 
StatusCC 
{CC 
getCC "
;CC" #
setCC$ '
;CC' (
}CC) *
=CC+ ,
stringCC- 3
.CC3 4
EmptyCC4 9
;CC9 :
publicDD 
stringDD 
?DD 
MessageDD 
{DD  
getDD! $
;DD$ %
setDD& )
;DD) *
}DD+ ,
}EE 
publicFF 

classFF 
CTCComponentDtoFF  
{GG 
publicHH 
stringHH 
LabelHH 
{HH 
getHH !
;HH! "
setHH# &
;HH& '
}HH( )
=HH* +
stringHH, 2
.HH2 3
EmptyHH3 8
;HH8 9
publicII 
decimalII 
AmountII 
{II 
getII  #
;II# $
setII% (
;II( )
}II* +
}JJ 
publicKK 

classKK 
PayslipResponseKK  
{LL 
publicMM 
intMM 
IdMM 
{MM 
getMM 
;MM 
setMM  
;MM  !
}MM" #
publicNN 
intNN 
YearNN 
{NN 
getNN 
;NN 
setNN "
;NN" #
}NN$ %
publicOO 
intOO 
MonthOO 
{OO 
getOO 
;OO 
setOO  #
;OO# $
}OO% &
publicPP 
decimalPP 
BasicPP 
{PP 
getPP "
;PP" #
setPP$ '
;PP' (
}PP) *
publicQQ 
decimalQQ 
HRAQQ 
{QQ 
getQQ  
;QQ  !
setQQ" %
;QQ% &
}QQ' (
publicRR 
ListRR 
<RR 
PayslipItemDtoRR "
>RR" #
AllowanceItemsRR$ 2
{RR3 4
getRR5 8
;RR8 9
setRR: =
;RR= >
}RR? @
=RRA B
newRRC F
(RRF G
)RRG H
;RRH I
publicSS 
ListSS 
<SS 
PayslipItemDtoSS "
>SS" #
DeductionItemsSS$ 2
{SS3 4
getSS5 8
;SS8 9
setSS: =
;SS= >
}SS? @
=SSA B
newSSC F
(SSF G
)SSG H
;SSH I
publicTT 
decimalTT 

AllowancesTT !
=>TT" $
AllowanceItemsTT% 3
.TT3 4
SumTT4 7
(TT7 8
aTT8 9
=>TT: <
aTT= >
.TT> ?
AmountTT? E
)TTE F
;TTF G
publicUU 
decimalUU 

DeductionsUU !
=>UU" $
DeductionItemsUU% 3
.UU3 4
SumUU4 7
(UU7 8
dUU8 9
=>UU: <
dUU= >
.UU> ?
AmountUU? E
)UUE F
;UUF G
publicVV 
decimalVV 
TaxDeductedVV "
{VV# $
getVV% (
;VV( )
setVV* -
;VV- .
}VV/ 0
publicWW 
intWW 
LOPDaysWW 
{WW 
getWW  
;WW  !
setWW" %
;WW% &
}WW' (
publicXX 
decimalXX 
NetPayXX 
{XX 
getXX  #
;XX# $
setXX% (
;XX( )
}XX* +
publicYY 
ApprovalStatusYY 
StatusYY $
{YY% &
getYY' *
;YY* +
setYY, /
;YY/ 0
}YY1 2
publicZZ 
boolZZ 

IsReleasedZZ 
{ZZ  
getZZ! $
;ZZ$ %
setZZ& )
;ZZ) *
}ZZ+ ,
}[[ 
public\\ 

class\\ 
PayslipItemDto\\ 
{]] 
public^^ 
string^^ 
Label^^ 
{^^ 
get^^ !
;^^! "
set^^# &
;^^& '
}^^( )
=^^* +
string^^, 2
.^^2 3
Empty^^3 8
;^^8 9
public__ 
decimal__ 
Amount__ 
{__ 
get__  #
;__# $
set__% (
;__( )
}__* +
}`` 
}aa í
JD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\DTOs\EmployeeDtos.cs
	namespace 	

PayrollApi
 
. 
DTOs 
{ 
public 

class !
EmployeeProfileUpdate &
{ 
public 
string 
? 
Address 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
? 
Phone 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
?		 
DepartmentId		  
{		! "
get		# &
;		& '
set		( +
;		+ ,
}		- .
}

 
public 

class 
PayslipSummary 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
Year 
{ 
get 
; 
set "
;" #
}$ %
public 
int 
Month 
{ 
get 
; 
set  #
;# $
}% &
public 
decimal 
NetPay 
{ 
get  #
;# $
set% (
;( )
}* +
public 
ApprovalStatus 
Status $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
bool 

IsReleased 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Ô
HD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\DTOs\CommonDtos.cs
	namespace 	

PayrollApi
 
. 
DTOs 
{ 
public 

class 
PagedResult 
< 
T 
> 
{ 
public 
int 
Page 
{ 
get 
; 
set "
;" #
}$ %
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
Total 
{ 
get 
; 
set  #
;# $
}% &
public 
IEnumerable 
< 
T 
> 
Items #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3

Enumerable4 >
.> ?
Empty? D
<D E
TE F
>F G
(G H
)H I
;I J
}		 
}

 §
FD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\DTOs\AuthDtos.cs
	namespace 	

PayrollApi
 
. 
DTOs 
{ 
public 

class 
RegisterRequest  
{ 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
default, 3
!3 4
;4 5
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
default/ 6
!6 7
;7 8
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
default/ 6
!6 7
;7 8
public 
string 
Role 
{ 
get  
;  !
set" %
;% &
}' (
=) *
default+ 2
!2 3
;3 4
}		 
public 

class 
LoginRequest 
{ 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
default, 3
!3 4
;4 5
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
default/ 6
!6 7
;7 8
} 
public 

class 
AuthResponse 
{ 
public 
string 
Token 
{ 
get !
;! "
set# &
;& '
}( )
=* +
default, 3
!3 4
;4 5
public 
string 
Role 
{ 
get  
;  !
set" %
;% &
}' (
=) *
default+ 2
!2 3
;3 4
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
default/ 6
!6 7
;7 8
public 
bool 
ProfileCompleted $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DateTime 
ExpiresAtUtc $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
public 

class  
ResetPasswordRequest %
{ 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
default, 3
!3 4
;4 5
} 
public   

class   
NewPasswordRequest   #
{!! 
public"" 
string"" 
Email"" 
{"" 
get"" !
;""! "
set""# &
;""& '
}""( )
=""* +
default"", 3
!""3 4
;""4 5
public## 
string## 
NewPassword## !
{##" #
get##$ '
;##' (
set##) ,
;##, -
}##. /
=##0 1
default##2 9
!##9 :
;##: ;
public$$ 
string$$ 
Otp$$ 
{$$ 
get$$ 
;$$  
set$$! $
;$$$ %
}$$& '
=$$( )
default$$* 1
!$$1 2
;$$2 3
}%% 
}&& Ê
GD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\DTOs\AdminDtos.cs
	namespace 	

PayrollApi
 
. 
DTOs 
{ 
public 

class %
CreateSkeletalUserRequest *
{ 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
default, 3
!3 4
;4 5
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
default/ 6
!6 7
;7 8
public 
string 
Role 
{ 
get  
;  !
set" %
;% &
}' (
=) *
default+ 2
!2 3
;3 4
public 
int 
? 
DepartmentId  
{! "
get# &
;& '
set( +
;+ ,
}- .
}		 
public 

class 
UserListItem 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
default, 3
!3 4
;4 5
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
default/ 6
!6 7
;7 8
public 
string 
Role 
{ 
get  
;  !
set" %
;% &
}' (
=) *
default+ 2
!2 3
;3 4
public 
bool 
IsActive 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 

Department !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
public 

class 
AssignRoleRequest "
{ 
public 
string 
Role 
{ 
get  
;  !
set" %
;% &
}' (
=) *
default+ 2
!2 3
;3 4
} 
} úq
JD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Data\AppDbContext.cs
	namespace 	

PayrollApi
 
. 
Data 
{ 
public 

class 
AppDbContext 
: 
	DbContext  )
{ 
public		 
AppDbContext		 
(		 
DbContextOptions		 ,
options		- 4
)		4 5
:

 
base

 
(

 
options

 
)

 
{

 
}

 
public 
DbSet 
< 
User 
> 
Users  
=>! #
Set$ '
<' (
User( ,
>, -
(- .
). /
;/ 0
public 
DbSet 
< 

Department 
>  
Departments! ,
=>- /
Set0 3
<3 4

Department4 >
>> ?
(? @
)@ A
;A B
public 
DbSet 
< 
EmployeeProfile $
>$ %
EmployeeProfiles& 6
=>7 9
Set: =
<= >
EmployeeProfile> M
>M N
(N O
)O P
;P Q
public 
DbSet 
< 
CTCStructure !
>! "
CTCStructures# 0
=>1 3
Set4 7
<7 8
CTCStructure8 D
>D E
(E F
)F G
;G H
public 
DbSet 
< 
CTCAllowance !
>! "
CTCAllowances# 0
=>1 3
Set4 7
<7 8
CTCAllowance8 D
>D E
(E F
)F G
;G H
public 
DbSet 
< 
CTCDeduction !
>! "
CTCDeductions# 0
=>1 3
Set4 7
<7 8
CTCDeduction8 D
>D E
(E F
)F G
;G H
public 
DbSet 
< 
Payslip 
> 
Payslips &
=>' )
Set* -
<- .
Payslip. 5
>5 6
(6 7
)7 8
;8 9
public 
DbSet 
< 
PayslipAllowance %
>% &
PayslipAllowances' 8
=>9 ;
Set< ?
<? @
PayslipAllowance@ P
>P Q
(Q R
)R S
;S T
public 
DbSet 
< 
PayslipDeduction %
>% &
PayslipDeductions' 8
=>9 ;
Set< ?
<? @
PayslipDeduction@ P
>P Q
(Q R
)R S
;S T
public 
DbSet 
< 
Notification !
>! "
Notifications# 0
=>1 3
Set4 7
<7 8
Notification8 D
>D E
(E F
)F G
;G H
public 
DbSet 
< 
AuditLog 
> 
	AuditLogs (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
DbSet 
< 
Memo 
> 
Memos  
{! "
get# &
;& '
set( +
;+ ,
}- .
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
User  $
>$ %
(% &
)& '
.' (
HasIndex( 0
(0 1
u1 2
=>3 5
u6 7
.7 8
Email8 =
)= >
.> ?
IsUnique? G
(G H
)H I
;I J
modelBuilder 
. 
Entity 
<  
CTCStructure  ,
>, -
(- .
). /
./ 0
Ignore0 6
(6 7
c7 8
=>9 ;
c< =
.= >
	CreatedBy> G
)G H
;H I
modelBuilder   
.   
Entity   
<    
CTCStructure    ,
>  , -
(  - .
)  . /
.  / 0
Ignore  0 6
(  6 7
c  7 8
=>  9 ;
c  < =
.  = >
	UpdatedBy  > G
)  G H
;  H I
modelBuilder!! 
.!! 
Entity!! 
<!!  
Payslip!!  '
>!!' (
(!!( )
)!!) *
.!!* +
Ignore!!+ 1
(!!1 2
p!!2 3
=>!!4 6
p!!7 8
.!!8 9
	CreatedBy!!9 B
)!!B C
;!!C D
modelBuilder"" 
."" 
Entity"" 
<""  
Payslip""  '
>""' (
(""( )
)"") *
.""* +
Ignore""+ 1
(""1 2
p""2 3
=>""4 6
p""7 8
.""8 9
	UpdatedBy""9 B
)""B C
;""C D
modelBuilder%% 
.&& 
Entity&& 
<&& 
User&& 
>&& 
(&& 
)&& 
.'' 
HasOne'' 
('' 
u'' 
=>'' 
u'' 
.'' 
Profile'' &
)''& '
.(( 
WithOne(( 
((( 
p(( 
=>(( 
p(( 
.((  
User((  $
)(($ %
.)) 
HasForeignKey)) 
<)) 
EmployeeProfile)) .
>)). /
())/ 0
p))0 1
=>))2 4
p))5 6
.))6 7
UserId))7 =
)))= >
.** 
OnDelete** 
(** 
DeleteBehavior** (
.**( )
Cascade**) 0
)**0 1
;**1 2
modelBuilder-- 
... 
Entity.. 
<.. 
EmployeeProfile.. '
>..' (
(..( )
)..) *
.// 
HasMany// 
(// 
p// 
=>// 
p// 
.//  
CTCStructures//  -
)//- .
.00 
WithOne00 
(00 
c00 
=>00 
c00 
.00  
EmployeeProfile00  /
)00/ 0
.11 
HasForeignKey11 
(11 
c11  
=>11! #
c11$ %
.11% &
EmployeeProfileId11& 7
)117 8
.22 
OnDelete22 
(22 
DeleteBehavior22 (
.22( )
Cascade22) 0
)220 1
;221 2
modelBuilder55 
.66 
Entity66 
<66 
CTCStructure66 $
>66$ %
(66% &
)66& '
.77 
HasMany77 
(77 
c77 
=>77 
c77 
.77  

Allowances77  *
)77* +
.88 
WithOne88 
(88 
a88 
=>88 
a88 
.88  
CTCStructure88  ,
)88, -
.99 
HasForeignKey99 
(99 
a99  
=>99! #
a99$ %
.99% &
CTCStructureId99& 4
)994 5
.:: 
OnDelete:: 
(:: 
DeleteBehavior:: (
.::( )
Cascade::) 0
)::0 1
;::1 2
modelBuilder== 
.>> 
Entity>> 
<>> 
CTCStructure>> $
>>>$ %
(>>% &
)>>& '
.?? 
HasMany?? 
(?? 
c?? 
=>?? 
c?? 
.??  

Deductions??  *
)??* +
.@@ 
WithOne@@ 
(@@ 
d@@ 
=>@@ 
d@@ 
.@@  
CTCStructure@@  ,
)@@, -
.AA 
HasForeignKeyAA 
(AA 
dAA  
=>AA! #
dAA$ %
.AA% &
CTCStructureIdAA& 4
)AA4 5
.BB 
OnDeleteBB 
(BB 
DeleteBehaviorBB (
.BB( )
CascadeBB) 0
)BB0 1
;BB1 2
modelBuilderEE 
.FF 
EntityFF 
<FF 
PayslipFF 
>FF  
(FF  !
)FF! "
.GG 
HasManyGG 
(GG 
pGG 
=>GG 
pGG 
.GG  
AllowanceItemsGG  .
)GG. /
.HH 
WithOneHH 
(HH 
aHH 
=>HH 
aHH 
.HH  
PayslipHH  '
)HH' (
.II 
HasForeignKeyII 
(II 
aII  
=>II! #
aII$ %
.II% &
	PayslipIdII& /
)II/ 0
.JJ 
OnDeleteJJ 
(JJ 
DeleteBehaviorJJ (
.JJ( )
CascadeJJ) 0
)JJ0 1
;JJ1 2
modelBuilderMM 
.NN 
EntityNN 
<NN 
PayslipNN 
>NN  
(NN  !
)NN! "
.OO 
HasManyOO 
(OO 
pOO 
=>OO 
pOO 
.OO  
DeductionItemsOO  .
)OO. /
.PP 
WithOnePP 
(PP 
dPP 
=>PP 
dPP 
.PP  
PayslipPP  '
)PP' (
.QQ 
HasForeignKeyQQ 
(QQ 
dQQ  
=>QQ! #
dQQ$ %
.QQ% &
	PayslipIdQQ& /
)QQ/ 0
.RR 
OnDeleteRR 
(RR 
DeleteBehaviorRR (
.RR( )
CascadeRR) 0
)RR0 1
;RR1 2
modelBuilderUU 
.VV 
EntityVV 
<VV 
CTCStructureVV $
>VV$ %
(VV% &
)VV& '
.WW 
HasOneWW 
(WW 
cWW 
=>WW 
cWW 
.WW 
CreatedByUserWW ,
)WW, -
.XX 
WithManyXX 
(XX 
)XX 
.YY 
HasForeignKeyYY 
(YY 
cYY  
=>YY! #
cYY$ %
.YY% &
CreatedByUserIdYY& 5
)YY5 6
.ZZ 
OnDeleteZZ 
(ZZ 
DeleteBehaviorZZ (
.ZZ( )
RestrictZZ) 1
)ZZ1 2
;ZZ2 3
modelBuilder]] 
.^^ 
Entity^^ 
<^^ 
Payslip^^ 
>^^  
(^^  !
)^^! "
.__ 
HasOne__ 
(__ 
p__ 
=>__ 
p__ 
.__ 
CreatedByUser__ ,
)__, -
.`` 
WithMany`` 
(`` 
)`` 
.aa 
HasForeignKeyaa 
(aa 
paa  
=>aa! #
paa$ %
.aa% &
CreatedByUserIdaa& 5
)aa5 6
.bb 
OnDeletebb 
(bb 
DeleteBehaviorbb (
.bb( )
Restrictbb) 1
)bb1 2
;bb2 3
modelBuilderee 
.ff 
Entityff 
<ff 

Departmentff "
>ff" #
(ff# $
)ff$ %
.gg 
HasDatagg 
(gg 
newhh 

Departmenthh "
{hh# $
Idhh% '
=hh( )
$numhh* +
,hh+ ,
Namehh- 1
=hh2 3
$strhh4 A
}hhB C
,hhC D
newii 

Departmentii "
{ii# $
Idii% '
=ii( )
$numii* +
,ii+ ,
Nameii- 1
=ii2 3
$strii4 =
}ii> ?
,ii? @
newjj 

Departmentjj "
{jj# $
Idjj% '
=jj( )
$numjj* +
,jj+ ,
Namejj- 1
=jj2 3
$strjj4 ?
}jj@ A
,jjA B
newkk 

Departmentkk "
{kk# $
Idkk% '
=kk( )
$numkk* +
,kk+ ,
Namekk- 1
=kk2 3
$strkk4 ;
}kk< =
,kk= >
newll 

Departmentll "
{ll# $
Idll% '
=ll( )
$numll* +
,ll+ ,
Namell- 1
=ll2 3
$strll4 @
}llA B
,llB C
newmm 

Departmentmm "
{mm# $
Idmm% '
=mm( )
$nummm* +
,mm+ ,
Namemm- 1
=mm2 3
$strmm4 @
}mmA B
,mmB C
newnn 

Departmentnn "
{nn# $
Idnn% '
=nn( )
$numnn* +
,nn+ ,
Namenn- 1
=nn2 3
$strnn4 9
}nn: ;
,nn; <
newoo 

Departmentoo "
{oo# $
Idoo% '
=oo( )
$numoo* +
,oo+ ,
Nameoo- 1
=oo2 3
$stroo4 F
}ooG H
,ooH I
newpp 

Departmentpp "
{pp# $
Idpp% '
=pp( )
$numpp* +
,pp+ ,
Namepp- 1
=pp2 3
$strpp4 8
}pp9 :
)qq 
;qq 
vartt 
admintt 
=tt 
newtt 
Usertt  
{uu 
Idvv 
=vv 
$numvv 
,vv 
Emailww 
=ww 
$strww 3
,ww3 4
FullNamexx 
=xx 
$strxx )
,xx) *
Roleyy 
=yy 
UserRoleyy 
.yy  
Adminyy  %
,yy% &
IsActivezz 
=zz 
truezz 
,zz  
PasswordHash{{ 
={{ 
BCrypt{{ %
.{{% &
Net{{& )
.{{) *
BCrypt{{* 0
.{{0 1
HashPassword{{1 =
({{= >
$str{{> I
){{I J
,{{J K
	CreatedAt|| 
=|| 
DateTime|| $
.||$ %
UtcNow||% +
,||+ ,
}}} 
;}} 
modelBuilder~~ 
.~~ 
Entity~~ 
<~~  
User~~  $
>~~$ %
(~~% &
)~~& '
.~~' (
HasData~~( /
(~~/ 0
admin~~0 5
)~~5 6
;~~6 7
base
ÄÄ 
.
ÄÄ 
OnModelCreating
ÄÄ  
(
ÄÄ  !
modelBuilder
ÄÄ! -
)
ÄÄ- .
;
ÄÄ. /
}
ÅÅ 	
}
ÇÇ 
}ÉÉ ﬂP
\D:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Controllers\NotificationsController.cs
	namespace 	

PayrollApi
 
. 
Controllers  
{ 
[		 
ApiController		 
]		 
[

 
Route

 

(


 
$str

 
)

 
]

  
[ 
Route 

(
 
$str $
)$ %
]% &
[ 
Route 

(
 
$str !
)! "
]" #
[ 
Route 

(
 
$str &
)& '
]' (
[ 
Route 

(
 
$str '
)' (
]( )
[ 
	Authorize 
] 
public 

class #
NotificationsController (
:) *
ControllerBase+ 9
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
public #
NotificationsController &
(& '
AppDbContext' 3
db4 6
)6 7
=>8 :
_db; >
=? @
dbA C
;C D
private 
int 
? 
CurrentUserId "
{ 	
get 
{ 
var 
idClaim 
= 
User "
." #
	FindFirst# ,
(, -

ClaimTypes- 7
.7 8
NameIdentifier8 F
)F G
?G H
.H I
ValueI N
;N O
if 
( 
string 
. 
IsNullOrEmpty (
(( )
idClaim) 0
)0 1
)1 2
return 
null 
;  
return 
int 
. 
Parse  
(  !
idClaim! (
)( )
;) *
} 
} 	
[$$ 	
HttpGet$$	 
]$$ 
public%% 
async%% 
Task%% 
<%% 
IActionResult%% '
>%%' (
GetNotifications%%) 9
(%%9 :
[&& 
	FromQuery&& 
]&& 
int&& 
page&&  
=&&! "
$num&&# $
,&&$ %
['' 
	FromQuery'' 
]'' 
int'' 
pageSize'' $
=''% &
$num''' )
,'') *
[(( 
	FromQuery(( 
](( 
int(( 
?(( 
userId(( #
=(($ %
null((& *
))) 	
{** 	
try++ 
{,, 
if-- 
(-- 
!-- 
CurrentUserId-- "
.--" #
HasValue--# +
)--+ ,
return.. 
Unauthorized.. '
(..' (
$str..( :
)..: ;
;..; <
var00 
q00 
=00 
_db00 
.00 
Notifications00 )
.00) *
AsQueryable00* 5
(005 6
)006 7
;007 8
q22 
=22 
q22 
.22 
Where22 
(22 
n22 
=>22 !
n22" #
.22# $
UserId22$ *
==22+ -
CurrentUserId22. ;
.22; <
Value22< A
)22A B
;22B C
var44 
total44 
=44 
await44 !
q44" #
.44# $

CountAsync44$ .
(44. /
)44/ 0
;440 1
var66 
items66 
=66 
await66 !
q66" #
.66# $
OrderByDescending66$ 5
(665 6
n666 7
=>668 :
n66; <
.66< =
	CreatedAt66= F
)66F G
.77 
Skip77 
(77 
(77 
page77 
-77  !
$num77" #
)77# $
*77% &
pageSize77' /
)77/ 0
.88 
Take88 
(88 
pageSize88 "
)88" #
.99 
Select99 
(99 
n99 
=>99  
new99! $
{:: 
n;; 
.;; 
Id;; 
,;; 
n<< 
.<< 
Subject<< !
,<<! "
n== 
.== 
Message== !
,==! "
n>> 
.>> 
IsRead>>  
,>>  !
n?? 
.?? 
	CreatedAt?? #
,??# $
}@@ 
)@@ 
.AA 
ToListAsyncAA  
(AA  !
)AA! "
;AA" #
returnCC 
OkCC 
(CC 
newDD 
{EE 
PageFF 
=FF 
pageFF #
,FF# $
PageSizeGG  
=GG! "
pageSizeGG# +
,GG+ ,
TotalHH 
=HH 
totalHH  %
,HH% &
ItemsII 
=II 
itemsII  %
,II% &
}JJ 
)KK 
;KK 
}LL 
catchMM 
(MM 
	ExceptionMM 
exMM 
)MM  
{NN 
returnOO 

StatusCodeOO !
(OO! "
$numPP 
,PP 
newQQ 
{QQ 
ErrorQQ 
=QQ  !
$strQQ" 9
,QQ9 :
DetailQQ; A
=QQB C
exQQD F
.QQF G
MessageQQG N
}QQO P
)RR 
;RR 
}SS 
}TT 	
[YY 	
HttpPutYY	 
(YY 
$strYY 
)YY 
]YY 
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
IActionResultZZ '
>ZZ' (

MarkAsReadZZ) 3
(ZZ3 4
intZZ4 7
idZZ8 :
)ZZ: ;
{[[ 	
if\\ 
(\\ 
!\\ 
CurrentUserId\\ 
.\\ 
HasValue\\ '
)\\' (
return]] 
Unauthorized]] #
(]]# $
)]]$ %
;]]% &
var__ 
n__ 
=__ 
await__ 
_db__ 
.__ 
Notifications__ +
.__+ ,
FirstOrDefaultAsync__, ?
(__? @
x__@ A
=>__B D
x`` 
.`` 
Id`` 
==`` 
id`` 
&&`` 
x`` 
.``  
UserId``  &
==``' )
CurrentUserId``* 7
.``7 8
Value``8 =
)aa 
;aa 
ifbb 
(bb 
nbb 
==bb 
nullbb 
)bb 
returncc 
NotFoundcc 
(cc  
$strcc  8
)cc8 9
;cc9 :
nee 
.ee 
IsReadee 
=ee 
trueee 
;ee 
nff 
.ff 
	UpdatedAtff 
=ff 
DateTimeff "
.ff" #
UtcNowff# )
;ff) *
awaitgg 
_dbgg 
.gg 
SaveChangesAsyncgg &
(gg& '
)gg' (
;gg( )
returnii 
Okii 
(ii 
newii 
{ii 
Messageii #
=ii$ %
$strii& C
}iiD E
)iiE F
;iiF G
}jj 	
[oo 	
HttpPutoo	 
(oo 
$stroo 
)oo 
]oo 
publicpp 
asyncpp 
Taskpp 
<pp 
IActionResultpp '
>pp' (
MarkAllAsReadpp) 6
(pp6 7
)pp7 8
{qq 	
ifrr 
(rr 
!rr 
CurrentUserIdrr 
.rr 
HasValuerr '
)rr' (
returnss 
Unauthorizedss #
(ss# $
)ss$ %
;ss% &
varuu 
itemsuu 
=uu 
awaituu 
_dbuu !
.vv 
Notificationsvv 
.vv 
Wherevv $
(vv$ %
nvv% &
=>vv' )
nvv* +
.vv+ ,
UserIdvv, 2
==vv3 5
CurrentUserIdvv6 C
.vvC D
ValuevvD I
&&vvJ L
!vvM N
nvvN O
.vvO P
IsReadvvP V
)vvV W
.ww 
ToListAsyncww 
(ww 
)ww 
;ww 
foreachyy 
(yy 
varyy 
nyy 
inyy 
itemsyy #
)yy# $
{zz 
n{{ 
.{{ 
IsRead{{ 
={{ 
true{{ 
;{{  
n|| 
.|| 
	UpdatedAt|| 
=|| 
DateTime|| &
.||& '
UtcNow||' -
;||- .
}}} 
await 
_db 
. 
SaveChangesAsync &
(& '
)' (
;( )
return
ÄÄ 
Ok
ÄÄ 
(
ÄÄ 
new
ÄÄ 
{
ÄÄ 
Message
ÄÄ #
=
ÄÄ$ %
$str
ÄÄ& H
}
ÄÄI J
)
ÄÄJ K
;
ÄÄK L
}
ÅÅ 	
[
ÜÜ 	
HttpGet
ÜÜ	 
(
ÜÜ 
$str
ÜÜ 
)
ÜÜ  
]
ÜÜ  !
public
áá 
async
áá 
Task
áá 
<
áá 
IActionResult
áá '
>
áá' (
GetUnreadCount
áá) 7
(
áá7 8
)
áá8 9
{
àà 	
if
ââ 
(
ââ 
!
ââ 
CurrentUserId
ââ 
.
ââ 
HasValue
ââ '
)
ââ' (
return
ää 
Unauthorized
ää #
(
ää# $
)
ää$ %
;
ää% &
var
åå 
count
åå 
=
åå 
await
åå 
_db
åå !
.
åå! "
Notifications
åå" /
.
åå/ 0

CountAsync
åå0 :
(
åå: ;
n
åå; <
=>
åå= ?
n
çç 
.
çç 
UserId
çç 
==
çç 
CurrentUserId
çç )
.
çç) *
Value
çç* /
&&
çç0 2
!
çç3 4
n
çç4 5
.
çç5 6
IsRead
çç6 <
)
éé 
;
éé 
return
êê 
Ok
êê 
(
êê 
new
êê 
{
êê 
Count
êê !
=
êê" #
count
êê$ )
}
êê* +
)
êê+ ,
;
êê, -
}
ëë 	
}
íí 
}ìì Éé
XD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Controllers\HRManagerController.cs
	namespace

 	

PayrollApi


 
.

 
Controllers

  
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
[ 
	Authorize 
( 
Roles 
= 
$str (
)( )
]) *
public 

class 
HRManagerController $
:% &
ControllerBase' 5
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
private 
readonly 
IEmailService &
_email' -
;- .
private 
readonly 
IAuditService &
_audit' -
;- .
public 
HRManagerController "
(" #
AppDbContext# /
db0 2
,2 3
IEmailService4 A
emailB G
,G H
IAuditServiceI V
auditW \
)\ ]
{ 	
_db 
= 
db 
; 
_email 
= 
email 
; 
_audit 
= 
audit 
; 
} 	
private 
int 
CurrentUserId !
=>" $
int% (
.( )
Parse) .
(. /
User/ 3
.3 4
FindFirstValue4 B
(B C

ClaimTypesC M
.M N
NameIdentifierN \
)\ ]
!] ^
)^ _
;_ `
private$$ 
string$$ 
CurrentUserEmail$$ '
=>$$( *
User$$+ /
.$$/ 0
FindFirstValue$$0 >
($$> ?

ClaimTypes$$? I
.$$I J
Email$$J O
)$$O P
??$$Q S
$str$$T \
;$$\ ]
[)) 	
HttpPost))	 
()) 
$str)) 0
)))0 1
]))1 2
public** 
async** 
Task** 
<** 
IActionResult** '
>**' (

ApproveCTC**) 3
(**3 4
int**4 7
employeeUserId**8 F
)**F G
{++ 	
var,, 
profile,, 
=,, 
await,, 
_db,,  #
.-- 
EmployeeProfiles-- !
.--! "
Include--" )
(--) *
p--* +
=>--, .
p--/ 0
.--0 1
CTCStructures--1 >
)--> ?
... 
Include.. 
(.. 
p.. 
=>.. 
p.. 
...  
User..  $
)..$ %
.// 
FirstOrDefaultAsync// $
(//$ %
p//% &
=>//' )
p//* +
.//+ ,
UserId//, 2
==//3 5
employeeUserId//6 D
)//D E
;//E F
if11 
(11 
profile11 
==11 
null11 
)11  
return22 
NotFound22 
(22  
$str22  <
)22< =
;22= >
var44 
latestPending44 
=44 
profile44  '
.55 
CTCStructures55 
.55 
OrderByDescending55 0
(550 1
c551 2
=>553 5
c556 7
.557 8
EffectiveFrom558 E
)55E F
.66 
FirstOrDefault66 
(66  
c66  !
=>66" $
!66% &
c66& '
.66' (

IsApproved66( 2
)662 3
;663 4
if88 
(88 
latestPending88 
==88  
null88! %
)88% &
return99 
NotFound99 
(99  
$str99  A
)99A B
;99B C
latestPending;; 
.;; 

IsApproved;; $
=;;% &
true;;' +
;;;+ ,
latestPending<< 
.<< 
	UpdatedAt<< #
=<<$ %
DateTime<<& .
.<<. /
UtcNow<</ 5
;<<5 6
await>> 
_db>> 
.>> 
SaveChangesAsync>> &
(>>& '
)>>' (
;>>( )
if@@ 
(@@ 
latestPending@@ 
?@@ 
.@@ 
CreatedByUserId@@ .
>@@/ 0
$num@@1 2
)@@2 3
{AA 
varBB 
creatorBB 
=BB 
awaitBB #
_dbBB$ '
.BB' (
UsersBB( -
.BB- .
	FindAsyncBB. 7
(BB7 8
latestPendingBB8 E
.BBE F
CreatedByUserIdBBF U
)BBU V
;BBV W
ifCC 
(CC 
creatorCC 
!=CC 
nullCC #
)CC# $
{DD 
_dbFF 
.FF 
NotificationsFF %
.FF% &
AddFF& )
(FF) *
newGG 
NotificationGG (
{HH 
UserIdII "
=II# $
creatorII% ,
.II, -
IdII- /
,II/ 0
SubjectJJ #
=JJ$ %
$strJJ& :
,JJ: ;
MessageKK #
=KK$ %
$"LL  "
$strLL" :
{LL: ;
profileLL; B
.LLB C
UserLLC G
.LLG H
FullNameLLH P
}LLP Q
$strLLQ \
{LL\ ]
latestPendingLL] j
.LLj k
EffectiveFromLLk x
:LLx y
$str	LLy Ñ
}
LLÑ Ö
$str
LLÖ ì
"
LLì î
,
LLî ï
}MM 
)NN 
;NN 
awaitQQ 
_emailQQ  
.QQ  !
SendTemplatedAsyncQQ! 3
(QQ3 4
creatorRR 
.RR  
EmailRR  %
,RR% &
$strSS ,
,SS, -
$"TT 
$strTT  
{TT  !
creatorTT! (
.TT( )
FullNameTT) 1
}TT1 2
$strTT2 P
{TTP Q
profileTTQ X
.TTX Y
UserTTY ]
.TT] ^
FullNameTT^ f
}TTf g
$strTTg |
"TT| }
)UU 
;UU 
}VV 
awaitWW 
_dbWW 
.WW 
SaveChangesAsyncWW *
(WW* +
)WW+ ,
;WW, -
}XX 
await[[ 
_audit[[ 
.[[ 
LogAsync[[ !
([[! "
$"\\ 
$str\\ "
{\\" #
latestPending\\# 0
.\\0 1
EmployeeProfile\\1 @
.\\@ A
User\\A E
.\\E F
FullName\\F N
}\\N O
$str\\O Q
{\\Q R
latestPending\\R _
.\\_ `
EmployeeProfile\\` o
.\\o p
User\\p t
.\\t u
FullName\\u }
}\\} ~
$str\\~ 
"	\\ Ä
,
\\Ä Å
latestPending]] 
.]] 
Id]]  
,]]  !
$str^^ 
,^^ 
$"__ 
$str__ 
{__ 
latestPending__ (
.__( )
EffectiveFrom__) 6
:__6 7
$str__7 A
}__A B
$str__B P
{__P Q
profile__Q X
.__X Y
User__Y ]
.__] ^
Email__^ c
}__c d
"__d e
,__e f
CurrentUserId`` 
,`` 
CurrentUserEmailaa  
)bb 
;bb 
returndd 
Okdd 
(dd 
newdd 
{dd 
Messagedd #
=dd$ %
$strdd& 4
}dd5 6
)dd6 7
;dd7 8
}ee 	
[jj 	
HttpPostjj	 
(jj 
$strjj 0
)jj0 1
]jj1 2
publickk 
asynckk 
Taskkk 
<kk 
IActionResultkk '
>kk' (
ApprovePayslipkk) 7
(kk7 8
intkk8 ;
	payslipIdkk< E
)kkE F
{ll 	
varmm 
slipmm 
=mm 
awaitmm 
_dbmm  
.nn 
Payslipsnn 
.nn 
Includenn !
(nn! "
pnn" #
=>nn$ &
pnn' (
.nn( )
EmployeeProfilenn) 8
)nn8 9
.oo 
ThenIncludeoo 
(oo 
epoo 
=>oo  "
epoo# %
.oo% &
Useroo& *
)oo* +
.pp 
FirstOrDefaultAsyncpp $
(pp$ %
ppp% &
=>pp' )
ppp* +
.pp+ ,
Idpp, .
==pp/ 1
	payslipIdpp2 ;
)pp; <
;pp< =
ifrr 
(rr 
sliprr 
==rr 
nullrr 
)rr 
returnss 
NotFoundss 
(ss  
)ss  !
;ss! "
slipuu 
.uu 
Statusuu 
=uu 
ApprovalStatusuu (
.uu( )
Approveduu) 1
;uu1 2
slipvv 
.vv 
	UpdatedAtvv 
=vv 
DateTimevv %
.vv% &
UtcNowvv& ,
;vv, -
awaitww 
_dbww 
.ww 
SaveChangesAsyncww &
(ww& '
)ww' (
;ww( )
awaitzz 
_auditzz 
.zz 
LogAsynczz !
(zz! "
$str{{ 
,{{ 
slip|| 
.|| 
Id|| 
,|| 
$str}} 
,}} 
$"~~ 
$str~~ 
{~~ 
slip~~ 
.~~  
Month~~  %
}~~% &
$str~~& '
{~~' (
slip~~( ,
.~~, -
Year~~- 1
}~~1 2
$str~~2 @
{~~@ A
slip~~A E
.~~E F
EmployeeProfile~~F U
.~~U V
User~~V Z
.~~Z [
FullName~~[ c
}~~c d
$str~~d f
{~~f g
slip~~g k
.~~k l
EmployeeProfile~~l {
.~~{ |
User	~~| Ä
.
~~Ä Å
Email
~~Å Ü
}
~~Ü á
$str
~~á à
"
~~à â
,
~~â ä
CurrentUserId 
, 
CurrentUserEmail
ÄÄ  
)
ÅÅ 
;
ÅÅ 
if
ÉÉ 
(
ÉÉ 
slip
ÉÉ 
.
ÉÉ 
CreatedByUserId
ÉÉ $
>
ÉÉ% &
$num
ÉÉ' (
)
ÉÉ( )
{
ÑÑ 
var
ÖÖ 
creator
ÖÖ 
=
ÖÖ 
await
ÖÖ #
_db
ÖÖ$ '
.
ÖÖ' (
Users
ÖÖ( -
.
ÖÖ- .
	FindAsync
ÖÖ. 7
(
ÖÖ7 8
slip
ÖÖ8 <
.
ÖÖ< =
CreatedByUserId
ÖÖ= L
)
ÖÖL M
;
ÖÖM N
if
ÜÜ 
(
ÜÜ 
creator
ÜÜ 
!=
ÜÜ 
null
ÜÜ #
)
ÜÜ# $
{
áá 
_db
ââ 
.
ââ 
Notifications
ââ %
.
ââ% &
Add
ââ& )
(
ââ) *
new
ää 
Notification
ää (
{
ãã 
UserId
åå "
=
åå# $
creator
åå% ,
.
åå, -
Id
åå- /
,
åå/ 0
Subject
çç #
=
çç$ %
$str
çç& >
,
çç> ?
Message
éé #
=
éé$ %
$"
èè  "
$str
èè" >
{
èè> ?
slip
èè? C
.
èèC D
EmployeeProfile
èèD S
.
èèS T
User
èèT X
.
èèX Y
FullName
èèY a
}
èèa b
$str
èèb d
{
èèd e
slip
èèe i
.
èèi j
Month
èèj o
}
èèo p
$str
èèp q
{
èèq r
slip
èèr v
.
èèv w
Year
èèw {
}
èè{ |
$strèè| ã
"èèã å
,èèå ç
}
êê 
)
ëë 
;
ëë 
await
îî 
_email
îî  
.
îî  ! 
SendTemplatedAsync
îî! 3
(
îî3 4
creator
ïï 
.
ïï  
Email
ïï  %
,
ïï% &
$str
ññ 0
,
ññ0 1
$"
óó 
$str
óó  
{
óó  !
creator
óó! (
.
óó( )
FullName
óó) 1
}
óó1 2
$str
óó2 T
{
óóT U
slip
óóU Y
.
óóY Z
EmployeeProfile
óóZ i
.
óói j
User
óój n
.
óón o
FullName
óóo w
}
óów x
$str
óóx z
{
óóz {
slip
óó{ 
.óó Ä
MonthóóÄ Ö
}óóÖ Ü
$stróóÜ á
{óóá à
slipóóà å
.óóå ç
Yearóóç ë
}óóë í
$stróóí ®
"óó® ©
)
òò 
;
òò 
}
ôô 
await
öö 
_db
öö 
.
öö 
SaveChangesAsync
öö *
(
öö* +
)
öö+ ,
;
öö, -
}
õõ 
return
ùù 
Ok
ùù 
(
ùù 
new
ùù 
{
ùù 
Message
ùù #
=
ùù$ %
$str
ùù& 8
}
ùù9 :
)
ùù: ;
;
ùù; <
}
ûû 	
[
££ 	
HttpPost
££	 
(
££ 
$str
££ 0
)
££0 1
]
££1 2
public
§§ 
async
§§ 
Task
§§ 
<
§§ 
IActionResult
§§ '
>
§§' (
ReleasePayslip
§§) 7
(
§§7 8
int
§§8 ;
	payslipId
§§< E
)
§§E F
{
•• 	
var
¶¶ 
slip
¶¶ 
=
¶¶ 
await
¶¶ 
_db
¶¶  
.
ßß 
Payslips
ßß 
.
ßß 
Include
ßß !
(
ßß! "
p
ßß" #
=>
ßß$ &
p
ßß' (
.
ßß( )
EmployeeProfile
ßß) 8
)
ßß8 9
.
®® 
ThenInclude
®® 
(
®® 
ep
®® 
=>
®®  "
ep
®®# %
.
®®% &
User
®®& *
)
®®* +
.
©© !
FirstOrDefaultAsync
©© $
(
©©$ %
p
©©% &
=>
©©' )
p
©©* +
.
©©+ ,
Id
©©, .
==
©©/ 1
	payslipId
©©2 ;
)
©©; <
;
©©< =
if
´´ 
(
´´ 
slip
´´ 
==
´´ 
null
´´ 
)
´´ 
return
¨¨ 
NotFound
¨¨ 
(
¨¨  
)
¨¨  !
;
¨¨! "
if
ÆÆ 
(
ÆÆ 
slip
ÆÆ 
.
ÆÆ 
Status
ÆÆ 
!=
ÆÆ 
ApprovalStatus
ÆÆ -
.
ÆÆ- .
Approved
ÆÆ. 6
)
ÆÆ6 7
return
ØØ 

BadRequest
ØØ !
(
ØØ! "
$str
ØØ" K
)
ØØK L
;
ØØL M
slip
±± 
.
±± 

IsReleased
±± 
=
±± 
true
±± "
;
±±" #
slip
≤≤ 
.
≤≤ 
	UpdatedAt
≤≤ 
=
≤≤ 
DateTime
≤≤ %
.
≤≤% &
UtcNow
≤≤& ,
;
≤≤, -
await
¥¥ 
_audit
¥¥ 
.
¥¥ 
LogAsync
¥¥ !
(
¥¥! "
$str
µµ 
,
µµ 
slip
∂∂ 
.
∂∂ 
Id
∂∂ 
,
∂∂ 
$str
∑∑ 
,
∑∑ 
$"
∏∏ 
$str
∏∏ 
{
∏∏ 
slip
∏∏ 
.
∏∏  
Month
∏∏  %
}
∏∏% &
$str
∏∏& '
{
∏∏' (
slip
∏∏( ,
.
∏∏, -
Year
∏∏- 1
}
∏∏1 2
$str
∏∏2 @
{
∏∏@ A
slip
∏∏A E
.
∏∏E F
EmployeeProfile
∏∏F U
.
∏∏U V
User
∏∏V Z
.
∏∏Z [
Email
∏∏[ `
}
∏∏` a
"
∏∏a b
,
∏∏b c
CurrentUserId
ππ 
,
ππ 
CurrentUserEmail
∫∫  
)
ªª 
;
ªª 
_db
ææ 
.
ææ 
Notifications
ææ 
.
ææ 
Add
ææ !
(
ææ! "
new
øø 
Notification
øø  
{
¿¿ 
UserId
¡¡ 
=
¡¡ 
slip
¡¡ !
.
¡¡! "
EmployeeProfile
¡¡" 1
.
¡¡1 2
User
¡¡2 6
.
¡¡6 7
Id
¡¡7 9
,
¡¡9 :
Subject
¬¬ 
=
¬¬ 
$str
¬¬ 4
,
¬¬4 5
Message
√√ 
=
√√ 
$"
√√  
$str
√√  ,
{
√√, -
slip
√√- 1
.
√√1 2
Month
√√2 7
}
√√7 8
$str
√√8 9
{
√√9 :
slip
√√: >
.
√√> ?
Year
√√? C
}
√√C D
$str
√√D V
"
√√V W
,
√√W X
}
ƒƒ 
)
≈≈ 
;
≈≈ 
await
∆∆ 
_db
∆∆ 
.
∆∆ 
SaveChangesAsync
∆∆ &
(
∆∆& '
)
∆∆' (
;
∆∆( )
await
…… 
_email
…… 
.
……  
SendTemplatedAsync
…… +
(
……+ ,
slip
   
.
   
EmployeeProfile
   $
.
  $ %
User
  % )
.
  ) *
Email
  * /
,
  / 0
$str
ÀÀ "
,
ÀÀ" #
$"
ÃÃ 
$str
ÃÃ 
{
ÃÃ 
slip
ÃÃ 
.
ÃÃ 
EmployeeProfile
ÃÃ -
.
ÃÃ- .
User
ÃÃ. 2
.
ÃÃ2 3
FullName
ÃÃ3 ;
}
ÃÃ; <
$str
ÃÃ< S
{
ÃÃS T
slip
ÃÃT X
.
ÃÃX Y
Month
ÃÃY ^
}
ÃÃ^ _
$str
ÃÃ_ `
{
ÃÃ` a
slip
ÃÃa e
.
ÃÃe f
Year
ÃÃf j
}
ÃÃj k
$strÃÃk †
"ÃÃ† °
)
ÕÕ 
;
ÕÕ 
return
œœ 
Ok
œœ 
(
œœ 
new
œœ 
{
œœ 
Message
œœ #
=
œœ$ %
$str
œœ& N
}
œœO P
)
œœP Q
;
œœQ R
}
–– 	
[
’’ 	
HttpPost
’’	 
(
’’ 
$str
’’ '
)
’’' (
]
’’( )
public
÷÷ 
async
÷÷ 
Task
÷÷ 
<
÷÷ 
IActionResult
÷÷ '
>
÷÷' (
SetCTCStatus
÷÷) 5
(
÷÷5 6
int
÷÷6 9
ctcId
÷÷: ?
,
÷÷? @
[
÷÷A B
	FromQuery
÷÷B K
]
÷÷K L
ApprovalStatus
÷÷M [
status
÷÷\ b
)
÷÷b c
{
◊◊ 	
var
ÿÿ 
ctc
ÿÿ 
=
ÿÿ 
await
ÿÿ 
_db
ÿÿ 
.
ŸŸ 
CTCStructures
ŸŸ 
.
ŸŸ 
Include
ŸŸ &
(
ŸŸ& '
c
ŸŸ' (
=>
ŸŸ) +
c
ŸŸ, -
.
ŸŸ- .
EmployeeProfile
ŸŸ. =
)
ŸŸ= >
.
⁄⁄ 
ThenInclude
⁄⁄ 
(
⁄⁄ 
p
⁄⁄ 
=>
⁄⁄ !
p
⁄⁄" #
.
⁄⁄# $
User
⁄⁄$ (
)
⁄⁄( )
.
€€ !
FirstOrDefaultAsync
€€ $
(
€€$ %
c
€€% &
=>
€€' )
c
€€* +
.
€€+ ,
Id
€€, .
==
€€/ 1
ctcId
€€2 7
)
€€7 8
;
€€8 9
if
›› 
(
›› 
ctc
›› 
==
›› 
null
›› 
)
›› 
return
ﬁﬁ 
NotFound
ﬁﬁ 
(
ﬁﬁ  
$str
ﬁﬁ  /
)
ﬁﬁ/ 0
;
ﬁﬁ0 1
if
‡‡ 
(
‡‡ 
status
‡‡ 
==
‡‡ 
ApprovalStatus
‡‡ (
.
‡‡( )
Approved
‡‡) 1
)
‡‡1 2
{
·· 
ctc
„„ 
.
„„ 
EffectiveTo
„„ 
=
„„  !
ctc
„„" %
.
„„% &
EffectiveFrom
„„& 3
.
„„3 4
AddYears
„„4 <
(
„„< =
$num
„„= >
)
„„> ?
;
„„? @
bool
ÊÊ 

yearExists
ÊÊ 
=
ÊÊ  !
await
ÊÊ" '
_db
ÊÊ( +
.
ÊÊ+ ,
CTCStructures
ÊÊ, 9
.
ÊÊ9 :
AnyAsync
ÊÊ: B
(
ÊÊB C
c
ÊÊC D
=>
ÊÊE G
c
ÁÁ 
.
ÁÁ 
EmployeeProfileId
ÁÁ '
==
ÁÁ( *
ctc
ÁÁ+ .
.
ÁÁ. /
EmployeeProfileId
ÁÁ/ @
&&
ËË 
c
ËË 
.
ËË 
Id
ËË 
!=
ËË 
ctc
ËË "
.
ËË" #
Id
ËË# %
&&
ÈÈ 
c
ÈÈ 
.
ÈÈ 
Status
ÈÈ 
==
ÈÈ  "
ApprovalStatus
ÈÈ# 1
.
ÈÈ1 2
Approved
ÈÈ2 :
&&
ÍÍ 
c
ÍÍ 
.
ÍÍ 
EffectiveFrom
ÍÍ &
.
ÍÍ& '
Year
ÍÍ' +
==
ÍÍ, .
ctc
ÍÍ/ 2
.
ÍÍ2 3
EffectiveFrom
ÍÍ3 @
.
ÍÍ@ A
Year
ÍÍA E
)
ÎÎ 
;
ÎÎ 
if
ÌÌ 
(
ÌÌ 

yearExists
ÌÌ 
)
ÌÌ 
return
ÓÓ 
Conflict
ÓÓ #
(
ÓÓ# $
new
ÔÔ 
{
ÔÔ 
message
ÔÔ %
=
ÔÔ& '
$str
ÔÔ( \
}
ÔÔ] ^
)
 
;
 
bool
ÛÛ 
overlaps
ÛÛ 
=
ÛÛ 
await
ÛÛ  %
_db
ÛÛ& )
.
ÛÛ) *
CTCStructures
ÛÛ* 7
.
ÛÛ7 8
AnyAsync
ÛÛ8 @
(
ÛÛ@ A
c
ÛÛA B
=>
ÛÛC E
c
ÙÙ 
.
ÙÙ 
EmployeeProfileId
ÙÙ '
==
ÙÙ( *
ctc
ÙÙ+ .
.
ÙÙ. /
EmployeeProfileId
ÙÙ/ @
&&
ıı 
c
ıı 
.
ıı 
Id
ıı 
!=
ıı 
ctc
ıı "
.
ıı" #
Id
ıı# %
&&
ˆˆ 
c
ˆˆ 
.
ˆˆ 
Status
ˆˆ 
==
ˆˆ  "
ApprovalStatus
ˆˆ# 1
.
ˆˆ1 2
Approved
ˆˆ2 :
&&
˜˜ 
c
˜˜ 
.
˜˜ 
EffectiveFrom
˜˜ &
<
˜˜' (
ctc
˜˜) ,
.
˜˜, -
EffectiveTo
˜˜- 8
&&
¯¯ 
c
¯¯ 
.
¯¯ 
EffectiveTo
¯¯ $
>
¯¯% &
ctc
¯¯' *
.
¯¯* +
EffectiveFrom
¯¯+ 8
)
˘˘ 
;
˘˘ 
if
˚˚ 
(
˚˚ 
overlaps
˚˚ 
)
˚˚ 
return
¸¸ 
Conflict
¸¸ #
(
¸¸# $
new
˝˝ 
{
˝˝ 
message
˝˝ %
=
˝˝& '
$str
˝˝( ^
}
˝˝_ `
)
˛˛ 
;
˛˛ 
ctc
ÅÅ 
.
ÅÅ 
Status
ÅÅ 
=
ÅÅ 
ApprovalStatus
ÅÅ +
.
ÅÅ+ ,
Approved
ÅÅ, 4
;
ÅÅ4 5
ctc
ÇÇ 
.
ÇÇ 

IsApproved
ÇÇ 
=
ÇÇ  
true
ÇÇ! %
;
ÇÇ% &
var
ÖÖ 
	newerCtcs
ÖÖ 
=
ÖÖ 
await
ÖÖ  %
_db
ÖÖ& )
.
ÜÜ 
CTCStructures
ÜÜ "
.
ÜÜ" #
Where
ÜÜ# (
(
ÜÜ( )
c
ÜÜ) *
=>
ÜÜ+ -
c
áá 
.
áá 
EmployeeProfileId
áá +
==
áá, .
ctc
áá/ 2
.
áá2 3
EmployeeProfileId
áá3 D
&&
àà 
c
àà 
.
àà 
Id
àà 
!=
àà  "
ctc
àà# &
.
àà& '
Id
àà' )
&&
ââ 
c
ââ 
.
ââ 
Status
ââ #
==
ââ$ &
ApprovalStatus
ââ' 5
.
ââ5 6
Approved
ââ6 >
&&
ää 
c
ää 
.
ää 
EffectiveFrom
ää *
>
ää+ ,
ctc
ää- 0
.
ää0 1
EffectiveFrom
ää1 >
)
ãã 
.
åå 
ToListAsync
åå  
(
åå  !
)
åå! "
;
åå" #
foreach
éé 
(
éé 
var
éé 
newer
éé "
in
éé# %
	newerCtcs
éé& /
)
éé/ 0
{
èè 
newer
êê 
.
êê 
Status
êê  
=
êê! "
ApprovalStatus
êê# 1
.
êê1 2
Rejected
êê2 :
;
êê: ;
newer
ëë 
.
ëë 

IsApproved
ëë $
=
ëë% &
false
ëë' ,
;
ëë, -
newer
íí 
.
íí 
	UpdatedAt
íí #
=
íí$ %
DateTime
íí& .
.
íí. /
UtcNow
íí/ 5
;
íí5 6
await
îî 
_audit
îî  
.
îî  !
LogAsync
îî! )
(
îî) *
$str
ïï &
,
ïï& '
newer
ññ 
.
ññ 
Id
ññ  
,
ññ  !
$str
óó $
,
óó$ %
$"
òò 
$str
òò 
{
òò 
newer
òò $
.
òò$ %
Id
òò% '
}
òò' (
$str
òò( X
{
òòX Y
ctc
òòY \
.
òò\ ]
Id
òò] _
}
òò_ `
$str
òò` k
{
òòk l
ctc
òòl o
.
òòo p
EffectiveFrom
òòp }
:
òò} ~
$stròò~ à
}òòà â
$stròòâ ó
"òòó ò
,òòò ô
CurrentUserId
ôô %
,
ôô% &
CurrentUserEmail
öö (
)
õõ 
;
õõ 
}
úú 
}
ùù 
else
ûû 
{
üü 
ctc
°° 
.
°° 
Status
°° 
=
°° 
status
°° #
;
°°# $
ctc
¢¢ 
.
¢¢ 

IsApproved
¢¢ 
=
¢¢  
false
¢¢! &
;
¢¢& '
}
££ 
ctc
•• 
.
•• 
	UpdatedAt
•• 
=
•• 
DateTime
•• $
.
••$ %
UtcNow
••% +
;
••+ ,
await
¶¶ 
_db
¶¶ 
.
¶¶ 
SaveChangesAsync
¶¶ &
(
¶¶& '
)
¶¶' (
;
¶¶( )
await
©© 
_audit
©© 
.
©© 
LogAsync
©© !
(
©©! "
$str
™™ 
,
™™ 
ctc
´´ 
.
´´ 
Id
´´ 
,
´´ 
$str
¨¨ 
,
¨¨  
$"
≠≠ 
$str
≠≠ 
{
≠≠ 
status
≠≠ $
}
≠≠$ %
$str
≠≠% 3
{
≠≠3 4
ctc
≠≠4 7
.
≠≠7 8
EmployeeProfile
≠≠8 G
.
≠≠G H
User
≠≠H L
.
≠≠L M
FullName
≠≠M U
}
≠≠U V
$str
≠≠V X
{
≠≠X Y
ctc
≠≠Y \
.
≠≠\ ]
EmployeeProfile
≠≠] l
.
≠≠l m
User
≠≠m q
.
≠≠q r
Email
≠≠r w
}
≠≠w x
$str
≠≠x y
"
≠≠y z
,
≠≠z {
CurrentUserId
ÆÆ 
,
ÆÆ 
CurrentUserEmail
ØØ  
)
∞∞ 
;
∞∞ 
_db
≥≥ 
.
≥≥ 
Notifications
≥≥ 
.
≥≥ 
Add
≥≥ !
(
≥≥! "
new
¥¥ 
Notification
¥¥  
{
µµ 
UserId
∂∂ 
=
∂∂ 
ctc
∂∂  
.
∂∂  !
EmployeeProfile
∂∂! 0
.
∂∂0 1
UserId
∂∂1 7
,
∂∂7 8
Subject
∑∑ 
=
∑∑ 
$str
∑∑ 2
,
∑∑2 3
Message
∏∏ 
=
∏∏ 
$"
ππ 
$str
ππ -
{
ππ- .
ctc
ππ. 1
.
ππ1 2
EffectiveFrom
ππ2 ?
:
ππ? @
$str
ππ@ K
}
ππK L
$str
ππL [
{
ππ[ \
status
ππ\ b
}
ππb c
$str
ππc d
"
ππd e
,
ππe f
}
∫∫ 
)
ªª 
;
ªª 
await
ºº 
_db
ºº 
.
ºº 
SaveChangesAsync
ºº &
(
ºº& '
)
ºº' (
;
ºº( )
await
ææ 
_email
ææ 
.
ææ  
SendTemplatedAsync
ææ +
(
ææ+ ,
ctc
øø 
.
øø 
EmployeeProfile
øø #
.
øø# $
User
øø$ (
.
øø( )
Email
øø) .
,
øø. /
$str
¿¿ $
,
¿¿$ %
$"
¡¡ 
$str
¡¡ 
{
¡¡ 
ctc
¡¡ 
.
¡¡ 
EmployeeProfile
¡¡ ,
.
¡¡, -
User
¡¡- 1
.
¡¡1 2
FullName
¡¡2 :
}
¡¡: ;
$str
¡¡; T
{
¡¡T U
ctc
¡¡U X
.
¡¡X Y
EffectiveFrom
¡¡Y f
:
¡¡f g
$str
¡¡g r
}
¡¡r s
$str¡¡s Ç
{¡¡Ç É
status¡¡É â
}¡¡â ä
$str¡¡ä è
"¡¡è ê
)
¬¬ 
;
¬¬ 
if
≈≈ 
(
≈≈ 
ctc
≈≈ 
.
≈≈ 
CreatedByUserId
≈≈ #
>
≈≈$ %
$num
≈≈& '
)
≈≈' (
{
∆∆ 
var
«« 
creator
«« 
=
«« 
await
«« #
_db
««$ '
.
««' (
Users
««( -
.
««- .
	FindAsync
««. 7
(
««7 8
ctc
««8 ;
.
««; <
CreatedByUserId
««< K
)
««K L
;
««L M
if
»» 
(
»» 
creator
»» 
!=
»» 
null
»» #
)
»»# $
{
…… 
_db
   
.
   
Notifications
   %
.
  % &
Add
  & )
(
  ) *
new
ÀÀ 
Notification
ÀÀ (
{
ÃÃ 
UserId
ÕÕ "
=
ÕÕ# $
creator
ÕÕ% ,
.
ÕÕ, -
Id
ÕÕ- /
,
ÕÕ/ 0
Subject
ŒŒ #
=
ŒŒ$ %
$str
ŒŒ& <
,
ŒŒ< =
Message
œœ #
=
œœ$ %
$"
––  "
$str
––" :
{
––: ;
ctc
––; >
.
––> ?
EmployeeProfile
––? N
.
––N O
User
––O S
.
––S T
FullName
––T \
}
––\ ]
$str
––] h
{
––h i
ctc
––i l
.
––l m
EffectiveFrom
––m z
:
––z {
$str––{ Ü
}––Ü á
$str––á å
{––å ç
status––ç ì
}––ì î
$str––î ï
"––ï ñ
,––ñ ó
}
—— 
)
““ 
;
““ 
await
”” 
_db
”” 
.
”” 
SaveChangesAsync
”” .
(
””. /
)
””/ 0
;
””0 1
await
’’ 
_email
’’  
.
’’  ! 
SendTemplatedAsync
’’! 3
(
’’3 4
creator
÷÷ 
.
÷÷  
Email
÷÷  %
,
÷÷% &
$str
◊◊ .
,
◊◊. /
$"
ÿÿ 
$str
ÿÿ  
{
ÿÿ  !
creator
ÿÿ! (
.
ÿÿ( )
FullName
ÿÿ) 1
}
ÿÿ1 2
$str
ÿÿ2 P
{
ÿÿP Q
ctc
ÿÿQ T
.
ÿÿT U
EmployeeProfile
ÿÿU d
.
ÿÿd e
User
ÿÿe i
.
ÿÿi j
FullName
ÿÿj r
}
ÿÿr s
$str
ÿÿs ~
{
ÿÿ~ 
ctcÿÿ Ç
.ÿÿÇ É
EffectiveFromÿÿÉ ê
:ÿÿê ë
$strÿÿë ú
}ÿÿú ù
$strÿÿù •
{ÿÿ• ¶
statusÿÿ¶ ¨
}ÿÿ¨ ≠
$strÿÿ≠ ≤
"ÿÿ≤ ≥
)
ŸŸ 
;
ŸŸ 
}
⁄⁄ 
}
€€ 
return
›› 
Ok
›› 
(
›› 
new
›› 
{
›› 
Message
›› #
=
››$ %
$"
››& (
$str
››( /
{
››/ 0
ctc
››0 3
.
››3 4
Id
››4 6
}
››6 7
$str
››7 B
{
››B C
status
››C I
}
››I J
"
››J K
}
››L M
)
››M N
;
››N O
}
ﬁﬁ 	
[
„„ 	
HttpPost
„„	 
(
„„ 
$str
„„ /
)
„„/ 0
]
„„0 1
public
‰‰ 
async
‰‰ 
Task
‰‰ 
<
‰‰ 
IActionResult
‰‰ '
>
‰‰' (
SetPayslipStatus
‰‰) 9
(
‰‰9 :
int
ÂÂ 
	payslipId
ÂÂ 
,
ÂÂ 
[
ÊÊ 
	FromQuery
ÊÊ 
]
ÊÊ 
ApprovalStatus
ÊÊ &
status
ÊÊ' -
)
ÁÁ 	
{
ËË 	
var
ÈÈ 
slip
ÈÈ 
=
ÈÈ 
await
ÈÈ 
_db
ÈÈ  
.
ÍÍ 
Payslips
ÍÍ 
.
ÍÍ 
Include
ÍÍ !
(
ÍÍ! "
p
ÍÍ" #
=>
ÍÍ$ &
p
ÍÍ' (
.
ÍÍ( )
EmployeeProfile
ÍÍ) 8
)
ÍÍ8 9
.
ÎÎ 
ThenInclude
ÎÎ 
(
ÎÎ 
ep
ÎÎ 
=>
ÎÎ  "
ep
ÎÎ# %
.
ÎÎ% &
User
ÎÎ& *
)
ÎÎ* +
.
ÏÏ !
FirstOrDefaultAsync
ÏÏ $
(
ÏÏ$ %
p
ÏÏ% &
=>
ÏÏ' )
p
ÏÏ* +
.
ÏÏ+ ,
Id
ÏÏ, .
==
ÏÏ/ 1
	payslipId
ÏÏ2 ;
)
ÏÏ; <
;
ÏÏ< =
if
ÓÓ 
(
ÓÓ 
slip
ÓÓ 
==
ÓÓ 
null
ÓÓ 
)
ÓÓ 
return
ÔÔ 
NotFound
ÔÔ 
(
ÔÔ  
)
ÔÔ  !
;
ÔÔ! "
slip
ÒÒ 
.
ÒÒ 
Status
ÒÒ 
=
ÒÒ 
status
ÒÒ  
;
ÒÒ  !
slip
ÚÚ 
.
ÚÚ 
	UpdatedAt
ÚÚ 
=
ÚÚ 
DateTime
ÚÚ %
.
ÚÚ% &
UtcNow
ÚÚ& ,
;
ÚÚ, -
await
ÛÛ 
_db
ÛÛ 
.
ÛÛ 
SaveChangesAsync
ÛÛ &
(
ÛÛ& '
)
ÛÛ' (
;
ÛÛ( )
await
ˆˆ 
_audit
ˆˆ 
.
ˆˆ 
LogAsync
ˆˆ !
(
ˆˆ! "
$"
˜˜ 
$str
˜˜ 
{
˜˜ 
slip
˜˜ "
.
˜˜" #
EmployeeProfile
˜˜# 2
.
˜˜2 3
User
˜˜3 7
.
˜˜7 8
FullName
˜˜8 @
}
˜˜@ A
$str
˜˜A C
{
˜˜C D
slip
˜˜D H
.
˜˜H I
EmployeeProfile
˜˜I X
.
˜˜X Y
User
˜˜Y ]
.
˜˜] ^
Email
˜˜^ c
}
˜˜c d
$str
˜˜d e
"
˜˜e f
,
˜˜f g
slip
¯¯ 
.
¯¯ 
Id
¯¯ 
,
¯¯ 
$str
˘˘ 
,
˘˘  
$"
˙˙ 
$str
˙˙ 
{
˙˙ 
slip
˙˙ 
.
˙˙  
Month
˙˙  %
}
˙˙% &
$str
˙˙& '
{
˙˙' (
slip
˙˙( ,
.
˙˙, -
Year
˙˙- 1
}
˙˙1 2
$str
˙˙2 =
{
˙˙= >
status
˙˙> D
}
˙˙D E
"
˙˙E F
,
˙˙F G
CurrentUserId
˚˚ 
,
˚˚ 
CurrentUserEmail
¸¸  
)
˝˝ 
;
˝˝ 
_db
ÄÄ 
.
ÄÄ 
Notifications
ÄÄ 
.
ÄÄ 
Add
ÄÄ !
(
ÄÄ! "
new
ÅÅ 
Notification
ÅÅ  
{
ÇÇ 
UserId
ÉÉ 
=
ÉÉ 
slip
ÉÉ !
.
ÉÉ! "
EmployeeProfile
ÉÉ" 1
.
ÉÉ1 2
User
ÉÉ2 6
.
ÉÉ6 7
Id
ÉÉ7 9
,
ÉÉ9 :
Subject
ÑÑ 
=
ÑÑ 
$str
ÑÑ 6
,
ÑÑ6 7
Message
ÖÖ 
=
ÖÖ 
$"
ÖÖ  
$str
ÖÖ  1
{
ÖÖ1 2
slip
ÖÖ2 6
.
ÖÖ6 7
Month
ÖÖ7 <
}
ÖÖ< =
$str
ÖÖ= >
{
ÖÖ> ?
slip
ÖÖ? C
.
ÖÖC D
Year
ÖÖD H
}
ÖÖH I
$str
ÖÖI X
{
ÖÖX Y
status
ÖÖY _
}
ÖÖ_ `
$str
ÖÖ` a
"
ÖÖa b
,
ÖÖb c
}
ÜÜ 
)
áá 
;
áá 
await
àà 
_db
àà 
.
àà 
SaveChangesAsync
àà &
(
àà& '
)
àà' (
;
àà( )
await
ää 
_email
ää 
.
ää  
SendTemplatedAsync
ää +
(
ää+ ,
slip
ãã 
.
ãã 
EmployeeProfile
ãã $
.
ãã$ %
User
ãã% )
.
ãã) *
Email
ãã* /
,
ãã/ 0
$str
åå (
,
åå( )
$"
çç 
$str
çç 
{
çç 
slip
çç 
.
çç 
EmployeeProfile
çç -
.
çç- .
User
çç. 2
.
çç2 3
FullName
çç3 ;
}
çç; <
$str
çç< S
{
ççS T
slip
ççT X
.
ççX Y
Month
ççY ^
}
çç^ _
$str
çç_ `
{
çç` a
slip
çça e
.
ççe f
Year
ççf j
}
ççj k
$str
ççk z
{
ççz {
statusçç{ Å
}ççÅ Ç
$strççÇ á
"ççá à
)
éé 
;
éé 
if
ëë 
(
ëë 
slip
ëë 
.
ëë 
CreatedByUserId
ëë $
>
ëë% &
$num
ëë' (
)
ëë( )
{
íí 
var
ìì 
creator
ìì 
=
ìì 
await
ìì #
_db
ìì$ '
.
ìì' (
Users
ìì( -
.
ìì- .
	FindAsync
ìì. 7
(
ìì7 8
slip
ìì8 <
.
ìì< =
CreatedByUserId
ìì= L
)
ììL M
;
ììM N
if
îî 
(
îî 
creator
îî 
!=
îî 
null
îî #
)
îî# $
{
ïï 
_db
ññ 
.
ññ 
Notifications
ññ %
.
ññ% &
Add
ññ& )
(
ññ) *
new
óó 
Notification
óó (
{
òò 
UserId
ôô "
=
ôô# $
creator
ôô% ,
.
ôô, -
Id
ôô- /
,
ôô/ 0
Subject
öö #
=
öö$ %
$str
öö& @
,
öö@ A
Message
õõ #
=
õõ$ %
$"
úú  "
$str
úú" >
{
úú> ?
slip
úú? C
.
úúC D
EmployeeProfile
úúD S
.
úúS T
User
úúT X
.
úúX Y
FullName
úúY a
}
úúa b
$str
úúb d
{
úúd e
slip
úúe i
.
úúi j
Month
úúj o
}
úúo p
$str
úúp q
{
úúq r
slip
úúr v
.
úúv w
Year
úúw {
}
úú{ |
$strúú| Ç
{úúÇ É
statusúúÉ â
}úúâ ä
$strúúä ã
"úúã å
,úúå ç
}
ùù 
)
ûû 
;
ûû 
await
üü 
_db
üü 
.
üü 
SaveChangesAsync
üü .
(
üü. /
)
üü/ 0
;
üü0 1
await
°° 
_email
°°  
.
°°  ! 
SendTemplatedAsync
°°! 3
(
°°3 4
creator
¢¢ 
.
¢¢  
Email
¢¢  %
,
¢¢% &
$str
££ 2
,
££2 3
$"
§§ 
$str
§§  
{
§§  !
creator
§§! (
.
§§( )
FullName
§§) 1
}
§§1 2
$str
§§2 T
{
§§T U
slip
§§U Y
.
§§Y Z
EmployeeProfile
§§Z i
.
§§i j
User
§§j n
.
§§n o
FullName
§§o w
}
§§w x
$str
§§x z
{
§§z {
slip
§§{ 
.§§ Ä
Month§§Ä Ö
}§§Ö Ü
$str§§Ü á
{§§á à
slip§§à å
.§§å ç
Year§§ç ë
}§§ë í
$str§§í õ
{§§õ ú
status§§ú ¢
}§§¢ £
$str§§£ ®
"§§® ©
)
•• 
;
•• 
}
¶¶ 
}
ßß 
return
©© 
Ok
©© 
(
©© 
new
©© 
{
©© 
Message
©© #
=
©©$ %
$"
©©& (
$str
©©( :
{
©©: ;
status
©©; A
}
©©A B
"
©©B C
}
©©D E
)
©©E F
;
©©F G
}
™™ 	
[
ØØ 	
HttpGet
ØØ	 
(
ØØ 
$str
ØØ ,
)
ØØ, -
]
ØØ- .
public
∞∞ 
async
∞∞ 
Task
∞∞ 
<
∞∞ 
IActionResult
∞∞ '
>
∞∞' (
MonthlySummary
∞∞) 7
(
∞∞7 8
[
∞∞8 9
	FromQuery
∞∞9 B
]
∞∞B C
int
∞∞D G
year
∞∞H L
,
∞∞L M
[
∞∞N O
	FromQuery
∞∞O X
]
∞∞X Y
int
∞∞Z ]
month
∞∞^ c
)
∞∞c d
{
±± 	
var
≤≤ 
q
≤≤ 
=
≤≤ 
_db
≤≤ 
.
≥≥ 
Payslips
≥≥ 
.
≥≥ 
Include
≥≥ !
(
≥≥! "
p
≥≥" #
=>
≥≥$ &
p
≥≥' (
.
≥≥( )
EmployeeProfile
≥≥) 8
)
≥≥8 9
.
¥¥ 
ThenInclude
¥¥ 
(
¥¥ 
ep
¥¥ 
=>
¥¥  "
ep
¥¥# %
.
¥¥% &

Department
¥¥& 0
)
¥¥0 1
.
µµ 
Where
µµ 
(
µµ 
p
µµ 
=>
µµ 
p
µµ 
.
µµ 
Year
µµ "
==
µµ# %
year
µµ& *
&&
µµ+ -
p
µµ. /
.
µµ/ 0
Month
µµ0 5
==
µµ6 8
month
µµ9 >
)
µµ> ?
;
µµ? @
var
∑∑ 
byDept
∑∑ 
=
∑∑ 
await
∑∑ 
q
∑∑  
.
∑∑  !
GroupBy
∑∑! (
(
∑∑( )
p
∑∑) *
=>
∑∑+ -
p
∏∏ 
.
∏∏ 
EmployeeProfile
∏∏ %
.
∏∏% &

Department
∏∏& 0
!=
∏∏1 3
null
∏∏4 8
?
ππ 
p
ππ 
.
ππ 
EmployeeProfile
ππ +
.
ππ+ ,

Department
ππ, 6
.
ππ6 7
Name
ππ7 ;
:
∫∫ 
$str
∫∫ &
)
ªª 
.
ºº 
Select
ºº 
(
ºº 
g
ºº 
=>
ºº 
new
ºº  
{
ΩΩ 

Department
ææ 
=
ææ  
g
ææ! "
.
ææ" #
Key
ææ# &
,
ææ& '
TotalNet
øø 
=
øø 
g
øø  
.
øø  !
Sum
øø! $
(
øø$ %
x
øø% &
=>
øø' )
x
øø* +
.
øø+ ,
NetPay
øø, 2
)
øø2 3
,
øø3 4

AverageNet
¿¿ 
=
¿¿  
g
¿¿! "
.
¿¿" #
Average
¿¿# *
(
¿¿* +
x
¿¿+ ,
=>
¿¿- /
x
¿¿0 1
.
¿¿1 2
NetPay
¿¿2 8
)
¿¿8 9
,
¿¿9 :
Count
¡¡ 
=
¡¡ 
g
¡¡ 
.
¡¡ 
Count
¡¡ #
(
¡¡# $
)
¡¡$ %
,
¡¡% &
}
¬¬ 
)
¬¬ 
.
√√ 
ToListAsync
√√ 
(
√√ 
)
√√ 
;
√√ 
return
≈≈ 
Ok
≈≈ 
(
≈≈ 
byDept
≈≈ 
)
≈≈ 
;
≈≈ 
}
∆∆ 	
[
ÀÀ 	
HttpGet
ÀÀ	 
(
ÀÀ 
$str
ÀÀ $
)
ÀÀ$ %
]
ÀÀ% &
public
ÃÃ 
async
ÃÃ 
Task
ÃÃ 
<
ÃÃ 
IActionResult
ÃÃ '
>
ÃÃ' (
CompareMonths
ÃÃ) 6
(
ÃÃ6 7
[
ÕÕ 
	FromQuery
ÕÕ 
]
ÕÕ 
int
ÕÕ 
year1
ÕÕ !
,
ÕÕ! "
[
ŒŒ 
	FromQuery
ŒŒ 
]
ŒŒ 
int
ŒŒ 
month1
ŒŒ "
,
ŒŒ" #
[
œœ 
	FromQuery
œœ 
]
œœ 
int
œœ 
year2
œœ !
,
œœ! "
[
–– 
	FromQuery
–– 
]
–– 
int
–– 
month2
–– "
)
—— 	
{
““ 	
var
”” 
a
”” 
=
”” 
await
”” 
_db
”” 
.
‘‘ 
Payslips
‘‘ 
.
‘‘ 
Where
‘‘ 
(
‘‘  
p
‘‘  !
=>
‘‘" $
p
‘‘% &
.
‘‘& '
Year
‘‘' +
==
‘‘, .
year1
‘‘/ 4
&&
‘‘5 7
p
‘‘8 9
.
‘‘9 :
Month
‘‘: ?
==
‘‘@ B
month1
‘‘C I
)
‘‘I J
.
’’ 
SumAsync
’’ 
(
’’ 
p
’’ 
=>
’’ 
p
’’  
.
’’  !
NetPay
’’! '
)
’’' (
;
’’( )
var
÷÷ 
b
÷÷ 
=
÷÷ 
await
÷÷ 
_db
÷÷ 
.
◊◊ 
Payslips
◊◊ 
.
◊◊ 
Where
◊◊ 
(
◊◊  
p
◊◊  !
=>
◊◊" $
p
◊◊% &
.
◊◊& '
Year
◊◊' +
==
◊◊, .
year2
◊◊/ 4
&&
◊◊5 7
p
◊◊8 9
.
◊◊9 :
Month
◊◊: ?
==
◊◊@ B
month2
◊◊C I
)
◊◊I J
.
ÿÿ 
SumAsync
ÿÿ 
(
ÿÿ 
p
ÿÿ 
=>
ÿÿ 
p
ÿÿ  
.
ÿÿ  !
NetPay
ÿÿ! '
)
ÿÿ' (
;
ÿÿ( )
var
ŸŸ 
diff
ŸŸ 
=
ŸŸ 
b
ŸŸ 
-
ŸŸ 
a
ŸŸ 
;
ŸŸ 
var
⁄⁄ 
pct
⁄⁄ 
=
⁄⁄ 
a
⁄⁄ 
==
⁄⁄ 
$num
⁄⁄ 
?
⁄⁄ 
$num
⁄⁄  
:
⁄⁄! "
(
⁄⁄# $
diff
⁄⁄$ (
/
⁄⁄) *
a
⁄⁄+ ,
)
⁄⁄, -
*
⁄⁄. /
$num
⁄⁄0 4
;
⁄⁄4 5
return
‹‹ 
Ok
‹‹ 
(
‹‹ 
new
›› 
{
ﬁﬁ 
PeriodA
ﬂﬂ 
=
ﬂﬂ 
new
ﬂﬂ !
{
‡‡ 
year1
·· 
,
·· 
month1
‚‚ 
,
‚‚ 
TotalNet
„„  
=
„„! "
a
„„# $
,
„„$ %
}
‰‰ 
,
‰‰ 
PeriodB
ÂÂ 
=
ÂÂ 
new
ÂÂ !
{
ÊÊ 
year2
ÁÁ 
,
ÁÁ 
month2
ËË 
,
ËË 
TotalNet
ÈÈ  
=
ÈÈ! "
b
ÈÈ# $
,
ÈÈ$ %
}
ÍÍ 
,
ÍÍ 

Difference
ÎÎ 
=
ÎÎ  
diff
ÎÎ! %
,
ÎÎ% &
PercentChange
ÏÏ !
=
ÏÏ" #
Math
ÏÏ$ (
.
ÏÏ( )
Round
ÏÏ) .
(
ÏÏ. /
pct
ÏÏ/ 2
,
ÏÏ2 3
$num
ÏÏ4 5
)
ÏÏ5 6
,
ÏÏ6 7
}
ÌÌ 
)
ÓÓ 
;
ÓÓ 
}
ÔÔ 	
[
ÙÙ 	
HttpGet
ÙÙ	 
(
ÙÙ 
$str
ÙÙ &
)
ÙÙ& '
]
ÙÙ' (
public
ıı 
async
ıı 
Task
ıı 
<
ıı 
IActionResult
ıı '
>
ıı' (
	Anomalies
ıı) 2
(
ıı2 3
[
ˆˆ 
	FromQuery
ˆˆ 
]
ˆˆ 
int
ˆˆ 
year
ˆˆ  
,
ˆˆ  !
[
˜˜ 
	FromQuery
˜˜ 
]
˜˜ 
int
˜˜ 
month
˜˜ !
,
˜˜! "
[
¯¯ 
	FromQuery
¯¯ 
]
¯¯ 
decimal
¯¯ 
thresholdPercent
¯¯  0
=
¯¯1 2
$num
¯¯3 6
)
˘˘ 	
{
˙˙ 	
var
˚˚ 
current
˚˚ 
=
˚˚ 
await
˚˚ 
_db
˚˚  #
.
¸¸ 
Payslips
¸¸ 
.
¸¸ 
Include
¸¸ !
(
¸¸! "
p
¸¸" #
=>
¸¸$ &
p
¸¸' (
.
¸¸( )
EmployeeProfile
¸¸) 8
)
¸¸8 9
.
˝˝ 
ThenInclude
˝˝ 
(
˝˝ 
ep
˝˝ 
=>
˝˝  "
ep
˝˝# %
.
˝˝% &
User
˝˝& *
)
˝˝* +
.
˛˛ 
Where
˛˛ 
(
˛˛ 
p
˛˛ 
=>
˛˛ 
p
˛˛ 
.
˛˛ 
Year
˛˛ "
==
˛˛# %
year
˛˛& *
&&
˛˛+ -
p
˛˛. /
.
˛˛/ 0
Month
˛˛0 5
==
˛˛6 8
month
˛˛9 >
)
˛˛> ?
.
ˇˇ 
ToListAsync
ˇˇ 
(
ˇˇ 
)
ˇˇ 
;
ˇˇ 
var
ÅÅ 
	prevMonth
ÅÅ 
=
ÅÅ 
month
ÅÅ !
==
ÅÅ" $
$num
ÅÅ% &
?
ÅÅ' (
$num
ÅÅ) +
:
ÅÅ, -
month
ÅÅ. 3
-
ÅÅ4 5
$num
ÅÅ6 7
;
ÅÅ7 8
var
ÇÇ 
prevYear
ÇÇ 
=
ÇÇ 
month
ÇÇ  
==
ÇÇ! #
$num
ÇÇ$ %
?
ÇÇ& '
year
ÇÇ( ,
-
ÇÇ- .
$num
ÇÇ/ 0
:
ÇÇ1 2
year
ÇÇ3 7
;
ÇÇ7 8
var
ÑÑ 
prev
ÑÑ 
=
ÑÑ 
await
ÑÑ 
_db
ÑÑ  
.
ÖÖ 
Payslips
ÖÖ 
.
ÖÖ 
Where
ÖÖ 
(
ÖÖ  
p
ÖÖ  !
=>
ÖÖ" $
p
ÖÖ% &
.
ÖÖ& '
Year
ÖÖ' +
==
ÖÖ, .
prevYear
ÖÖ/ 7
&&
ÖÖ8 :
p
ÖÖ; <
.
ÖÖ< =
Month
ÖÖ= B
==
ÖÖC E
	prevMonth
ÖÖF O
)
ÖÖO P
.
ÜÜ 
ToListAsync
ÜÜ 
(
ÜÜ 
)
ÜÜ 
;
ÜÜ 
var
àà 
	anomalies
àà 
=
àà 
current
àà #
.
ââ 
Select
ââ 
(
ââ 
c
ââ 
=>
ââ 
{
ää 
var
ãã 
p
ãã 
=
ãã 
prev
ãã  
.
ãã  !
FirstOrDefault
ãã! /
(
ãã/ 0
x
ãã0 1
=>
ãã2 4
x
ãã5 6
.
ãã6 7
EmployeeProfileId
ãã7 H
==
ããI K
c
ããL M
.
ããM N
EmployeeProfileId
ããN _
)
ãã_ `
;
ãã` a
if
åå 
(
åå 
p
åå 
==
åå 
null
åå !
)
åå! "
return
çç 
new
çç "
{
éé 
c
èè 
.
èè 
Id
èè  
,
èè  !
c
êê 
.
êê 
EmployeeProfileId
êê /
,
êê/ 0
ChangePercent
ëë )
=
ëë* +
$num
ëë, .
,
ëë. /
	IsAnomaly
íí %
=
íí& '
false
íí( -
,
íí- .
}
ìì 
;
ìì 
var
îî 
change
îî 
=
îî  
p
îî! "
.
îî" #
NetPay
îî# )
==
îî* ,
$num
îî- .
?
îî/ 0
$num
îî1 2
:
îî3 4
(
îî5 6
(
îî6 7
c
îî7 8
.
îî8 9
NetPay
îî9 ?
-
îî@ A
p
îîB C
.
îîC D
NetPay
îîD J
)
îîJ K
/
îîL M
p
îîN O
.
îîO P
NetPay
îîP V
)
îîV W
*
îîX Y
$num
îîZ ^
;
îî^ _
return
ïï 
new
ïï 
{
ññ 
c
óó 
.
óó 
Id
óó 
,
óó 
c
òò 
.
òò 
EmployeeProfileId
òò +
,
òò+ ,
ChangePercent
ôô %
=
ôô& '
Math
ôô( ,
.
ôô, -
Round
ôô- 2
(
ôô2 3
change
ôô3 9
,
ôô9 :
$num
ôô; <
)
ôô< =
,
ôô= >
	IsAnomaly
öö !
=
öö" #
Math
öö$ (
.
öö( )
Abs
öö) ,
(
öö, -
change
öö- 3
)
öö3 4
>=
öö5 7
thresholdPercent
öö8 H
,
ööH I
}
õõ 
;
õõ 
}
úú 
)
úú 
.
ùù 
Where
ùù 
(
ùù 
x
ùù 
=>
ùù 
x
ùù 
.
ùù 
	IsAnomaly
ùù '
)
ùù' (
;
ùù( )
return
üü 
Ok
üü 
(
üü 
	anomalies
üü 
)
üü  
;
üü  !
}
†† 	
}
°° 
}¢¢ ¶ß
QD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Controllers\HRController.cs
	namespace 	

PayrollApi
 
. 
Controllers  
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
[ 
Route 

(
 
$str 
) 
] 
[ 
	Authorize 
( 
Roles 
= 
$str +
)+ ,
], -
public 

class 
HRController 
: 
ControllerBase  .
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
private 
readonly 
IPayrollService (
_payroll) 1
;1 2
private 
readonly 
IEmailService &
_email' -
;- .
private 
readonly 
IAuditService &
_audit' -
;- .
public 
HRController 
( 
AppDbContext 
db 
, 
IPayrollService 
payroll #
,# $
IEmailService 
email 
,  
IAuditService 
audit 
) 	
{ 	
_db   
=   
db   
;   
_payroll!! 
=!! 
payroll!! 
;!! 
_email"" 
="" 
email"" 
;"" 
_audit## 
=## 
audit## 
;## 
}$$ 	
private)) 
int)) 
CurrentUserId)) !
=>))" $
int))% (
.))( )
Parse))) .
()). /
User))/ 3
.))3 4
FindFirstValue))4 B
())B C

ClaimTypes))C M
.))M N
NameIdentifier))N \
)))\ ]
!))] ^
)))^ _
;))_ `
private.. 
string.. 
CurrentUserEmail.. '
=>..( *
User..+ /
.../ 0
FindFirstValue..0 >
(..> ?

ClaimTypes..? I
...I J
Email..J O
)..O P
??..Q S
$str..T \
;..\ ]
[33 	
HttpGet33	 
(33 
$str33 
)33 
]33 
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' (
GetEmployees44) 5
(445 6
[55 
	FromQuery55 
]55 
int55 
page55  
=55! "
$num55# $
,55$ %
[66 
	FromQuery66 
]66 
int66 
pageSize66 $
=66% &
$num66' )
,66) *
[77 
	FromQuery77 
]77 
string77 
?77 
search77  &
=77' (
null77) -
,77- .
[88 
	FromQuery88 
]88 
int88 
?88 
departmentId88 )
=88* +
null88, 0
)99 	
{:: 	
var;; 
q;; 
=;; 
_db;; 
.;; 
Users;; 
.;; 
Include;; %
(;;% &
u;;& '
=>;;( *
u;;+ ,
.;;, -
Profile;;- 4
);;4 5
.;;5 6
ThenInclude;;6 A
(;;A B
p;;B C
=>;;D F
p;;G H
.;;H I

Department;;I S
);;S T
.;;T U
AsQueryable;;U `
(;;` a
);;a b
;;;b c
q>> 
=>> 
q>> 
.>> 
Where>> 
(>> 
u>> 
=>>> 
u>> 
.>> 
Role>> #
!=>>$ &
UserRole>>' /
.>>/ 0
Admin>>0 5
)>>5 6
;>>6 7
ifAA 
(AA 
!AA 
stringAA 
.AA 
IsNullOrWhiteSpaceAA *
(AA* +
searchAA+ 1
)AA1 2
)AA2 3
{BB 
varCC 
loweredCC 
=CC 
searchCC $
.CC$ %
ToLowerCC% ,
(CC, -
)CC- .
;CC. /
qDD 
=DD 
qDD 
.DD 
WhereDD 
(DD 
uDD 
=>DD  
uEE 
.EE 
FullNameEE 
.EE 
ToLowerEE &
(EE& '
)EE' (
.EE( )
ContainsEE) 1
(EE1 2
loweredEE2 9
)EE9 :
||EE; =
uEE> ?
.EE? @
EmailEE@ E
.EEE F
ToLowerEEF M
(EEM N
)EEN O
.EEO P
ContainsEEP X
(EEX Y
loweredEEY `
)EE` a
)FF 
;FF 
}GG 
ifJJ 
(JJ 
departmentIdJJ 
.JJ 
HasValueJJ %
)JJ% &
{KK 
qLL 
=LL 
qLL 
.LL 
WhereLL 
(LL 
uLL 
=>LL  
uLL! "
.LL" #
ProfileLL# *
!=LL+ -
nullLL. 2
&&LL3 5
uLL6 7
.LL7 8
ProfileLL8 ?
.LL? @
DepartmentIdLL@ L
==LLM O
departmentIdLLP \
.LL\ ]
ValueLL] b
)LLb c
;LLc d
}MM 
varPP 
(PP 
totalPP 
,PP 
itemsPP 
)PP 
=PP  
awaitPP! &
qPP' (
.PP( )
OrderByPP) 0
(PP0 1
uPP1 2
=>PP3 5
uPP6 7
.PP7 8
FullNamePP8 @
)PP@ A
.QQ 
SelectQQ 
(QQ 
uQQ 
=>QQ 
newQQ  
{RR 
uSS 
.SS 
IdSS 
,SS 
uTT 
.TT 
EmailTT 
,TT 
uUU 
.UU 
FullNameUU 
,UU 
uVV 
.VV 
RoleVV 
,VV 

DepartmentWW 
=WW  
uWW! "
.WW" #
ProfileWW# *
!=WW+ -
nullWW. 2
&&WW3 5
uWW6 7
.WW7 8
ProfileWW8 ?
.WW? @

DepartmentWW@ J
!=WWK M
nullWWN R
?XX 
uXX 
.XX 
ProfileXX #
.XX# $

DepartmentXX$ .
.XX. /
NameXX/ 3
:YY 
nullYY 
,YY 
}ZZ 
)ZZ 
.[[ 
ToPagedAsync[[ 
([[ 
page[[ "
,[[" #
pageSize[[$ ,
)[[, -
;[[- .
return]] 
Ok]] 
(]] 
new^^ 
PagedResult^^ 
<^^  
object^^  &
>^^& '
{__ 
Page`` 
=`` 
page`` 
,``  
PageSizeaa 
=aa 
pageSizeaa '
,aa' (
Totalbb 
=bb 
totalbb !
,bb! "
Itemscc 
=cc 
itemscc !
,cc! "
}dd 
)ee 
;ee 
}ff 	
[kk 	
HttpGetkk	 
(kk 
$strkk 
)kk 
]kk 
publicll 
asyncll 
Taskll 
<ll 
IActionResultll '
>ll' (
GetPayslipsll) 4
(ll4 5
[ll5 6
	FromQueryll6 ?
]ll? @
PayslipFilterllA N
filterllO U
)llU V
{mm 	
varnn 
qnn 
=nn 
_dbnn 
.oo 
Payslipsoo 
.oo 
Includeoo !
(oo! "
poo" #
=>oo$ &
poo' (
.oo( )
EmployeeProfileoo) 8
)oo8 9
.pp 
ThenIncludepp 
(pp 
eppp 
=>pp  "
eppp# %
.pp% &
Userpp& *
)pp* +
.qq 
Includeqq 
(qq 
pqq 
=>qq 
pqq 
.qq  
EmployeeProfileqq  /
.qq/ 0

Departmentqq0 :
)qq: ;
.rr 
Includerr 
(rr 
prr 
=>rr 
prr 
.rr  
AllowanceItemsrr  .
)rr. /
.ss 
Includess 
(ss 
pss 
=>ss 
pss 
.ss  
DeductionItemsss  .
)ss. /
.tt 
OrderByDescendingtt "
(tt" #
ptt# $
=>tt% '
ptt( )
.tt) *
	CreatedAttt* 3
)tt3 4
.uu 
AsQueryableuu 
(uu 
)uu 
;uu 
ifww 
(ww 
filterww 
.ww 
DepartmentIdww #
.ww# $
HasValueww$ ,
)ww, -
qxx 
=xx 
qxx 
.xx 
Wherexx 
(xx 
pxx 
=>xx  
pxx! "
.xx" #
EmployeeProfilexx# 2
.xx2 3
DepartmentIdxx3 ?
==xx@ B
filterxxC I
.xxI J
DepartmentIdxxJ V
)xxV W
;xxW X
ifyy 
(yy 
filteryy 
.yy 
Yearyy 
.yy 
HasValueyy $
)yy$ %
qzz 
=zz 
qzz 
.zz 
Wherezz 
(zz 
pzz 
=>zz  
pzz! "
.zz" #
Yearzz# '
==zz( *
filterzz+ 1
.zz1 2
Yearzz2 6
)zz6 7
;zz7 8
if{{ 
({{ 
filter{{ 
.{{ 
Month{{ 
.{{ 
HasValue{{ %
){{% &
q|| 
=|| 
q|| 
.|| 
Where|| 
(|| 
p|| 
=>||  
p||! "
.||" #
Month||# (
==||) +
filter||, 2
.||2 3
Month||3 8
)||8 9
;||9 :
if}} 
(}} 
!}} 
string}} 
.}} 
IsNullOrWhiteSpace}} *
(}}* +
filter}}+ 1
.}}1 2
Search}}2 8
)}}8 9
)}}9 :
q~~ 
=~~ 
q~~ 
.~~ 
Where~~ 
(~~ 
p~~ 
=>~~  
p 
. 
EmployeeProfile %
.% &
User& *
.* +
FullName+ 3
.3 4
Contains4 <
(< =
filter= C
.C D
SearchD J
)J K
||
ÄÄ 
p
ÄÄ 
.
ÄÄ 
EmployeeProfile
ÄÄ (
.
ÄÄ( )
User
ÄÄ) -
.
ÄÄ- .
Email
ÄÄ. 3
.
ÄÄ3 4
Contains
ÄÄ4 <
(
ÄÄ< =
filter
ÄÄ= C
.
ÄÄC D
Search
ÄÄD J
)
ÄÄJ K
)
ÅÅ 
;
ÅÅ 
var
ÉÉ 
(
ÉÉ 
total
ÉÉ 
,
ÉÉ 
items
ÉÉ 
)
ÉÉ 
=
ÉÉ  
await
ÉÉ! &
q
ÉÉ' (
.
ÑÑ 
OrderByDescending
ÑÑ 
(
ÑÑ 
p
ÑÑ 
=>
ÑÑ 
p
ÑÑ 
.
ÑÑ 
	CreatedAt
ÑÑ '
)
ÑÑ' (
.
ÖÖ 
ToPagedAsync
ÖÖ 
(
ÖÖ 
filter
ÖÖ 
.
ÖÖ 
Page
ÖÖ 
,
ÖÖ 
filter
ÖÖ %
.
ÖÖ% &
PageSize
ÖÖ& .
)
ÖÖ. /
;
ÖÖ/ 0
var
áá 
shaped
áá 
=
áá 
items
áá 
.
áá 
Select
áá %
(
áá% &
s
áá& '
=>
áá( *
new
áá+ .
{
àà 
s
ââ 
.
ââ 
Id
ââ 
,
ââ 
s
ää 
.
ää 
Year
ää 
,
ää 
s
ãã 
.
ãã 
Month
ãã 
,
ãã 
s
åå 
.
åå 
NetPay
åå 
,
åå 
s
çç 
.
çç 

IsReleased
çç 
,
çç 
s
éé 
.
éé 
Status
éé 
,
éé 
Employee
èè 
=
èè 
new
èè 
{
êê 
s
ëë 
.
ëë 
EmployeeProfile
ëë %
.
ëë% &
UserId
ëë& ,
,
ëë, -
s
íí 
.
íí 
EmployeeProfile
íí %
.
íí% &
User
íí& *
.
íí* +
FullName
íí+ 3
,
íí3 4
s
ìì 
.
ìì 
EmployeeProfile
ìì %
.
ìì% &
User
ìì& *
.
ìì* +
Email
ìì+ 0
,
ìì0 1
}
îî 
,
îî 

Department
ïï 
=
ïï 
s
ïï 
.
ïï 
EmployeeProfile
ïï .
.
ïï. /

Department
ïï/ 9
?
ïï9 :
.
ïï: ;
Name
ïï; ?
,
ïï? @

Allowances
ññ 
=
ññ 
s
ññ 
.
ññ 
AllowanceItems
ññ -
.
ññ- .
Select
ññ. 4
(
ññ4 5
a
ññ5 6
=>
ññ7 9
new
ññ: =
{
ññ> ?
a
ññ@ A
.
ññA B
Label
ññB G
,
ññG H
a
ññI J
.
ññJ K
Amount
ññK Q
}
ññR S
)
ññS T
,
ññT U

Deductions
óó 
=
óó 
s
óó 
.
óó 
DeductionItems
óó -
.
óó- .
Select
óó. 4
(
óó4 5
d
óó5 6
=>
óó7 9
new
óó: =
{
óó> ?
d
óó@ A
.
óóA B
Label
óóB G
,
óóG H
d
óóI J
.
óóJ K
Amount
óóK Q
}
óóR S
)
óóS T
,
óóT U
}
òò 
)
òò 
;
òò 
return
öö 
Ok
öö 
(
öö 
new
õõ 
DTOs
õõ 
.
õõ 
PagedResult
õõ $
<
õõ$ %
object
õõ% +
>
õõ+ ,
{
úú 
Page
ùù 
=
ùù 
filter
ùù !
.
ùù! "
Page
ùù" &
,
ùù& '
PageSize
ûû 
=
ûû 
filter
ûû %
.
ûû% &
PageSize
ûû& .
,
ûû. /
Total
üü 
=
üü 
total
üü !
,
üü! "
Items
†† 
=
†† 
shaped
†† "
,
††" #
}
°° 
)
¢¢ 
;
¢¢ 
}
££ 	
[
®® 	
HttpGet
®®	 
(
®® 
$str
®® 
)
®® 
]
®® 
public
©© 
async
©© 
Task
©© 
<
©© 
IActionResult
©© '
>
©©' (

GetAllCTCs
©©) 3
(
©©3 4
[
™™ 
	FromQuery
™™ 
]
™™ 
int
™™ 
page
™™  
=
™™! "
$num
™™# $
,
™™$ %
[
´´ 
	FromQuery
´´ 
]
´´ 
int
´´ 
pageSize
´´ $
=
´´% &
$num
´´' )
,
´´) *
[
¨¨ 
	FromQuery
¨¨ 
]
¨¨ 
int
¨¨ 
?
¨¨ 

employeeId
¨¨ '
=
¨¨( )
null
¨¨* .
)
≠≠ 	
{
ÆÆ 	
try
ØØ 
{
∞∞ 
var
±± 
q
±± 
=
±± 
_db
±± 
.
≤≤ 
CTCStructures
≤≤ "
.
≤≤" #
Include
≤≤# *
(
≤≤* +
c
≤≤+ ,
=>
≤≤- /
c
≤≤0 1
.
≤≤1 2
EmployeeProfile
≤≤2 A
)
≤≤A B
.
≥≥ 
ThenInclude
≥≥  
(
≥≥  !
ep
≥≥! #
=>
≥≥$ &
ep
≥≥' )
.
≥≥) *
User
≥≥* .
)
≥≥. /
.
¥¥ 
Include
¥¥ 
(
¥¥ 
c
¥¥ 
=>
¥¥ !
c
¥¥" #
.
¥¥# $
EmployeeProfile
¥¥$ 3
.
¥¥3 4

Department
¥¥4 >
)
¥¥> ?
.
µµ 
OrderByDescending
µµ &
(
µµ& '
c
µµ' (
=>
µµ) +
c
µµ, -
.
µµ- .
	CreatedAt
µµ. 7
)
µµ7 8
.
∂∂ 
AsQueryable
∂∂  
(
∂∂  !
)
∂∂! "
;
∂∂" #
if
∏∏ 
(
∏∏ 

employeeId
∏∏ 
.
∏∏ 
HasValue
∏∏ '
)
∏∏' (
{
ππ 
q
∫∫ 
=
∫∫ 
q
∫∫ 
.
∫∫ 
Where
∫∫ 
(
∫∫  
c
∫∫  !
=>
∫∫" $
c
∫∫% &
.
∫∫& '
EmployeeProfile
∫∫' 6
.
∫∫6 7
UserId
∫∫7 =
==
∫∫> @

employeeId
∫∫A K
.
∫∫K L
Value
∫∫L Q
)
∫∫Q R
;
∫∫R S
}
ªª 
var
ΩΩ 
total
ΩΩ 
=
ΩΩ 
await
ΩΩ !
q
ΩΩ" #
.
ΩΩ# $

CountAsync
ΩΩ$ .
(
ΩΩ. /
)
ΩΩ/ 0
;
ΩΩ0 1
var
øø 
items
øø 
=
øø 
await
øø !
q
øø" #
.
øø# $
Skip
øø$ (
(
øø( )
(
øø) *
page
øø* .
-
øø/ 0
$num
øø1 2
)
øø2 3
*
øø4 5
pageSize
øø6 >
)
øø> ?
.
¿¿ 
Take
¿¿ 
(
¿¿ 
pageSize
¿¿ "
)
¿¿" #
.
¡¡ 
Select
¡¡ 
(
¡¡ 
c
¡¡ 
=>
¡¡  
new
¡¡! $
{
¬¬ 
Type
√√ 
=
√√ 
$str
√√ $
,
√√$ %
c
ƒƒ 
.
ƒƒ 
Id
ƒƒ 
,
ƒƒ 
c
≈≈ 
.
≈≈ 
EffectiveFrom
≈≈ '
,
≈≈' (
c
∆∆ 
.
∆∆ 
GrossCTC
∆∆ "
,
∆∆" #
c
«« 
.
«« 
Status
««  
,
««  !
Employee
»»  
=
»»! "
c
»»# $
.
»»$ %
EmployeeProfile
»»% 4
!=
»»5 7
null
»»8 <
&&
»»= ?
c
»»@ A
.
»»A B
EmployeeProfile
»»B Q
.
»»Q R
User
»»R V
!=
»»W Y
null
»»Z ^
?
…… 
new
…… !
{
   
c
ÀÀ  !
.
ÀÀ! "
EmployeeProfile
ÀÀ" 1
.
ÀÀ1 2
UserId
ÀÀ2 8
,
ÀÀ8 9
c
ÃÃ  !
.
ÃÃ! "
EmployeeProfile
ÃÃ" 1
.
ÃÃ1 2
User
ÃÃ2 6
.
ÃÃ6 7
FullName
ÃÃ7 ?
,
ÃÃ? @
c
ÕÕ  !
.
ÕÕ! "
EmployeeProfile
ÕÕ" 1
.
ÕÕ1 2
User
ÕÕ2 6
.
ÕÕ6 7
Email
ÕÕ7 <
,
ÕÕ< =
}
ŒŒ 
:
œœ 
null
œœ "
,
œœ" #

Department
–– "
=
––# $
c
––% &
.
––& '
EmployeeProfile
––' 6
==
––7 9
null
––: >
?
—— 
null
—— "
:
““ 
(
““ 
c
””  !
.
””! "
EmployeeProfile
””" 1
.
””1 2

Department
””2 <
==
””= ?
null
””@ D
?
‘‘$ %
null
‘‘& *
:
’’$ %
c
’’& '
.
’’' (
EmployeeProfile
’’( 7
.
’’7 8

Department
’’8 B
.
’’B C
Name
’’C G
)
÷÷ 
,
÷÷ 
}
◊◊ 
)
◊◊ 
.
ÿÿ 
ToListAsync
ÿÿ  
(
ÿÿ  !
)
ÿÿ! "
;
ÿÿ" #
return
⁄⁄ 
Ok
⁄⁄ 
(
⁄⁄ 
new
€€ 
{
‹‹ 
Page
›› 
=
›› 
page
›› #
,
››# $
PageSize
ﬁﬁ  
=
ﬁﬁ! "
pageSize
ﬁﬁ# +
,
ﬁﬁ+ ,
Total
ﬂﬂ 
=
ﬂﬂ 
total
ﬂﬂ  %
,
ﬂﬂ% &
Items
‡‡ 
=
‡‡ 
items
‡‡  %
,
‡‡% &
}
·· 
)
‚‚ 
;
‚‚ 
}
„„ 
catch
‰‰ 
(
‰‰ 
	Exception
‰‰ 
ex
‰‰ 
)
‰‰  
{
ÂÂ 
return
ÊÊ 

StatusCode
ÊÊ !
(
ÊÊ! "
$num
ÊÊ" %
,
ÊÊ% &
new
ÊÊ' *
{
ÊÊ+ ,
error
ÊÊ- 2
=
ÊÊ3 4
ex
ÊÊ5 7
.
ÊÊ7 8
Message
ÊÊ8 ?
,
ÊÊ? @
stack
ÊÊA F
=
ÊÊG H
ex
ÊÊI K
.
ÊÊK L

StackTrace
ÊÊL V
}
ÊÊW X
)
ÊÊX Y
;
ÊÊY Z
}
ÁÁ 
}
ËË 	
[
ÌÌ 	
HttpGet
ÌÌ	 
(
ÌÌ 
$str
ÌÌ '
)
ÌÌ' (
]
ÌÌ( )
public
ÓÓ 
async
ÓÓ 
Task
ÓÓ 
<
ÓÓ 
IActionResult
ÓÓ '
>
ÓÓ' (
GetPayslipDetail
ÓÓ) 9
(
ÓÓ9 :
int
ÓÓ: =
id
ÓÓ> @
)
ÓÓ@ A
{
ÔÔ 	
var
 
slip
 
=
 
await
 
_db
  
.
ÒÒ 
Payslips
ÒÒ 
.
ÒÒ 
Include
ÒÒ !
(
ÒÒ! "
p
ÒÒ" #
=>
ÒÒ$ &
p
ÒÒ' (
.
ÒÒ( )
EmployeeProfile
ÒÒ) 8
)
ÒÒ8 9
.
ÚÚ 
ThenInclude
ÚÚ 
(
ÚÚ 
ep
ÚÚ 
=>
ÚÚ  "
ep
ÚÚ# %
.
ÚÚ% &
User
ÚÚ& *
)
ÚÚ* +
.
ÛÛ 
Include
ÛÛ 
(
ÛÛ 
p
ÛÛ 
=>
ÛÛ 
p
ÛÛ 
.
ÛÛ  
AllowanceItems
ÛÛ  .
)
ÛÛ. /
.
ÙÙ 
Include
ÙÙ 
(
ÙÙ 
p
ÙÙ 
=>
ÙÙ 
p
ÙÙ 
.
ÙÙ  
DeductionItems
ÙÙ  .
)
ÙÙ. /
.
ıı !
FirstOrDefaultAsync
ıı $
(
ıı$ %
p
ıı% &
=>
ıı' )
p
ıı* +
.
ıı+ ,
Id
ıı, .
==
ıı/ 1
id
ıı2 4
)
ıı4 5
;
ıı5 6
if
˜˜ 
(
˜˜ 
slip
˜˜ 
==
˜˜ 
null
˜˜ 
)
˜˜ 
return
¯¯ 
NotFound
¯¯ 
(
¯¯  
)
¯¯  !
;
¯¯! "
return
˙˙ 
Ok
˙˙ 
(
˙˙ 
new
˚˚ 
{
¸¸ 
id
˝˝ 
=
˝˝ 
slip
˝˝ 
.
˝˝ 
Id
˝˝  
,
˝˝  !
year
˛˛ 
=
˛˛ 
slip
˛˛ 
.
˛˛  
Year
˛˛  $
,
˛˛$ %
month
ˇˇ 
=
ˇˇ 
slip
ˇˇ  
.
ˇˇ  !
Month
ˇˇ! &
,
ˇˇ& '
netPay
ÄÄ 
=
ÄÄ 
slip
ÄÄ !
.
ÄÄ! "
NetPay
ÄÄ" (
,
ÄÄ( )
taxDeducted
ÅÅ 
=
ÅÅ  !
slip
ÅÅ" &
.
ÅÅ& '
TaxDeducted
ÅÅ' 2
,
ÅÅ2 3
status
ÇÇ 
=
ÇÇ 
slip
ÇÇ !
.
ÇÇ! "
Status
ÇÇ" (
,
ÇÇ( )

isReleased
ÉÉ 
=
ÉÉ  
slip
ÉÉ! %
.
ÉÉ% &

IsReleased
ÉÉ& 0
,
ÉÉ0 1
employee
ÑÑ 
=
ÑÑ 
new
ÑÑ "
{
ÖÖ 
userId
ÜÜ 
=
ÜÜ  
slip
ÜÜ! %
.
ÜÜ% &
EmployeeProfile
ÜÜ& 5
.
ÜÜ5 6
User
ÜÜ6 :
.
ÜÜ: ;
Id
ÜÜ; =
,
ÜÜ= >
fullName
áá  
=
áá! "
slip
áá# '
.
áá' (
EmployeeProfile
áá( 7
.
áá7 8
User
áá8 <
.
áá< =
FullName
áá= E
,
ááE F
email
àà 
=
àà 
slip
àà  $
.
àà$ %
EmployeeProfile
àà% 4
.
àà4 5
User
àà5 9
.
àà9 :
Email
àà: ?
,
àà? @
}
ââ 
,
ââ 

allowances
ää 
=
ää  
slip
ää! %
.
ää% &
AllowanceItems
ää& 4
.
ää4 5
Select
ää5 ;
(
ää; <
a
ää< =
=>
ää> @
new
ääA D
{
ãã 
label
åå 
=
åå 
a
åå  !
.
åå! "
Label
åå" '
,
åå' (
amount
çç 
=
çç  
a
çç! "
.
çç" #
Amount
çç# )
,
çç) *
}
éé 
)
éé 
,
éé 

deductions
èè 
=
èè  
slip
èè! %
.
èè% &
DeductionItems
èè& 4
.
èè4 5
Select
èè5 ;
(
èè; <
d
èè< =
=>
èè> @
new
èèA D
{
êê 
label
ëë 
=
ëë 
d
ëë  !
.
ëë! "
Label
ëë" '
,
ëë' (
amount
íí 
=
íí  
d
íí! "
.
íí" #
Amount
íí# )
,
íí) *
}
ìì 
)
ìì 
,
ìì 
type
îî 
=
îî 
$str
îî $
,
îî$ %
}
ïï 
)
ññ 
;
ññ 
}
óó 	
[
úú 	
HttpGet
úú	 
(
úú 
$str
úú #
)
úú# $
]
úú$ %
public
ùù 
async
ùù 
Task
ùù 
<
ùù 
IActionResult
ùù '
>
ùù' (
GetCTCDetail
ùù) 5
(
ùù5 6
int
ùù6 9
id
ùù: <
)
ùù< =
{
ûû 	
var
üü 
ctc
üü 
=
üü 
await
üü 
_db
üü 
.
†† 
CTCStructures
†† 
.
†† 
Include
†† &
(
††& '
c
††' (
=>
††) +
c
††, -
.
††- .
EmployeeProfile
††. =
)
††= >
.
°° 
ThenInclude
°° 
(
°° 
ep
°° 
=>
°°  "
ep
°°# %
.
°°% &
User
°°& *
)
°°* +
.
¢¢ 
Include
¢¢ 
(
¢¢ 
c
¢¢ 
=>
¢¢ 
c
¢¢ 
.
¢¢  

Allowances
¢¢  *
)
¢¢* +
.
££ 
Include
££ 
(
££ 
c
££ 
=>
££ 
c
££ 
.
££  

Deductions
££  *
)
££* +
.
§§ !
FirstOrDefaultAsync
§§ $
(
§§$ %
c
§§% &
=>
§§' )
c
§§* +
.
§§+ ,
Id
§§, .
==
§§/ 1
id
§§2 4
)
§§4 5
;
§§5 6
if
¶¶ 
(
¶¶ 
ctc
¶¶ 
==
¶¶ 
null
¶¶ 
)
¶¶ 
return
ßß 
NotFound
ßß 
(
ßß  
)
ßß  !
;
ßß! "
return
©© 
Ok
©© 
(
©© 
new
™™ 
{
´´ 
id
¨¨ 
=
¨¨ 
ctc
¨¨ 
.
¨¨ 
Id
¨¨ 
,
¨¨  
basic
≠≠ 
=
≠≠ 
ctc
≠≠ 
.
≠≠  
Basic
≠≠  %
,
≠≠% &
hra
ÆÆ 
=
ÆÆ 
ctc
ÆÆ 
.
ÆÆ 
HRA
ÆÆ !
,
ÆÆ! "
grossCTC
ØØ 
=
ØØ 
ctc
ØØ "
.
ØØ" #
GrossCTC
ØØ# +
,
ØØ+ ,

taxPercent
∞∞ 
=
∞∞  
ctc
∞∞! $
.
∞∞$ %

TaxPercent
∞∞% /
,
∞∞/ 0
status
±± 
=
±± 
ctc
±±  
.
±±  !
Status
±±! '
,
±±' (
effectiveFrom
≤≤ !
=
≤≤" #
ctc
≤≤$ '
.
≤≤' (
EffectiveFrom
≤≤( 5
,
≤≤5 6
employee
≥≥ 
=
≥≥ 
new
≥≥ "
{
¥¥ 
userId
µµ 
=
µµ  
ctc
µµ! $
.
µµ$ %
EmployeeProfile
µµ% 4
.
µµ4 5
User
µµ5 9
.
µµ9 :
Id
µµ: <
,
µµ< =
fullName
∂∂  
=
∂∂! "
ctc
∂∂# &
.
∂∂& '
EmployeeProfile
∂∂' 6
.
∂∂6 7
User
∂∂7 ;
.
∂∂; <
FullName
∂∂< D
,
∂∂D E
email
∑∑ 
=
∑∑ 
ctc
∑∑  #
.
∑∑# $
EmployeeProfile
∑∑$ 3
.
∑∑3 4
User
∑∑4 8
.
∑∑8 9
Email
∑∑9 >
,
∑∑> ?
}
∏∏ 
,
∏∏ 

allowances
ππ 
=
ππ  
ctc
ππ! $
.
ππ$ %

Allowances
ππ% /
.
ππ/ 0
Select
ππ0 6
(
ππ6 7
a
ππ7 8
=>
ππ9 ;
new
ππ< ?
{
∫∫ 
label
ªª 
=
ªª 
a
ªª  !
.
ªª! "
Label
ªª" '
,
ªª' (
amount
ºº 
=
ºº  
a
ºº! "
.
ºº" #
Amount
ºº# )
,
ºº) *
}
ΩΩ 
)
ΩΩ 
,
ΩΩ 

deductions
ææ 
=
ææ  
ctc
ææ! $
.
ææ$ %

Deductions
ææ% /
.
ææ/ 0
Select
ææ0 6
(
ææ6 7
d
ææ7 8
=>
ææ9 ;
new
ææ< ?
{
øø 
label
¿¿ 
=
¿¿ 
d
¿¿  !
.
¿¿! "
Label
¿¿" '
,
¿¿' (
amount
¡¡ 
=
¡¡  
d
¡¡! "
.
¡¡" #
Amount
¡¡# )
,
¡¡) *
}
¬¬ 
)
¬¬ 
,
¬¬ 
type
√√ 
=
√√ 
$str
√√  
,
√√  !
}
ƒƒ 
)
≈≈ 
;
≈≈ 
}
∆∆ 	
[
ÀÀ 	
HttpPost
ÀÀ	 
(
ÀÀ 
$str
ÀÀ (
)
ÀÀ( )
]
ÀÀ) *
public
ÃÃ 
async
ÃÃ 
Task
ÃÃ 
<
ÃÃ 
IActionResult
ÃÃ '
>
ÃÃ' (
	CreateCTC
ÃÃ) 2
(
ÃÃ2 3
int
ÃÃ3 6
employeeUserId
ÃÃ7 E
,
ÃÃE F

CTCRequest
ÃÃG Q
req
ÃÃR U
)
ÃÃU V
{
ÕÕ 	
var
ŒŒ 
user
ŒŒ 
=
ŒŒ 
await
ŒŒ 
_db
ŒŒ  
.
œœ 
Users
œœ 
.
œœ 
Include
œœ 
(
œœ 
u
œœ  
=>
œœ! #
u
œœ$ %
.
œœ% &
Profile
œœ& -
)
œœ- .
.
–– 
ThenInclude
–– 
(
–– 
p
–– 
=>
–– !
p
––" #
.
––# $

Department
––$ .
)
––. /
.
—— 
Include
—— 
(
—— 
u
—— 
=>
—— 
u
—— 
.
——  
Profile
——  '
!
——' (
.
——( )
CTCStructures
——) 6
)
——6 7
.
““ !
FirstOrDefaultAsync
““ $
(
““$ %
u
““% &
=>
““' )
u
““* +
.
““+ ,
Id
““, .
==
““/ 1
employeeUserId
““2 @
)
““@ A
;
““A B
if
‘‘ 
(
‘‘ 
user
‘‘ 
?
‘‘ 
.
‘‘ 
Profile
‘‘ 
==
‘‘  
null
‘‘! %
)
‘‘% &
return
’’ 
NotFound
’’ 
(
’’  
$str
’’  <
)
’’< =
;
’’= >
if
◊◊ 
(
◊◊ 
req
◊◊ 
.
◊◊ 
Basic
◊◊ 
<=
◊◊ 
$num
◊◊ 
)
◊◊ 
return
ÿÿ 

BadRequest
ÿÿ !
(
ÿÿ! "
new
ÿÿ" %
{
ÿÿ& '
error
ÿÿ( -
=
ÿÿ. /
$str
ÿÿ0 R
}
ÿÿS T
)
ÿÿT U
;
ÿÿU V
if
ŸŸ 
(
ŸŸ 
req
ŸŸ 
.
ŸŸ 
HRA
ŸŸ 
<
ŸŸ 
$num
ŸŸ 
)
ŸŸ 
return
⁄⁄ 

BadRequest
⁄⁄ !
(
⁄⁄! "
new
⁄⁄" %
{
⁄⁄& '
error
⁄⁄( -
=
⁄⁄. /
$str
⁄⁄0 H
}
⁄⁄I J
)
⁄⁄J K
;
⁄⁄K L
if
€€ 
(
€€ 
req
€€ 
.
€€ 
HRA
€€ 
>
€€ 
req
€€ 
.
€€ 
Basic
€€ #
*
€€$ %
$num
€€& *
)
€€* +
return
‹‹ 

BadRequest
‹‹ !
(
‹‹! "
new
‹‹" %
{
‹‹& '
error
‹‹( -
=
‹‹. /
$str
‹‹0 P
}
‹‹Q R
)
‹‹R S
;
‹‹S T
if
›› 
(
›› 
req
›› 
.
›› 
AllowanceItems
›› "
.
››" #
GroupBy
››# *
(
››* +
a
››+ ,
=>
››- /
a
››0 1
.
››1 2
Label
››2 7
.
››7 8
ToLower
››8 ?
(
››? @
)
››@ A
)
››A B
.
››B C
Any
››C F
(
››F G
g
››G H
=>
››I K
g
››L M
.
››M N
Count
››N S
(
››S T
)
››T U
>
››V W
$num
››X Y
)
››Y Z
)
››Z [
return
ﬁﬁ 

BadRequest
ﬁﬁ !
(
ﬁﬁ! "
new
ﬁﬁ" %
{
ﬁﬁ& '
error
ﬁﬁ( -
=
ﬁﬁ. /
$str
ﬁﬁ0 X
}
ﬁﬁY Z
)
ﬁﬁZ [
;
ﬁﬁ[ \
if
ﬂﬂ 
(
ﬂﬂ 
req
ﬂﬂ 
.
ﬂﬂ 
DeductionItems
ﬂﬂ "
.
ﬂﬂ" #
GroupBy
ﬂﬂ# *
(
ﬂﬂ* +
d
ﬂﬂ+ ,
=>
ﬂﬂ- /
d
ﬂﬂ0 1
.
ﬂﬂ1 2
Label
ﬂﬂ2 7
.
ﬂﬂ7 8
ToLower
ﬂﬂ8 ?
(
ﬂﬂ? @
)
ﬂﬂ@ A
)
ﬂﬂA B
.
ﬂﬂB C
Any
ﬂﬂC F
(
ﬂﬂF G
g
ﬂﬂG H
=>
ﬂﬂI K
g
ﬂﬂL M
.
ﬂﬂM N
Count
ﬂﬂN S
(
ﬂﬂS T
)
ﬂﬂT U
>
ﬂﬂV W
$num
ﬂﬂX Y
)
ﬂﬂY Z
)
ﬂﬂZ [
return
‡‡ 

BadRequest
‡‡ !
(
‡‡! "
new
‡‡" %
{
‡‡& '
error
‡‡( -
=
‡‡. /
$str
‡‡0 X
}
‡‡Y Z
)
‡‡Z [
;
‡‡[ \
if
·· 
(
·· 
req
·· 
.
·· 
EffectiveFrom
·· !
==
··" $
default
··% ,
)
··, -
return
‚‚ 

BadRequest
‚‚ !
(
‚‚! "
new
‚‚" %
{
‚‚& '
error
‚‚( -
=
‚‚. /
$str
‚‚0 K
}
‚‚L M
)
‚‚M N
;
‚‚N O
var
ÂÂ 
effectiveFrom
ÂÂ 
=
ÂÂ 
req
ÂÂ  #
.
ÂÂ# $
EffectiveFrom
ÂÂ$ 1
;
ÂÂ1 2
var
ÊÊ 
effectiveTo
ÊÊ 
=
ÊÊ 
req
ÊÊ !
.
ÊÊ! "
EffectiveFrom
ÊÊ" /
.
ÊÊ/ 0
AddYears
ÊÊ0 8
(
ÊÊ8 9
$num
ÊÊ9 :
)
ÊÊ: ;
;
ÊÊ; <
bool
ÈÈ 
overlap
ÈÈ 
=
ÈÈ 
user
ÈÈ 
.
ÈÈ  
Profile
ÈÈ  '
.
ÈÈ' (
CTCStructures
ÈÈ( 5
.
ÈÈ5 6
Any
ÈÈ6 9
(
ÈÈ9 :
c
ÈÈ: ;
=>
ÈÈ< >
c
ÍÍ 
.
ÍÍ 
Status
ÍÍ 
==
ÍÍ 
ApprovalStatus
ÍÍ *
.
ÍÍ* +
Approved
ÍÍ+ 3
&&
ÎÎ 
c
ÎÎ 
.
ÎÎ 
EffectiveFrom
ÎÎ "
<
ÎÎ# $
effectiveTo
ÎÎ% 0
&&
ÏÏ 
c
ÏÏ 
.
ÏÏ 
EffectiveTo
ÏÏ  
>
ÏÏ! "
effectiveFrom
ÏÏ# 0
)
ÌÌ 
;
ÌÌ 
if
ÔÔ 
(
ÔÔ 
overlap
ÔÔ 
)
ÔÔ 
return
 
Conflict
 
(
  
new
ÒÒ 
{
ÒÒ 
error
ÒÒ 
=
ÒÒ  !
$str
ÒÒ" _
}
ÒÒ` a
)
ÚÚ 
;
ÚÚ 
var
ÙÙ 
gross
ÙÙ 
=
ÙÙ 
req
ÙÙ 
.
ÙÙ 
Basic
ÙÙ !
+
ÙÙ" #
req
ÙÙ$ '
.
ÙÙ' (
HRA
ÙÙ( +
+
ÙÙ, -
req
ÙÙ. 1
.
ÙÙ1 2
AllowanceItems
ÙÙ2 @
.
ÙÙ@ A
Sum
ÙÙA D
(
ÙÙD E
a
ÙÙE F
=>
ÙÙG I
a
ÙÙJ K
.
ÙÙK L
Amount
ÙÙL R
)
ÙÙR S
;
ÙÙS T
var
ˆˆ 
ctc
ˆˆ 
=
ˆˆ 
new
ˆˆ 
CTCStructure
ˆˆ &
{
˜˜ 
EmployeeProfileId
¯¯ !
=
¯¯" #
user
¯¯$ (
.
¯¯( )
Profile
¯¯) 0
.
¯¯0 1
Id
¯¯1 3
,
¯¯3 4
Basic
˘˘ 
=
˘˘ 
req
˘˘ 
.
˘˘ 
Basic
˘˘ !
,
˘˘! "
HRA
˙˙ 
=
˙˙ 
req
˙˙ 
.
˙˙ 
HRA
˙˙ 
,
˙˙ 

TaxPercent
˚˚ 
=
˚˚ 
Math
˚˚ !
.
˚˚! "
Round
˚˚" '
(
˚˚' (
req
˚˚( +
.
˚˚+ ,

TaxPercent
˚˚, 6
,
˚˚6 7
$num
˚˚8 9
,
˚˚9 :
MidpointRounding
˚˚; K
.
˚˚K L
AwayFromZero
˚˚L X
)
˚˚X Y
,
˚˚Y Z
GrossCTC
¸¸ 
=
¸¸ 
gross
¸¸  
,
¸¸  !
EffectiveFrom
˝˝ 
=
˝˝ 
effectiveFrom
˝˝  -
,
˝˝- .
EffectiveTo
˛˛ 
=
˛˛ 
effectiveTo
˛˛ )
,
˛˛) *
Status
ˇˇ 
=
ˇˇ 
ApprovalStatus
ˇˇ '
.
ˇˇ' (
Pending
ˇˇ( /
,
ˇˇ/ 0
CreatedByUserId
ÄÄ 
=
ÄÄ  !
CurrentUserId
ÄÄ" /
,
ÄÄ/ 0

Allowances
ÅÅ 
=
ÅÅ 
req
ÅÅ  
.
ÇÇ 
AllowanceItems
ÇÇ #
.
ÇÇ# $
Select
ÇÇ$ *
(
ÇÇ* +
a
ÇÇ+ ,
=>
ÇÇ- /
new
ÇÇ0 3
CTCAllowance
ÇÇ4 @
{
ÉÉ 
Label
ÑÑ 
=
ÑÑ 
a
ÑÑ  !
.
ÑÑ! "
Label
ÑÑ" '
,
ÑÑ' (
Amount
ÖÖ 
=
ÖÖ  
a
ÖÖ! "
.
ÖÖ" #
Amount
ÖÖ# )
,
ÖÖ) *
}
ÜÜ 
)
ÜÜ 
.
áá 
ToList
áá 
(
áá 
)
áá 
,
áá 

Deductions
àà 
=
àà 
req
àà  
.
ââ 
DeductionItems
ââ #
.
ââ# $
Select
ââ$ *
(
ââ* +
d
ââ+ ,
=>
ââ- /
new
ââ0 3
CTCDeduction
ââ4 @
{
ää 
Label
ãã 
=
ãã 
d
ãã  !
.
ãã! "
Label
ãã" '
,
ãã' (
Amount
åå 
=
åå  
d
åå! "
.
åå" #
Amount
åå# )
,
åå) *
}
çç 
)
çç 
.
éé 
ToList
éé 
(
éé 
)
éé 
,
éé 
}
èè 
;
èè 
_db
ëë 
.
ëë 
CTCStructures
ëë 
.
ëë 
Add
ëë !
(
ëë! "
ctc
ëë" %
)
ëë% &
;
ëë& '
await
îî 
_audit
îî 
.
îî 
LogAsync
îî !
(
îî! "
$str
ïï 
,
ïï 
ctc
ññ 
.
ññ 
Id
ññ 
,
ññ 
$str
óó 
,
óó 
$"
òò 
$str
òò "
{
òò" #
user
òò# '
.
òò' (
FullName
òò( 0
}
òò0 1
$str
òò1 3
{
òò3 4
user
òò4 8
.
òò8 9
Email
òò9 >
}
òò> ?
$str
òò? L
{
òòL M
ctc
òòM P
.
òòP Q
EffectiveFrom
òòQ ^
:
òò^ _
$str
òò_ i
}
òòi j
"
òòj k
,
òòk l
CurrentUserId
ôô 
,
ôô 
CurrentUserEmail
öö  
)
õõ 
;
õõ 
await
ùù 
_db
ùù 
.
ùù 
SaveChangesAsync
ùù &
(
ùù& '
)
ùù' (
;
ùù( )
var
†† 

hrManagers
†† 
=
†† 
await
†† "
_db
††# &
.
††& '
Users
††' ,
.
††, -
Where
††- 2
(
††2 3
u
††3 4
=>
††5 7
u
††8 9
.
††9 :
Role
††: >
==
††? A
UserRole
††B J
.
††J K
	HRManager
††K T
)
††T U
.
††U V
ToListAsync
††V a
(
††a b
)
††b c
;
††c d
foreach
¢¢ 
(
¢¢ 
var
¢¢ 
hrm
¢¢ 
in
¢¢ 

hrManagers
¢¢  *
)
¢¢* +
{
££ 
_db
§§ 
.
§§ 
Notifications
§§ !
.
§§! "
Add
§§" %
(
§§% &
new
•• 
Notification
•• $
{
¶¶ 
UserId
ßß 
=
ßß  
hrm
ßß! $
.
ßß$ %
Id
ßß% '
,
ßß' (
Subject
®® 
=
®®  !
$"
®®" $
$str
®®$ 9
"
®®9 :
,
®®: ;
Message
©© 
=
©©  !
$"
©©" $
$str
©©$ 2
{
©©2 3
user
©©3 7
.
©©7 8
FullName
©©8 @
}
©©@ A
$str
©©A V
"
©©V W
,
©©W X
}
™™ 
)
´´ 
;
´´ 
await
≠≠ 
_email
≠≠ 
.
≠≠  
SendTemplatedAsync
≠≠ /
(
≠≠/ 0
hrm
ÆÆ 
.
ÆÆ 
Email
ÆÆ 
,
ÆÆ 
$str
ØØ +
,
ØØ+ ,
$"
∞∞ 
$str
∞∞ 
{
∞∞ 
hrm
∞∞  
.
∞∞  !
FullName
∞∞! )
}
∞∞) *
$str
∞∞* :
{
∞∞: ;
user
∞∞; ?
.
∞∞? @
FullName
∞∞@ H
}
∞∞H I
$str
∞∞I T
{
∞∞T U
ctc
∞∞U X
.
∞∞X Y
EffectiveFrom
∞∞Y f
:
∞∞f g
$str
∞∞g r
}
∞∞r s
$str∞∞s ã
"∞∞ã å
)
±± 
;
±± 
}
≤≤ 
await
¥¥ 
_db
¥¥ 
.
¥¥ 
SaveChangesAsync
¥¥ &
(
¥¥& '
)
¥¥' (
;
¥¥( )
return
∂∂ 
Ok
∂∂ 
(
∂∂ 
new
∂∂ 
{
∂∂ 
Message
∂∂ #
=
∂∂$ %
$str
∂∂& I
}
∂∂J K
)
∂∂K L
;
∂∂L M
}
∑∑ 	
[
ΩΩ 	
HttpPost
ΩΩ	 
(
ΩΩ 
$str
ΩΩ 
)
ΩΩ 
]
ΩΩ 
public
ææ 
async
ææ 
Task
ææ 
<
ææ 
IActionResult
ææ '
>
ææ' (
CreateCTCBatch
ææ) 7
(
ææ7 8
[
ææ8 9
FromBody
ææ9 A
]
ææA B
CTCBatchRequest
ææC R
req
ææS V
)
ææV W
{
øø 	
if
¿¿ 
(
¿¿ 
req
¿¿ 
.
¿¿ 
EmployeeUserIds
¿¿ #
==
¿¿$ &
null
¿¿' +
||
¿¿, .
!
¿¿/ 0
req
¿¿0 3
.
¿¿3 4
EmployeeUserIds
¿¿4 C
.
¿¿C D
Any
¿¿D G
(
¿¿G H
)
¿¿H I
)
¿¿I J
return
¡¡ 

BadRequest
¡¡ !
(
¡¡! "
new
¡¡" %
{
¡¡& '
error
¡¡( -
=
¡¡. /
$str
¡¡0 P
}
¡¡Q R
)
¡¡R S
;
¡¡S T
var
√√ 
results
√√ 
=
√√ 
new
√√ 
List
√√ "
<
√√" #
CTCBatchResult
√√# 1
>
√√1 2
(
√√2 3
)
√√3 4
;
√√4 5
foreach
≈≈ 
(
≈≈ 
var
≈≈ 
empId
≈≈ 
in
≈≈ !
req
≈≈" %
.
≈≈% &
EmployeeUserIds
≈≈& 5
.
≈≈5 6
Distinct
≈≈6 >
(
≈≈> ?
)
≈≈? @
)
≈≈@ A
{
∆∆ 
var
«« 
user
«« 
=
«« 
await
««  
_db
««! $
.
»» 
Users
»» 
.
»» 
Include
»» "
(
»»" #
u
»»# $
=>
»»% '
u
»»( )
.
»») *
Profile
»»* 1
)
»»1 2
.
…… 
ThenInclude
……  
(
……  !
p
……! "
=>
……# %
p
……& '
.
……' (

Department
……( 2
)
……2 3
.
   
Include
   
(
   
u
   
=>
   !
u
  " #
.
  # $
Profile
  $ +
!
  + ,
.
  , -
CTCStructures
  - :
)
  : ;
.
ÀÀ !
FirstOrDefaultAsync
ÀÀ (
(
ÀÀ( )
u
ÀÀ) *
=>
ÀÀ+ -
u
ÀÀ. /
.
ÀÀ/ 0
Id
ÀÀ0 2
==
ÀÀ3 5
empId
ÀÀ6 ;
)
ÀÀ; <
;
ÀÀ< =
if
ÕÕ 
(
ÕÕ 
user
ÕÕ 
?
ÕÕ 
.
ÕÕ 
Profile
ÕÕ !
==
ÕÕ" $
null
ÕÕ% )
)
ÕÕ) *
{
ŒŒ 
results
œœ 
.
œœ 
Add
œœ 
(
œœ  
new
–– 
CTCBatchResult
–– *
{
—— 

EmployeeId
““ &
=
““' (
empId
““) .
,
““. /
Employee
”” $
=
””% &
$"
””' )
$str
””) *
{
””* +
empId
””+ 0
}
””0 1
"
””1 2
,
””2 3
Email
‘‘ !
=
‘‘" #
$str
‘‘$ '
,
‘‘' (
Status
’’ "
=
’’# $
$str
’’% ,
,
’’, -
Message
÷÷ #
=
÷÷$ %
$str
÷÷& B
,
÷÷B C
}
◊◊ 
)
ÿÿ 
;
ÿÿ 
continue
ŸŸ 
;
ŸŸ 
}
⁄⁄ 
try
‹‹ 
{
›› 
if
ﬂﬂ 
(
ﬂﬂ 
req
ﬂﬂ 
.
ﬂﬂ 
Basic
ﬂﬂ !
<=
ﬂﬂ" $
$num
ﬂﬂ% &
)
ﬂﬂ& '
throw
‡‡ 
new
‡‡ !
	Exception
‡‡" +
(
‡‡+ ,
$str
‡‡, J
)
‡‡J K
;
‡‡K L
if
·· 
(
·· 
req
·· 
.
·· 
HRA
·· 
<
··  !
$num
··" #
)
··# $
throw
‚‚ 
new
‚‚ !
	Exception
‚‚" +
(
‚‚+ ,
$str
‚‚, D
)
‚‚D E
;
‚‚E F
if
„„ 
(
„„ 
req
„„ 
.
„„ 
HRA
„„ 
>
„„  !
req
„„" %
.
„„% &
Basic
„„& +
*
„„, -
$num
„„. 2
)
„„2 3
throw
‰‰ 
new
‰‰ !
	Exception
‰‰" +
(
‰‰+ ,
$str
‰‰, L
)
‰‰L M
;
‰‰M N
if
ÂÂ 
(
ÂÂ 
req
ÂÂ 
.
ÂÂ 
Basic
ÂÂ !
>=
ÂÂ" $
$num
ÂÂ% *
&&
ÂÂ+ -
(
ÂÂ. /
req
ÂÂ/ 2
.
ÂÂ2 3

TaxPercent
ÂÂ3 =
<=
ÂÂ> @
$num
ÂÂA B
||
ÂÂC E
req
ÂÂF I
.
ÂÂI J

TaxPercent
ÂÂJ T
>
ÂÂU V
$num
ÂÂW Y
)
ÂÂY Z
)
ÂÂZ [
throw
ÊÊ 
new
ÊÊ !
	Exception
ÊÊ" +
(
ÊÊ+ ,
$str
ÊÊ, Z
)
ÊÊZ [
;
ÊÊ[ \
if
ËË 
(
ËË 
req
ËË 
.
ËË 
AllowanceItems
ËË *
.
ËË* +
GroupBy
ËË+ 2
(
ËË2 3
a
ËË3 4
=>
ËË5 7
a
ËË8 9
.
ËË9 :
Label
ËË: ?
.
ËË? @
ToLower
ËË@ G
(
ËËG H
)
ËËH I
)
ËËI J
.
ËËJ K
Any
ËËK N
(
ËËN O
g
ËËO P
=>
ËËQ S
g
ËËT U
.
ËËU V
Count
ËËV [
(
ËË[ \
)
ËË\ ]
>
ËË^ _
$num
ËË` a
)
ËËa b
)
ËËb c
throw
ÈÈ 
new
ÈÈ !
	Exception
ÈÈ" +
(
ÈÈ+ ,
$str
ÈÈ, T
)
ÈÈT U
;
ÈÈU V
if
ÍÍ 
(
ÍÍ 
req
ÍÍ 
.
ÍÍ 
DeductionItems
ÍÍ *
.
ÍÍ* +
GroupBy
ÍÍ+ 2
(
ÍÍ2 3
d
ÍÍ3 4
=>
ÍÍ5 7
d
ÍÍ8 9
.
ÍÍ9 :
Label
ÍÍ: ?
.
ÍÍ? @
ToLower
ÍÍ@ G
(
ÍÍG H
)
ÍÍH I
)
ÍÍI J
.
ÍÍJ K
Any
ÍÍK N
(
ÍÍN O
g
ÍÍO P
=>
ÍÍQ S
g
ÍÍT U
.
ÍÍU V
Count
ÍÍV [
(
ÍÍ[ \
)
ÍÍ\ ]
>
ÍÍ^ _
$num
ÍÍ` a
)
ÍÍa b
)
ÍÍb c
throw
ÎÎ 
new
ÎÎ !
	Exception
ÎÎ" +
(
ÎÎ+ ,
$str
ÎÎ, T
)
ÎÎT U
;
ÎÎU V
if
ÌÌ 
(
ÌÌ 
req
ÌÌ 
.
ÌÌ 
EffectiveFrom
ÌÌ )
==
ÌÌ* ,
default
ÌÌ- 4
)
ÌÌ4 5
throw
ÓÓ 
new
ÓÓ !
	Exception
ÓÓ" +
(
ÓÓ+ ,
$str
ÓÓ, G
)
ÓÓG H
;
ÓÓH I
var
 
selectedYear
 $
=
% &
req
' *
.
* +
EffectiveFrom
+ 8
.
8 9
Year
9 =
;
= >
bool
ÒÒ 
existsInYear
ÒÒ %
=
ÒÒ& '
user
ÒÒ( ,
.
ÒÒ, -
Profile
ÒÒ- 4
.
ÒÒ4 5
CTCStructures
ÒÒ5 B
.
ÒÒB C
Any
ÒÒC F
(
ÒÒF G
c
ÒÒG H
=>
ÒÒI K
(
ÚÚ 
c
ÚÚ 
.
ÚÚ 
Status
ÚÚ !
==
ÚÚ" $
ApprovalStatus
ÚÚ% 3
.
ÚÚ3 4
Pending
ÚÚ4 ;
||
ÚÚ< >
c
ÚÚ? @
.
ÚÚ@ A
Status
ÚÚA G
==
ÚÚH J
ApprovalStatus
ÚÚK Y
.
ÚÚY Z
Approved
ÚÚZ b
)
ÚÚb c
&&
ÛÛ 
c
ÛÛ 
.
ÛÛ 
EffectiveFrom
ÛÛ *
.
ÛÛ* +
Year
ÛÛ+ /
==
ÛÛ0 2
selectedYear
ÛÛ3 ?
)
ÙÙ 
;
ÙÙ 
if
ˆˆ 
(
ˆˆ 
existsInYear
ˆˆ $
)
ˆˆ$ %
throw
˜˜ 
new
˜˜ !
	Exception
˜˜" +
(
˜˜+ ,
$"
¯¯ 
$str
¯¯ D
{
¯¯D E
selectedYear
¯¯E Q
}
¯¯Q R
"
¯¯R S
)
˘˘ 
;
˘˘ 
var
˚˚ 
effectiveTo
˚˚ #
=
˚˚$ %
req
˚˚& )
.
˚˚) *
EffectiveFrom
˚˚* 7
.
˚˚7 8
AddYears
˚˚8 @
(
˚˚@ A
$num
˚˚A B
)
˚˚B C
;
˚˚C D
bool
¸¸ 
overlap
¸¸  
=
¸¸! "
user
¸¸# '
.
¸¸' (
Profile
¸¸( /
.
¸¸/ 0
CTCStructures
¸¸0 =
.
¸¸= >
Any
¸¸> A
(
¸¸A B
c
¸¸B C
=>
¸¸D F
c
˝˝ 
.
˝˝ 
Status
˝˝  
==
˝˝! #
ApprovalStatus
˝˝$ 2
.
˝˝2 3
Approved
˝˝3 ;
&&
˛˛ 
c
˛˛ 
.
˛˛ 
EffectiveFrom
˛˛ *
<
˛˛+ ,
effectiveTo
˛˛- 8
&&
ˇˇ 
c
ˇˇ 
.
ˇˇ 
EffectiveTo
ˇˇ (
>
ˇˇ) *
req
ˇˇ+ .
.
ˇˇ. /
EffectiveFrom
ˇˇ/ <
)
ÄÄ 
;
ÄÄ 
if
ÅÅ 
(
ÅÅ 
overlap
ÅÅ 
)
ÅÅ  
throw
ÇÇ 
new
ÇÇ !
	Exception
ÇÇ" +
(
ÇÇ+ ,
$str
ÇÇ, Y
)
ÇÇY Z
;
ÇÇZ [
var
ÖÖ 
gross
ÖÖ 
=
ÖÖ 
req
ÖÖ  #
.
ÖÖ# $
Basic
ÖÖ$ )
+
ÖÖ* +
req
ÖÖ, /
.
ÖÖ/ 0
HRA
ÖÖ0 3
+
ÖÖ4 5
req
ÖÖ6 9
.
ÖÖ9 :
AllowanceItems
ÖÖ: H
.
ÖÖH I
Sum
ÖÖI L
(
ÖÖL M
a
ÖÖM N
=>
ÖÖO Q
a
ÖÖR S
.
ÖÖS T
Amount
ÖÖT Z
)
ÖÖZ [
;
ÖÖ[ \
var
áá 
ctc
áá 
=
áá 
new
áá !
CTCStructure
áá" .
{
àà 
EmployeeProfileId
ââ )
=
ââ* +
user
ââ, 0
.
ââ0 1
Profile
ââ1 8
.
ââ8 9
Id
ââ9 ;
,
ââ; <
Basic
ää 
=
ää 
req
ää  #
.
ää# $
Basic
ää$ )
,
ää) *
HRA
ãã 
=
ãã 
req
ãã !
.
ãã! "
HRA
ãã" %
,
ãã% &

TaxPercent
åå "
=
åå# $
Math
åå% )
.
åå) *
Round
åå* /
(
åå/ 0
req
åå0 3
.
åå3 4

TaxPercent
åå4 >
,
åå> ?
$num
åå@ A
,
ååA B
MidpointRounding
ååC S
.
ååS T
AwayFromZero
ååT `
)
åå` a
,
ååa b
GrossCTC
çç  
=
çç! "
gross
çç# (
,
çç( )
EffectiveFrom
éé %
=
éé& '
req
éé( +
.
éé+ ,
EffectiveFrom
éé, 9
,
éé9 :
EffectiveTo
èè #
=
èè$ %
effectiveTo
èè& 1
,
èè1 2
Status
êê 
=
êê  
ApprovalStatus
êê! /
.
êê/ 0
Pending
êê0 7
,
êê7 8
CreatedByUserId
ëë '
=
ëë( )
CurrentUserId
ëë* 7
,
ëë7 8

Allowances
íí "
=
íí# $
req
íí% (
.
ìì 
AllowanceItems
ìì +
.
ìì+ ,
Select
ìì, 2
(
ìì2 3
a
ìì3 4
=>
ìì5 7
new
ìì8 ;
CTCAllowance
ìì< H
{
îî 
Label
ïï  %
=
ïï& '
a
ïï( )
.
ïï) *
Label
ïï* /
,
ïï/ 0
Amount
ññ  &
=
ññ' (
a
ññ) *
.
ññ* +
Amount
ññ+ 1
,
ññ1 2
}
óó 
)
óó 
.
òò 
ToList
òò #
(
òò# $
)
òò$ %
,
òò% &

Deductions
ôô "
=
ôô# $
req
ôô% (
.
öö 
DeductionItems
öö +
.
öö+ ,
Select
öö, 2
(
öö2 3
d
öö3 4
=>
öö5 7
new
öö8 ;
CTCDeduction
öö< H
{
õõ 
Label
úú  %
=
úú& '
d
úú( )
.
úú) *
Label
úú* /
,
úú/ 0
Amount
ùù  &
=
ùù' (
d
ùù) *
.
ùù* +
Amount
ùù+ 1
,
ùù1 2
}
ûû 
)
ûû 
.
üü 
ToList
üü #
(
üü# $
)
üü$ %
,
üü% &
}
†† 
;
†† 
_db
¢¢ 
.
¢¢ 
CTCStructures
¢¢ %
.
¢¢% &
Add
¢¢& )
(
¢¢) *
ctc
¢¢* -
)
¢¢- .
;
¢¢. /
results
§§ 
.
§§ 
Add
§§ 
(
§§  
new
•• 
CTCBatchResult
•• *
{
¶¶ 

EmployeeId
ßß &
=
ßß' (
empId
ßß) .
,
ßß. /
Employee
®® $
=
®®% &
user
®®' +
.
®®+ ,
FullName
®®, 4
,
®®4 5
Email
©© !
=
©©" #
user
©©$ (
.
©©( )
Email
©©) .
,
©©. /
Status
™™ "
=
™™# $
$str
™™% .
,
™™. /
Message
´´ #
=
´´$ %
$str
´´& F
,
´´F G
}
¨¨ 
)
≠≠ 
;
≠≠ 
}
∞∞ 
catch
±± 
(
±± 
	Exception
±±  
ex
±±! #
)
±±# $
{
≤≤ 
results
≥≥ 
.
≥≥ 
Add
≥≥ 
(
≥≥  
new
¥¥ 
CTCBatchResult
¥¥ *
{
µµ 

EmployeeId
∂∂ &
=
∂∂' (
empId
∂∂) .
,
∂∂. /
Employee
∑∑ $
=
∑∑% &
user
∑∑' +
.
∑∑+ ,
FullName
∑∑, 4
,
∑∑4 5
Email
∏∏ !
=
∏∏" #
user
∏∏$ (
.
∏∏( )
Email
∏∏) .
,
∏∏. /
Status
ππ "
=
ππ# $
$str
ππ% /
,
ππ/ 0
Message
∫∫ #
=
∫∫$ %
ex
∫∫& (
.
∫∫( )
Message
∫∫) 0
,
∫∫0 1
}
ªª 
)
ºº 
;
ºº 
}
ΩΩ 
}
ææ 
await
¿¿ 
_db
¿¿ 
.
¿¿ 
SaveChangesAsync
¿¿ &
(
¿¿& '
)
¿¿' (
;
¿¿( )
return
¡¡ 
Ok
¡¡ 
(
¡¡ 
new
¡¡ 
{
¡¡ 
Results
¡¡ #
=
¡¡$ %
results
¡¡& -
}
¡¡. /
)
¡¡/ 0
;
¡¡0 1
}
¬¬ 	
[
«« 	
HttpPost
««	 
(
«« 
$str
«« 
)
«« 
]
«« 
public
»» 
async
»» 
Task
»» 
<
»» 
IActionResult
»» '
>
»»' (
CreatePayslip
»») 6
(
»»6 7"
PayslipCreateRequest
»»7 K
req
»»L O
)
»»O P
{
…… 	
var
   
user
   
=
   
await
   
_db
    
.
ÀÀ 
Users
ÀÀ 
.
ÀÀ 
Include
ÀÀ 
(
ÀÀ 
u
ÀÀ  
=>
ÀÀ! #
u
ÀÀ$ %
.
ÀÀ% &
Profile
ÀÀ& -
)
ÀÀ- .
.
ÃÃ 
ThenInclude
ÃÃ 
(
ÃÃ 
p
ÃÃ 
=>
ÃÃ !
p
ÃÃ" #
.
ÃÃ# $
CTCStructures
ÃÃ$ 1
)
ÃÃ1 2
.
ÕÕ !
FirstOrDefaultAsync
ÕÕ $
(
ÕÕ$ %
u
ÕÕ% &
=>
ÕÕ' )
u
ÕÕ* +
.
ÕÕ+ ,
Id
ÕÕ, .
==
ÕÕ/ 1
req
ÕÕ2 5
.
ÕÕ5 6
EmployeeUserId
ÕÕ6 D
)
ÕÕD E
;
ÕÕE F
if
œœ 
(
œœ 
user
œœ 
?
œœ 
.
œœ 
Profile
œœ 
?
œœ 
.
œœ 
CTCStructures
œœ ,
==
œœ- /
null
œœ0 4
)
œœ4 5
return
–– 

BadRequest
–– !
(
––! "
$str
––" /
)
––/ 0
;
––0 1
var
““ 
existing
““ 
=
““ 
await
““  
_db
““! $
.
““$ %
Payslips
““% -
.
““- .!
FirstOrDefaultAsync
““. A
(
““A B
p
““B C
=>
““D F
p
”” 
.
”” 
EmployeeProfileId
”” #
==
””$ &
user
””' +
.
””+ ,
Profile
””, 3
.
””3 4
Id
””4 6
&&
””7 9
p
””: ;
.
””; <
Year
””< @
==
””A C
req
””D G
.
””G H
Year
””H L
&&
””M O
p
””P Q
.
””Q R
Month
””R W
==
””X Z
req
””[ ^
.
””^ _
Month
””_ d
)
‘‘ 
;
‘‘ 
if
’’ 
(
’’ 
existing
’’ 
!=
’’ 
null
’’  
)
’’  !
return
÷÷ 
Conflict
÷÷ 
(
÷÷  
$str
÷÷  P
)
÷÷P Q
;
÷÷Q R
var
ÿÿ 
	latestCtc
ÿÿ 
=
ÿÿ 
user
ÿÿ  
.
ŸŸ 
Profile
ŸŸ 
.
ŸŸ 
CTCStructures
ŸŸ &
.
ŸŸ& '
Where
ŸŸ' ,
(
ŸŸ, -
c
ŸŸ- .
=>
ŸŸ/ 1
c
ŸŸ2 3
.
ŸŸ3 4
Status
ŸŸ4 :
==
ŸŸ; =
ApprovalStatus
ŸŸ> L
.
ŸŸL M
Approved
ŸŸM U
)
ŸŸU V
.
⁄⁄ 
OrderByDescending
⁄⁄ "
(
⁄⁄" #
c
⁄⁄# $
=>
⁄⁄% '
c
⁄⁄( )
.
⁄⁄) *
EffectiveFrom
⁄⁄* 7
)
⁄⁄7 8
.
€€ 
FirstOrDefault
€€ 
(
€€  
)
€€  !
;
€€! "
if
›› 
(
›› 
	latestCtc
›› 
==
›› 
null
›› !
)
››! "
return
ﬁﬁ 

BadRequest
ﬁﬁ !
(
ﬁﬁ! "
$str
ﬁﬁ" 9
)
ﬁﬁ9 :
;
ﬁﬁ: ;
var
‡‡ 
slip
‡‡ 
=
‡‡ 
_payroll
‡‡ 
.
‡‡  #
ComputePayslipFromCTC
‡‡  5
(
‡‡5 6
	latestCtc
·· 
,
·· 
req
‚‚ 
.
‚‚ 
Year
‚‚ 
,
‚‚ 
req
„„ 
.
„„ 
Month
„„ 
,
„„ 
req
‰‰ 
.
‰‰ 
LOPDays
‰‰ 
,
‰‰ 
req
ÂÂ 
.
ÂÂ !
OverridesAllowances
ÂÂ '
,
ÂÂ' (
req
ÊÊ 
.
ÊÊ !
OverridesDeductions
ÊÊ '
)
ÁÁ 
;
ÁÁ 
slip
ËË 
.
ËË 
EmployeeProfileId
ËË "
=
ËË# $
user
ËË% )
.
ËË) *
Profile
ËË* 1
.
ËË1 2
Id
ËË2 4
;
ËË4 5
slip
ÈÈ 
.
ÈÈ 
CreatedByUserId
ÈÈ  
=
ÈÈ! "
CurrentUserId
ÈÈ# 0
;
ÈÈ0 1
_db
ÎÎ 
.
ÎÎ 
Payslips
ÎÎ 
.
ÎÎ 
Add
ÎÎ 
(
ÎÎ 
slip
ÎÎ !
)
ÎÎ! "
;
ÎÎ" #
await
ÏÏ 
_db
ÏÏ 
.
ÏÏ 
SaveChangesAsync
ÏÏ &
(
ÏÏ& '
)
ÏÏ' (
;
ÏÏ( )
await
ÔÔ 
_audit
ÔÔ 
.
ÔÔ 
LogAsync
ÔÔ !
(
ÔÔ! "
$str
 
,
 
slip
ÒÒ 
.
ÒÒ 
Id
ÒÒ 
,
ÒÒ 
$str
ÚÚ 
,
ÚÚ 
$"
ÛÛ 
$str
ÛÛ 
{
ÛÛ 
req
ÛÛ 
.
ÛÛ 
Month
ÛÛ $
}
ÛÛ$ %
$str
ÛÛ% &
{
ÛÛ& '
req
ÛÛ' *
.
ÛÛ* +
Year
ÛÛ+ /
}
ÛÛ/ 0
$str
ÛÛ0 =
{
ÛÛ= >
user
ÛÛ> B
.
ÛÛB C
FullName
ÛÛC K
}
ÛÛK L
$str
ÛÛL N
{
ÛÛN O
user
ÛÛO S
.
ÛÛS T
Email
ÛÛT Y
}
ÛÛY Z
$str
ÛÛZ [
"
ÛÛ[ \
,
ÛÛ\ ]
CurrentUserId
ÙÙ 
,
ÙÙ 
CurrentUserEmail
ıı  
)
ˆˆ 
;
ˆˆ 
var
˘˘ 

hrManagers
˘˘ 
=
˘˘ 
await
˘˘ "
_db
˘˘# &
.
˘˘& '
Users
˘˘' ,
.
˘˘, -
Where
˘˘- 2
(
˘˘2 3
u
˘˘3 4
=>
˘˘5 7
u
˘˘8 9
.
˘˘9 :
Role
˘˘: >
==
˘˘? A
UserRole
˘˘B J
.
˘˘J K
	HRManager
˘˘K T
)
˘˘T U
.
˘˘U V
ToListAsync
˘˘V a
(
˘˘a b
)
˘˘b c
;
˘˘c d
foreach
˙˙ 
(
˙˙ 
var
˙˙ 
hrm
˙˙ 
in
˙˙ 

hrManagers
˙˙  *
)
˙˙* +
{
˚˚ 
_db
¸¸ 
.
¸¸ 
Notifications
¸¸ !
.
¸¸! "
Add
¸¸" %
(
¸¸% &
new
˝˝ 
Notification
˝˝ $
{
˛˛ 
UserId
ˇˇ 
=
ˇˇ  
hrm
ˇˇ! $
.
ˇˇ$ %
Id
ˇˇ% '
,
ˇˇ' (
Subject
ÄÄ 
=
ÄÄ  !
$str
ÄÄ" =
,
ÄÄ= >
Message
ÅÅ 
=
ÅÅ  !
$"
ÇÇ 
$str
ÇÇ *
{
ÇÇ* +
user
ÇÇ+ /
.
ÇÇ/ 0
FullName
ÇÇ0 8
}
ÇÇ8 9
$str
ÇÇ9 ;
{
ÇÇ; <
req
ÇÇ< ?
.
ÇÇ? @
Month
ÇÇ@ E
}
ÇÇE F
$str
ÇÇF G
{
ÇÇG H
req
ÇÇH K
.
ÇÇK L
Year
ÇÇL P
}
ÇÇP Q
$str
ÇÇQ c
"
ÇÇc d
,
ÇÇd e
}
ÉÉ 
)
ÑÑ 
;
ÑÑ 
await
áá 
_email
áá 
.
áá  
SendTemplatedAsync
áá /
(
áá/ 0
hrm
àà 
.
àà 
Email
àà 
,
àà 
$str
ââ /
,
ââ/ 0
$"
ää 
$str
ää 
{
ää 
hrm
ää  
.
ää  !
FullName
ää! )
}
ää) *
$str
ää* >
{
ää> ?
user
ää? C
.
ääC D
FullName
ääD L
}
ääL M
$str
ääM O
{
ääO P
req
ääP S
.
ääS T
Month
ääT Y
}
ääY Z
$str
ääZ [
{
ää[ \
req
ää\ _
.
ää_ `
Year
ää` d
}
ääd e
$strääe Å
"ääÅ Ç
)
ãã 
;
ãã 
}
åå 
await
çç 
_db
çç 
.
çç 
SaveChangesAsync
çç &
(
çç& '
)
çç' (
;
çç( )
return
èè 
Ok
èè 
(
èè 
new
êê 
{
ëë 
slip
íí 
.
íí 
Id
íí 
,
íí 
slip
ìì 
.
ìì 
Year
ìì 
,
ìì 
slip
îî 
.
îî 
Month
îî 
,
îî 
slip
ïï 
.
ïï 
NetPay
ïï 
,
ïï  
slip
ññ 
.
ññ 
Status
ññ 
,
ññ  

Allowances
óó 
=
óó  
slip
óó! %
.
óó% &
AllowanceItems
óó& 4
.
óó4 5
Select
óó5 ;
(
óó; <
a
óó< =
=>
óó> @
new
óóA D
{
óóE F
a
óóG H
.
óóH I
Label
óóI N
,
óóN O
a
óóP Q
.
óóQ R
Amount
óóR X
}
óóY Z
)
óóZ [
,
óó[ \

Deductions
òò 
=
òò  
slip
òò! %
.
òò% &
DeductionItems
òò& 4
.
òò4 5
Select
òò5 ;
(
òò; <
d
òò< =
=>
òò> @
new
òòA D
{
òòE F
d
òòG H
.
òòH I
Label
òòI N
,
òòN O
d
òòP Q
.
òòQ R
Amount
òòR X
}
òòY Z
)
òòZ [
,
òò[ \
}
ôô 
)
öö 
;
öö 
}
õõ 	
[
†† 	
HttpGet
††	 
(
†† 
$str
†† 3
)
††3 4
]
††4 5
public
°° 
async
°° 
Task
°° 
<
°° 
IActionResult
°° '
>
°°' (
ExportPayslipPdf
°°) 9
(
°°9 :
int
°°: =
	payslipId
°°> G
)
°°G H
{
¢¢ 	
var
££ 
slip
££ 
=
££ 
await
££ 
_db
££  
.
§§ 
Payslips
§§ 
.
§§ 
Include
§§ !
(
§§! "
p
§§" #
=>
§§$ &
p
§§' (
.
§§( )
EmployeeProfile
§§) 8
)
§§8 9
.
•• 
ThenInclude
•• 
(
•• 
ep
•• 
=>
••  "
ep
••# %
.
••% &
User
••& *
)
••* +
.
¶¶ !
FirstOrDefaultAsync
¶¶ $
(
¶¶$ %
p
¶¶% &
=>
¶¶' )
p
¶¶* +
.
¶¶+ ,
Id
¶¶, .
==
¶¶/ 1
	payslipId
¶¶2 ;
)
¶¶; <
;
¶¶< =
if
®® 
(
®® 
slip
®® 
==
®® 
null
®® 
)
®® 
return
©© 
NotFound
©© 
(
©©  
)
©©  !
;
©©! "
var
´´ 
pdf
´´ 
=
´´ 
PdfExporter
´´ !
.
´´! " 
GeneratePayslipPdf
´´" 4
(
´´4 5
slip
´´5 9
,
´´9 :
slip
´´; ?
.
´´? @
EmployeeProfile
´´@ O
.
´´O P
User
´´P T
.
´´T U
FullName
´´U ]
)
´´] ^
;
´´^ _
var
≠≠ 
empName
≠≠ 
=
≠≠ 
slip
≠≠ 
.
≠≠ 
EmployeeProfile
≠≠ .
.
≠≠. /
User
≠≠/ 3
.
≠≠3 4
FullName
≠≠4 <
.
≠≠< =
Replace
≠≠= D
(
≠≠D E
$str
≠≠E H
,
≠≠H I
$str
≠≠J M
)
≠≠M N
;
≠≠N O
var
ÆÆ 
filename
ÆÆ 
=
ÆÆ 
$"
ÆÆ 
{
ÆÆ 
empName
ÆÆ %
}
ÆÆ% &
$str
ÆÆ& /
{
ÆÆ/ 0
slip
ÆÆ0 4
.
ÆÆ4 5
Year
ÆÆ5 9
}
ÆÆ9 :
$str
ÆÆ: ;
{
ÆÆ; <
slip
ÆÆ< @
.
ÆÆ@ A
Month
ÆÆA F
:
ÆÆF G
$str
ÆÆG I
}
ÆÆI J
$str
ÆÆJ N
"
ÆÆN O
;
ÆÆO P
return
∞∞ 
File
∞∞ 
(
∞∞ 
pdf
∞∞ 
,
∞∞ 
$str
∞∞ .
,
∞∞. /
filename
∞∞0 8
)
∞∞8 9
;
∞∞9 :
}
±± 	
[
∂∂ 	
HttpGet
∂∂	 
(
∂∂ 
$str
∂∂ #
)
∂∂# $
]
∂∂$ %
public
∑∑ 
async
∑∑ 
Task
∑∑ 
<
∑∑ 
IActionResult
∑∑ '
>
∑∑' (
ExportCtcPdf
∑∑) 5
(
∑∑5 6
int
∑∑6 9
ctcId
∑∑: ?
)
∑∑? @
{
∏∏ 	
var
ππ 
ctc
ππ 
=
ππ 
await
ππ 
_db
ππ 
.
∫∫ 
CTCStructures
∫∫ 
.
∫∫ 
Include
∫∫ &
(
∫∫& '
c
∫∫' (
=>
∫∫) +
c
∫∫, -
.
∫∫- .
EmployeeProfile
∫∫. =
)
∫∫= >
.
ªª 
ThenInclude
ªª 
(
ªª 
ep
ªª 
=>
ªª  "
ep
ªª# %
.
ªª% &
User
ªª& *
)
ªª* +
.
ºº 
Include
ºº 
(
ºº 
c
ºº 
=>
ºº 
c
ºº 
.
ºº  

Allowances
ºº  *
)
ºº* +
.
ΩΩ 
Include
ΩΩ 
(
ΩΩ 
c
ΩΩ 
=>
ΩΩ 
c
ΩΩ 
.
ΩΩ  

Deductions
ΩΩ  *
)
ΩΩ* +
.
ææ !
FirstOrDefaultAsync
ææ $
(
ææ$ %
c
ææ% &
=>
ææ' )
c
ææ* +
.
ææ+ ,
Id
ææ, .
==
ææ/ 1
ctcId
ææ2 7
)
ææ7 8
;
ææ8 9
if
¿¿ 
(
¿¿ 
ctc
¿¿ 
==
¿¿ 
null
¿¿ 
)
¿¿ 
return
¡¡ 
NotFound
¡¡ 
(
¡¡  
$str
¡¡  /
)
¡¡/ 0
;
¡¡0 1
var
√√ 
pdf
√√ 
=
√√ 
PdfExporter
√√ !
.
√√! "
GenerateCtcPdf
√√" 0
(
√√0 1
ctc
√√1 4
,
√√4 5
ctc
√√6 9
.
√√9 :
EmployeeProfile
√√: I
.
√√I J
User
√√J N
.
√√N O
FullName
√√O W
)
√√W X
;
√√X Y
var
≈≈ 
empName
≈≈ 
=
≈≈ 
ctc
≈≈ 
.
≈≈ 
EmployeeProfile
≈≈ -
.
≈≈- .
User
≈≈. 2
.
≈≈2 3
FullName
≈≈3 ;
.
≈≈; <
Replace
≈≈< C
(
≈≈C D
$str
≈≈D G
,
≈≈G H
$str
≈≈I L
)
≈≈L M
;
≈≈M N
var
∆∆ 
filename
∆∆ 
=
∆∆ 
$"
∆∆ 
{
∆∆ 
empName
∆∆ %
}
∆∆% &
$str
∆∆& +
{
∆∆+ ,
ctc
∆∆, /
.
∆∆/ 0
EffectiveFrom
∆∆0 =
:
∆∆= >
$str
∆∆> H
}
∆∆H I
$str
∆∆I M
"
∆∆M N
;
∆∆N O
return
»» 
File
»» 
(
»» 
pdf
»» 
,
»» 
$str
»» .
,
»». /
filename
»»0 8
)
»»8 9
;
»»9 :
}
…… 	
[
ŒŒ 	
HttpGet
ŒŒ	 
(
ŒŒ 
$str
ŒŒ )
)
ŒŒ) *
]
ŒŒ* +
public
œœ 
async
œœ 
Task
œœ 
<
œœ 
IActionResult
œœ '
>
œœ' ()
ExportEmployeePayslipsExcel
œœ) D
(
œœD E
[
œœE F
	FromQuery
œœF O
]
œœO P
int
œœQ T

employeeId
œœU _
)
œœ_ `
{
–– 	
var
—— 
slips
—— 
=
—— 
await
—— 
_db
—— !
.
““ 
Payslips
““ 
.
““ 
Include
““ !
(
““! "
p
““" #
=>
““$ &
p
““' (
.
““( )
EmployeeProfile
““) 8
)
““8 9
.
”” 
ThenInclude
”” 
(
”” 
ep
”” 
=>
””  "
ep
””# %
.
””% &
User
””& *
)
””* +
.
‘‘ 
Include
‘‘ 
(
‘‘ 
p
‘‘ 
=>
‘‘ 
p
‘‘ 
.
‘‘  
AllowanceItems
‘‘  .
)
‘‘. /
.
’’ 
Include
’’ 
(
’’ 
p
’’ 
=>
’’ 
p
’’ 
.
’’  
DeductionItems
’’  .
)
’’. /
.
÷÷ 
Where
÷÷ 
(
÷÷ 
p
÷÷ 
=>
÷÷ 
p
÷÷ 
.
÷÷ 
EmployeeProfile
÷÷ -
.
÷÷- .
UserId
÷÷. 4
==
÷÷5 7

employeeId
÷÷8 B
)
÷÷B C
.
◊◊ 
OrderByDescending
◊◊ "
(
◊◊" #
p
◊◊# $
=>
◊◊% '
p
◊◊( )
.
◊◊) *
	CreatedAt
◊◊* 3
)
◊◊3 4
.
ÿÿ 
ToListAsync
ÿÿ 
(
ÿÿ 
)
ÿÿ 
;
ÿÿ 
if
⁄⁄ 
(
⁄⁄ 
!
⁄⁄ 
slips
⁄⁄ 
.
⁄⁄ 
Any
⁄⁄ 
(
⁄⁄ 
)
⁄⁄ 
)
⁄⁄ 
return
€€ 
NotFound
€€ 
(
€€  
$str
€€  E
)
€€E F
;
€€F G
var
›› 
bytes
›› 
=
›› 
ExcelExporter
›› %
.
››% &
ExportPayslips
››& 4
(
››4 5
slips
››5 :
)
››: ;
;
››; <
var
ﬂﬂ 
empName
ﬂﬂ 
=
ﬂﬂ 
slips
ﬂﬂ 
.
ﬂﬂ  
First
ﬂﬂ  %
(
ﬂﬂ% &
)
ﬂﬂ& '
.
ﬂﬂ' (
EmployeeProfile
ﬂﬂ( 7
.
ﬂﬂ7 8
User
ﬂﬂ8 <
.
ﬂﬂ< =
FullName
ﬂﬂ= E
.
ﬂﬂE F
Replace
ﬂﬂF M
(
ﬂﬂM N
$str
ﬂﬂN Q
,
ﬂﬂQ R
$str
ﬂﬂS V
)
ﬂﬂV W
;
ﬂﬂW X
var
‡‡ 
filename
‡‡ 
=
‡‡ 
$"
‡‡ 
{
‡‡ 
empName
‡‡ %
}
‡‡% &
$str
‡‡& 4
"
‡‡4 5
;
‡‡5 6
Response
‚‚ 
.
‚‚ 
Headers
‚‚ 
[
‚‚ 
$str
‚‚ 2
]
‚‚2 3
=
‚‚4 5
$"
‚‚6 8
$str
‚‚8 O
{
‚‚O P
filename
‚‚P X
}
‚‚X Y
$str
‚‚Y [
"
‚‚[ \
;
‚‚\ ]
return
„„ 
File
„„ 
(
„„ 
bytes
„„ 
,
„„ 
$str
„„ b
)
„„b c
;
„„c d
}
‰‰ 	
[
ÈÈ 	
HttpGet
ÈÈ	 
(
ÈÈ 
$str
ÈÈ %
)
ÈÈ% &
]
ÈÈ& '
public
ÍÍ 
async
ÍÍ 
Task
ÍÍ 
<
ÍÍ 
IActionResult
ÍÍ '
>
ÍÍ' (%
ExportEmployeeCtcsExcel
ÍÍ) @
(
ÍÍ@ A
[
ÍÍA B
	FromQuery
ÍÍB K
]
ÍÍK L
int
ÍÍM P

employeeId
ÍÍQ [
)
ÍÍ[ \
{
ÎÎ 	
var
ÏÏ 
ctcs
ÏÏ 
=
ÏÏ 
await
ÏÏ 
_db
ÏÏ  
.
ÌÌ 
CTCStructures
ÌÌ 
.
ÌÌ 
Include
ÌÌ &
(
ÌÌ& '
c
ÌÌ' (
=>
ÌÌ) +
c
ÌÌ, -
.
ÌÌ- .
EmployeeProfile
ÌÌ. =
)
ÌÌ= >
.
ÓÓ 
ThenInclude
ÓÓ 
(
ÓÓ 
ep
ÓÓ 
=>
ÓÓ  "
ep
ÓÓ# %
.
ÓÓ% &
User
ÓÓ& *
)
ÓÓ* +
.
ÔÔ 
Include
ÔÔ 
(
ÔÔ 
c
ÔÔ 
=>
ÔÔ 
c
ÔÔ 
.
ÔÔ  

Allowances
ÔÔ  *
)
ÔÔ* +
.
 
Include
 
(
 
c
 
=>
 
c
 
.
  

Deductions
  *
)
* +
.
ÒÒ 
Where
ÒÒ 
(
ÒÒ 
c
ÒÒ 
=>
ÒÒ 
c
ÒÒ 
.
ÒÒ 
EmployeeProfile
ÒÒ -
.
ÒÒ- .
UserId
ÒÒ. 4
==
ÒÒ5 7

employeeId
ÒÒ8 B
)
ÒÒB C
.
ÚÚ 
OrderByDescending
ÚÚ "
(
ÚÚ" #
c
ÚÚ# $
=>
ÚÚ% '
c
ÚÚ( )
.
ÚÚ) *
	CreatedAt
ÚÚ* 3
)
ÚÚ3 4
.
ÛÛ 
ToListAsync
ÛÛ 
(
ÛÛ 
)
ÛÛ 
;
ÛÛ 
if
ıı 
(
ıı 
!
ıı 
ctcs
ıı 
.
ıı 
Any
ıı 
(
ıı 
)
ıı 
)
ıı 
return
ˆˆ 
NotFound
ˆˆ 
(
ˆˆ  
$str
ˆˆ  A
)
ˆˆA B
;
ˆˆB C
var
¯¯ 
bytes
¯¯ 
=
¯¯ 
ExcelExporter
¯¯ %
.
¯¯% &

ExportCTCs
¯¯& 0
(
¯¯0 1
ctcs
¯¯1 5
)
¯¯5 6
;
¯¯6 7
var
˙˙ 
empName
˙˙ 
=
˙˙ 
ctcs
˙˙ 
.
˙˙ 
First
˙˙ $
(
˙˙$ %
)
˙˙% &
.
˙˙& '
EmployeeProfile
˙˙' 6
.
˙˙6 7
User
˙˙7 ;
.
˙˙; <
FullName
˙˙< D
.
˙˙D E
Replace
˙˙E L
(
˙˙L M
$str
˙˙M P
,
˙˙P Q
$str
˙˙R U
)
˙˙U V
;
˙˙V W
var
˚˚ 
filename
˚˚ 
=
˚˚ 
$"
˚˚ 
{
˚˚ 
empName
˚˚ %
}
˚˚% &
$str
˚˚& 0
"
˚˚0 1
;
˚˚1 2
Response
˝˝ 
.
˝˝ 
Headers
˝˝ 
[
˝˝ 
$str
˝˝ 2
]
˝˝2 3
=
˝˝4 5
$"
˝˝6 8
$str
˝˝8 O
{
˝˝O P
filename
˝˝P X
}
˝˝X Y
$str
˝˝Y [
"
˝˝[ \
;
˝˝\ ]
return
˛˛ 
File
˛˛ 
(
˛˛ 
bytes
˛˛ 
,
˛˛ 
$str
˛˛ b
)
˛˛b c
;
˛˛c d
}
ˇˇ 	
[
ÑÑ 	
HttpGet
ÑÑ	 
(
ÑÑ 
$str
ÑÑ %
)
ÑÑ% &
]
ÑÑ& '
public
ÖÖ 
async
ÖÖ 
Task
ÖÖ 
<
ÖÖ 
IActionResult
ÖÖ '
>
ÖÖ' ()
GetEmployeesWithApprovedCTC
ÖÖ) D
(
ÖÖD E
)
ÖÖE F
{
ÜÜ 	
var
áá 
emps
áá 
=
áá 
await
áá 
_db
áá  
.
àà 
Users
àà 
.
àà 
Include
àà 
(
àà 
u
àà  
=>
àà! #
u
àà$ %
.
àà% &
Profile
àà& -
)
àà- .
.
ââ 
ThenInclude
ââ 
(
ââ 
p
ââ 
=>
ââ !
p
ââ" #
.
ââ# $

Department
ââ$ .
)
ââ. /
.
ää 
Include
ää 
(
ää 
u
ää 
=>
ää 
u
ää 
.
ää  
Profile
ää  '
!
ää' (
.
ää( )
CTCStructures
ää) 6
)
ää6 7
.
ãã 
ThenInclude
ãã 
(
ãã 
c
ãã 
=>
ãã !
c
ãã" #
.
ãã# $

Allowances
ãã$ .
)
ãã. /
.
åå 
Include
åå 
(
åå 
u
åå 
=>
åå 
u
åå 
.
åå  
Profile
åå  '
!
åå' (
.
åå( )
CTCStructures
åå) 6
)
åå6 7
.
çç 
ThenInclude
çç 
(
çç 
c
çç 
=>
çç !
c
çç" #
.
çç# $

Deductions
çç$ .
)
çç. /
.
éé 
Where
éé 
(
éé 
u
éé 
=>
éé 
u
èè 
.
èè 
Profile
èè 
!=
èè  
null
èè! %
&&
êê 
u
êê 
.
êê 
Profile
êê  
.
êê  !
CTCStructures
êê! .
.
êê. /
Any
êê/ 2
(
êê2 3
c
êê3 4
=>
êê5 7
c
êê8 9
.
êê9 :
Status
êê: @
==
êêA C
ApprovalStatus
êêD R
.
êêR S
Approved
êêS [
)
êê[ \
)
ëë 
.
íí 
Select
íí 
(
íí 
u
íí 
=>
íí 
new
íí  
{
ìì 
u
îî 
.
îî 
Id
îî 
,
îî 
u
ïï 
.
ïï 
FullName
ïï 
,
ïï 
u
ññ 
.
ññ 
Email
ññ 
,
ññ 

Department
óó 
=
óó  
u
óó! "
.
óó" #
Profile
óó# *
!
óó* +
.
óó+ ,

Department
óó, 6
!=
óó7 9
null
óó: >
?
óó? @
u
óóA B
.
óóB C
Profile
óóC J
.
óóJ K

Department
óóK U
.
óóU V
Name
óóV Z
:
óó[ \
null
óó] a
,
óóa b
	LatestCtc
òò 
=
òò 
u
òò  !
.
òò! "
Profile
òò" )
!
òò) *
.
òò* +
CTCStructures
òò+ 8
.
òò8 9
Where
òò9 >
(
òò> ?
c
òò? @
=>
òòA C
c
ôô 
.
ôô 
Status
ôô $
==
ôô% '
ApprovalStatus
ôô( 6
.
ôô6 7
Approved
ôô7 ?
)
öö 
.
õõ 
OrderByDescending
õõ *
(
õõ* +
c
õõ+ ,
=>
õõ- /
c
õõ0 1
.
õõ1 2
EffectiveFrom
õõ2 ?
)
õõ? @
.
úú 
Select
úú 
(
úú  
c
úú  !
=>
úú" $
new
úú% (
{
ùù 
c
ûû 
.
ûû 
Id
ûû  
,
ûû  !
c
üü 
.
üü 
Basic
üü #
,
üü# $
c
†† 
.
†† 
HRA
†† !
,
††! "
c
°° 
.
°° 
GrossCTC
°° &
,
°°& '
c
¢¢ 
.
¢¢ 

TaxPercent
¢¢ (
,
¢¢( )
c
££ 
.
££ 
Status
££ $
,
££$ %
c
§§ 
.
§§ 
EffectiveFrom
§§ +
,
§§+ ,

Allowances
•• &
=
••' (
c
••) *
.
••* +

Allowances
••+ 5
.
••5 6
Select
••6 <
(
••< =
a
••= >
=>
••? A
new
••B E
{
••F G
a
••H I
.
••I J
Label
••J O
,
••O P
a
••Q R
.
••R S
Amount
••S Y
}
••Z [
)
••[ \
,
••\ ]

Deductions
¶¶ &
=
¶¶' (
c
¶¶) *
.
¶¶* +

Deductions
¶¶+ 5
.
¶¶5 6
Select
¶¶6 <
(
¶¶< =
d
¶¶= >
=>
¶¶? A
new
¶¶B E
{
¶¶F G
d
¶¶H I
.
¶¶I J
Label
¶¶J O
,
¶¶O P
d
¶¶Q R
.
¶¶R S
Amount
¶¶S Y
}
¶¶Z [
)
¶¶[ \
,
¶¶\ ]
}
ßß 
)
ßß 
.
®® 
FirstOrDefault
®® '
(
®®' (
)
®®( )
,
®®) *
}
©© 
)
©© 
.
™™ 
ToListAsync
™™ 
(
™™ 
)
™™ 
;
™™ 
return
¨¨ 
Ok
¨¨ 
(
¨¨ 
emps
¨¨ 
)
¨¨ 
;
¨¨ 
}
≠≠ 	
[
≤≤ 	
HttpGet
≤≤	 
(
≤≤ 
$str
≤≤ 0
)
≤≤0 1
]
≤≤1 2
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
IActionResult
≥≥ '
>
≥≥' ("
GetLatestApprovedCtc
≥≥) =
(
≥≥= >
int
≥≥> A
userId
≥≥B H
)
≥≥H I
{
¥¥ 	
var
µµ 
profile
µµ 
=
µµ 
await
µµ 
_db
µµ  #
.
∂∂ 
EmployeeProfiles
∂∂ !
.
∂∂! "
Include
∂∂" )
(
∂∂) *
p
∂∂* +
=>
∂∂, .
p
∂∂/ 0
.
∂∂0 1
CTCStructures
∂∂1 >
)
∂∂> ?
.
∑∑ 
ThenInclude
∑∑ 
(
∑∑ 
c
∑∑ 
=>
∑∑ !
c
∑∑" #
.
∑∑# $

Allowances
∑∑$ .
)
∑∑. /
.
∏∏ 
Include
∏∏ 
(
∏∏ 
p
∏∏ 
=>
∏∏ 
p
∏∏ 
.
∏∏  
CTCStructures
∏∏  -
)
∏∏- .
.
ππ 
ThenInclude
ππ 
(
ππ 
c
ππ 
=>
ππ !
c
ππ" #
.
ππ# $

Deductions
ππ$ .
)
ππ. /
.
∫∫ !
FirstOrDefaultAsync
∫∫ $
(
∫∫$ %
p
∫∫% &
=>
∫∫' )
p
∫∫* +
.
∫∫+ ,
UserId
∫∫, 2
==
∫∫3 5
userId
∫∫6 <
)
∫∫< =
;
∫∫= >
if
ºº 
(
ºº 
profile
ºº 
==
ºº 
null
ºº 
)
ºº  
return
ΩΩ 
NotFound
ΩΩ 
(
ΩΩ  
$str
ΩΩ  <
)
ΩΩ< =
;
ΩΩ= >
var
øø 
ctc
øø 
=
øø 
profile
øø 
.
¿¿ 
CTCStructures
¿¿ 
.
¿¿ 
Where
¿¿ $
(
¿¿$ %
c
¿¿% &
=>
¿¿' )
c
¿¿* +
.
¿¿+ ,
Status
¿¿, 2
==
¿¿3 5
ApprovalStatus
¿¿6 D
.
¿¿D E
Approved
¿¿E M
)
¿¿M N
.
¡¡ 
OrderByDescending
¡¡ "
(
¡¡" #
c
¡¡# $
=>
¡¡% '
c
¡¡( )
.
¡¡) *
EffectiveFrom
¡¡* 7
)
¡¡7 8
.
¬¬ 
FirstOrDefault
¬¬ 
(
¬¬  
)
¬¬  !
;
¬¬! "
if
ƒƒ 
(
ƒƒ 
ctc
ƒƒ 
==
ƒƒ 
null
ƒƒ 
)
ƒƒ 
return
≈≈ 
NotFound
≈≈ 
(
≈≈  
$str
≈≈  7
)
≈≈7 8
;
≈≈8 9
return
«« 
Ok
«« 
(
«« 
new
»» 
{
…… 
ctc
   
.
   
Id
   
,
   
ctc
ÀÀ 
.
ÀÀ 
Basic
ÀÀ 
,
ÀÀ 
ctc
ÃÃ 
.
ÃÃ 
HRA
ÃÃ 
,
ÃÃ 
ctc
ÕÕ 
.
ÕÕ 
GrossCTC
ÕÕ  
,
ÕÕ  !
ctc
ŒŒ 
.
ŒŒ 

TaxPercent
ŒŒ "
,
ŒŒ" #
ctc
œœ 
.
œœ 
EffectiveFrom
œœ %
,
œœ% &

Allowances
–– 
=
––  
ctc
––! $
.
––$ %

Allowances
––% /
.
––/ 0
Select
––0 6
(
––6 7
a
––7 8
=>
––9 ;
new
––< ?
{
––@ A
a
––B C
.
––C D
Label
––D I
,
––I J
a
––K L
.
––L M
Amount
––M S
}
––T U
)
––U V
,
––V W

Deductions
—— 
=
——  
ctc
——! $
.
——$ %

Deductions
——% /
.
——/ 0
Select
——0 6
(
——6 7
d
——7 8
=>
——9 ;
new
——< ?
{
——@ A
d
——B C
.
——C D
Label
——D I
,
——I J
d
——K L
.
——L M
Amount
——M S
}
——T U
)
——U V
,
——V W
}
““ 
)
”” 
;
”” 
}
‘‘ 	
}
’’ 
}÷÷ ÔÔ
WD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Controllers\EmployeeController.cs
	namespace 	

PayrollApi
 
. 
Controllers  
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
[ 
	Authorize 
( 
Roles 
= 
$str 4
)4 5
]5 6
public 

class 
EmployeeController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
private 
readonly 
IEmailService &
_email' -
;- .
private 
readonly 
IAuditService &
_audit' -
;- .
public 
EmployeeController !
(! "
AppDbContext" .
db/ 1
,1 2
IEmailService3 @
emailA F
,F G
IAuditServiceH U
auditV [
)[ \
{ 	
_db 
= 
db 
; 
_email 
= 
email 
; 
_audit 
= 
audit 
; 
} 	
private!! 
int!! 
CurrentUserId!! !
=>!!" $
int!!% (
.!!( )
Parse!!) .
(!!. /
User!!/ 3
.!!3 4
FindFirstValue!!4 B
(!!B C

ClaimTypes!!C M
.!!M N
NameIdentifier!!N \
)!!\ ]
!!!] ^
)!!^ _
;!!_ `
[&& 	
HttpGet&&	 
(&& 
$str&& 
)&& 
]&& 
public'' 
async'' 
Task'' 
<'' 
IActionResult'' '
>''' (

GetProfile'') 3
(''3 4
)''4 5
{(( 	
var)) 
u)) 
=)) 
await)) 
_db)) 
.** 
Users** 
.** 
Include** 
(** 
u**  
=>**! #
u**$ %
.**% &
Profile**& -
)**- .
.++ 
ThenInclude++ 
(++ 
p++ 
=>++ !
p++" #
.++# $

Department++$ .
)++. /
.,, 
Include,, 
(,, 
u,, 
=>,, 
u,, 
.,,  
Profile,,  '
!,,' (
.,,( )
CTCStructures,,) 6
),,6 7
.-- 
ThenInclude-- 
(-- 
c-- 
=>-- !
c--" #
.--# $

Allowances--$ .
)--. /
... 
Include.. 
(.. 
u.. 
=>.. 
u.. 
...  
Profile..  '
!..' (
...( )
CTCStructures..) 6
)..6 7
.// 
ThenInclude// 
(// 
c// 
=>// !
c//" #
.//# $

Deductions//$ .
)//. /
.00 
FirstOrDefaultAsync00 $
(00$ %
u00% &
=>00' )
u00* +
.00+ ,
Id00, .
==00/ 1
CurrentUserId002 ?
)00? @
;00@ A
if22 
(22 
u22 
==22 
null22 
)22 
return33 
NotFound33 
(33  
)33  !
;33! "
var66 
	latestCtc66 
=66 
u66 
.77 
Profile77 
?77 
.77 
CTCStructures77 '
.77' (
Where77( -
(77- .
c77. /
=>770 2
c773 4
.774 5
Status775 ;
==77< >
ApprovalStatus77? M
.77M N
Approved77N V
)77V W
.88 
OrderByDescending88 "
(88" #
c88# $
=>88% '
c88( )
.88) *
EffectiveFrom88* 7
)887 8
.99 
FirstOrDefault99 
(99  
)99  !
;99! "
return;; 
Ok;; 
(;; 
new<< 
{== 
u>> 
.>> 
Id>> 
,>> 
u?? 
.?? 
Email?? 
,?? 
u@@ 
.@@ 
FullName@@ 
,@@ 
RoleAA 
=AA 
uAA 
.AA 
RoleAA !
.AA! "
ToStringAA" *
(AA* +
)AA+ ,
,AA, -
ProfileBB 
=BB 
uBB 
.BB  
ProfileBB  '
==BB( *
nullBB+ /
?CC 
nullCC 
:DD 
newDD 
{EE 
uFF 
.FF 
ProfileFF %
.FF% &
AddressFF& -
,FF- .
uGG 
.GG 
ProfileGG %
.GG% &
PhoneGG& +
,GG+ ,

DepartmentHH &
=HH' (
uHH) *
.HH* +
ProfileHH+ 2
.HH2 3

DepartmentHH3 =
?HH= >
.HH> ?
NameHH? C
,HHC D
CTCII 
=II  !
	latestCtcII" +
==II, .
nullII/ 3
?JJ  !
nullJJ" &
:KK  !
newKK" %
{LL  !
	latestCtcMM$ -
.MM- .
BasicMM. 3
,MM3 4
	latestCtcNN$ -
.NN- .
HRANN. 1
,NN1 2

AllowancesOO$ .
=OO/ 0
	latestCtcOO1 :
.OO: ;

AllowancesOO; E
.OOE F
SelectOOF L
(OOL M
aOOM N
=>OOO Q
newOOR U
{PP$ %
aQQ( )
.QQ) *
LabelQQ* /
,QQ/ 0
aRR( )
.RR) *
AmountRR* 0
,RR0 1
}SS$ %
)SS% &
,SS& '

DeductionsTT$ .
=TT/ 0
	latestCtcTT1 :
.TT: ;

DeductionsTT; E
.TTE F
SelectTTF L
(TTL M
dTTM N
=>TTO Q
newTTR U
{UU$ %
dVV( )
.VV) *
LabelVV* /
,VV/ 0
dWW( )
.WW) *
AmountWW* 0
,WW0 1
}XX$ %
)XX% &
,XX& '
	latestCtcYY$ -
.YY- .

TaxPercentYY. 8
,YY8 9
	latestCtcZZ$ -
.ZZ- .
GrossCTCZZ. 6
,ZZ6 7
	latestCtc[[$ -
.[[- .
EffectiveFrom[[. ;
,[[; <
	latestCtc\\$ -
.\\- .

IsApproved\\. 8
,\\8 9
}]]  !
,]]! "
}^^ 
,^^ 
}__ 
)`` 
;`` 
}aa 	
[ff 	
HttpPutff	 
(ff 
$strff 
)ff 
]ff 
publicgg 
asyncgg 
Taskgg 
<gg 
IActionResultgg '
>gg' (
UpdateProfilegg) 6
(gg6 7!
EmployeeProfileUpdategg7 L
reqggM P
)ggP Q
{hh 	
varii 
uii 
=ii 
awaitii 
_dbii 
.jj 
Usersjj 
.jj 
Includejj 
(jj 
ujj  
=>jj! #
ujj$ %
.jj% &
Profilejj& -
)jj- .
.kk 
FirstOrDefaultAsynckk $
(kk$ %
ukk% &
=>kk' )
ukk* +
.kk+ ,
Idkk, .
==kk/ 1
CurrentUserIdkk2 ?
)kk? @
;kk@ A
ifmm 
(mm 
umm 
?mm 
.mm 
Profilemm 
==mm 
nullmm "
)mm" #
returnnn 
NotFoundnn 
(nn  
)nn  !
;nn! "
upp 
.pp 
Profilepp 
.pp 
Addresspp 
=pp 
reqpp  #
.pp# $
Addresspp$ +
??pp, .
upp/ 0
.pp0 1
Profilepp1 8
.pp8 9
Addresspp9 @
;pp@ A
uqq 
.qq 
Profileqq 
.qq 
Phoneqq 
=qq 
reqqq !
.qq! "
Phoneqq" '
??qq( *
uqq+ ,
.qq, -
Profileqq- 4
.qq4 5
Phoneqq5 :
;qq: ;
urr 
.rr 
Profilerr 
.rr 
DepartmentIdrr "
=rr# $
reqrr% (
.rr( )
DepartmentIdrr) 5
??rr6 8
urr9 :
.rr: ;
Profilerr; B
.rrB C
DepartmentIdrrC O
;rrO P
uss 
.ss 
Profiless 
.ss 
	UpdatedAtss 
=ss  !
DateTimess" *
.ss* +
UtcNowss+ 1
;ss1 2
awaittt 
_dbtt 
.tt 
SaveChangesAsynctt &
(tt& '
)tt' (
;tt( )
_dbww 
.ww 
Notificationsww 
.ww 
Addww !
(ww! "
newxx 
Notificationxx  
{yy 
UserIdzz 
=zz 
uzz 
.zz 
Idzz !
,zz! "
Subject{{ 
={{ 
$str{{ /
,{{/ 0
Message|| 
=|| 
$str|| W
,||W X
}}} 
)~~ 
;~~ 
await
ÅÅ 
_audit
ÅÅ 
.
ÅÅ 
LogAsync
ÅÅ !
(
ÅÅ! "
$str
ÇÇ !
,
ÇÇ! "
u
ÉÉ 
.
ÉÉ 
Profile
ÉÉ 
.
ÉÉ 
Id
ÉÉ 
,
ÉÉ 
$str
ÑÑ 
,
ÑÑ 
$"
ÖÖ 
$str
ÖÖ %
{
ÖÖ% &
u
ÖÖ& '
.
ÖÖ' (
Email
ÖÖ( -
}
ÖÖ- .
"
ÖÖ. /
,
ÖÖ/ 0
u
ÜÜ 
.
ÜÜ 
Id
ÜÜ 
,
ÜÜ 
u
áá 
.
áá 
Email
áá 
)
àà 
;
àà 
await
ââ 
_db
ââ 
.
ââ 
SaveChangesAsync
ââ &
(
ââ& '
)
ââ' (
;
ââ( )
await
åå 
_email
åå 
.
åå  
SendTemplatedAsync
åå +
(
åå+ ,
u
çç 
.
çç 
Email
çç 
,
çç 
$str
éé !
,
éé! "
$"
èè 
$str
èè 
{
èè 
u
èè 
.
èè 
FullName
èè  
}
èè  !
$str
èè! ^
"
èè^ _
)
êê 
;
êê 
return
íí 
Ok
íí 
(
íí 
)
íí 
;
íí 
}
ìì 	
[
òò 	
HttpGet
òò	 
(
òò 
$str
òò 
)
òò 
]
òò 
public
ôô 
async
ôô 
Task
ôô 
<
ôô 
ActionResult
ôô &
<
ôô& '
PagedResult
ôô' 2
<
ôô2 3
PayslipSummary
ôô3 A
>
ôôA B
>
ôôB C
>
ôôC D
GetMyPayslips
ôôE R
(
ôôR S
[
öö 
	FromQuery
öö 
]
öö 
int
öö 
page
öö  
=
öö! "
$num
öö# $
,
öö$ %
[
õõ 
	FromQuery
õõ 
]
õõ 
int
õõ 
pageSize
õõ $
=
õõ% &
$num
õõ' )
)
úú 	
{
ùù 	
var
ûû 
	profileId
ûû 
=
ûû 
await
ûû !
_db
ûû" %
.
üü 
EmployeeProfiles
üü !
.
üü! "
Where
üü" '
(
üü' (
p
üü( )
=>
üü* ,
p
üü- .
.
üü. /
UserId
üü/ 5
==
üü6 8
CurrentUserId
üü9 F
)
üüF G
.
†† 
Select
†† 
(
†† 
p
†† 
=>
†† 
p
†† 
.
†† 
Id
†† !
)
††! "
.
°° !
FirstOrDefaultAsync
°° $
(
°°$ %
)
°°% &
;
°°& '
if
££ 
(
££ 
	profileId
££ 
==
££ 
$num
££ 
)
££ 
return
§§ 
NotFound
§§ 
(
§§  
)
§§  !
;
§§! "
var
¶¶ 
q
¶¶ 
=
¶¶ 
_db
¶¶ 
.
ßß 
Payslips
ßß 
.
ßß 
Where
ßß 
(
ßß  
p
ßß  !
=>
ßß" $
p
ßß% &
.
ßß& '
EmployeeProfileId
ßß' 8
==
ßß9 ;
	profileId
ßß< E
)
ßßE F
.
®® 
OrderByDescending
®® "
(
®®" #
p
®®# $
=>
®®% '
p
®®( )
.
®®) *
Year
®®* .
)
®®. /
.
©© 
ThenByDescending
©© !
(
©©! "
p
©©" #
=>
©©$ &
p
©©' (
.
©©( )
Month
©©) .
)
©©. /
;
©©/ 0
var
´´ 
(
´´ 
total
´´ 
,
´´ 
list
´´ 
)
´´ 
=
´´ 
(
´´  !
await
¨¨ 
q
¨¨ 
.
¨¨ 

CountAsync
¨¨ "
(
¨¨" #
)
¨¨# $
,
¨¨$ %
await
≠≠ 
q
≠≠ 
.
≠≠ 
Select
≠≠ 
(
≠≠ 
p
≠≠  
=>
≠≠! #
new
≠≠$ '
PayslipSummary
≠≠( 6
{
ÆÆ 
Id
ØØ 
=
ØØ 
p
ØØ 
.
ØØ 
Id
ØØ !
,
ØØ! "
Year
∞∞ 
=
∞∞ 
p
∞∞  
.
∞∞  !
Year
∞∞! %
,
∞∞% &
Month
±± 
=
±± 
p
±±  !
.
±±! "
Month
±±" '
,
±±' (
NetPay
≤≤ 
=
≤≤  
p
≤≤! "
.
≤≤" #
NetPay
≤≤# )
,
≤≤) *
Status
≥≥ 
=
≥≥  
p
≥≥! "
.
≥≥" #
Status
≥≥# )
,
≥≥) *

IsReleased
¥¥ "
=
¥¥# $
p
¥¥% &
.
¥¥& '

IsReleased
¥¥' 1
,
¥¥1 2
}
µµ 
)
µµ 
.
∂∂ 
Skip
∂∂ 
(
∂∂ 
(
∂∂ 
page
∂∂ 
-
∂∂  !
$num
∂∂" #
)
∂∂# $
*
∂∂% &
pageSize
∂∂' /
)
∂∂/ 0
.
∑∑ 
Take
∑∑ 
(
∑∑ 
pageSize
∑∑ "
)
∑∑" #
.
∏∏ 
ToListAsync
∏∏  
(
∏∏  !
)
∏∏! "
)
ππ 
;
ππ 
return
ªª 
Ok
ªª 
(
ªª 
new
ºº 
PagedResult
ºº 
<
ºº  
PayslipSummary
ºº  .
>
ºº. /
{
ΩΩ 
Page
ææ 
=
ææ 
page
ææ 
,
ææ  
PageSize
øø 
=
øø 
pageSize
øø '
,
øø' (
Total
¿¿ 
=
¿¿ 
total
¿¿ !
,
¿¿! "
Items
¡¡ 
=
¡¡ 
list
¡¡  
,
¡¡  !
}
¬¬ 
)
√√ 
;
√√ 
}
ƒƒ 	
[
…… 	
HttpGet
……	 
(
…… 
$str
…… +
)
……+ ,
]
……, -
public
   
async
   
Task
   
<
   
IActionResult
   '
>
  ' ("
DownloadMyPayslipPdf
  ) =
(
  = >
int
  > A
	payslipId
  B K
)
  K L
{
ÀÀ 	
var
ÃÃ 
	profileId
ÃÃ 
=
ÃÃ 
await
ÃÃ !
_db
ÃÃ" %
.
ÕÕ 
EmployeeProfiles
ÕÕ !
.
ÕÕ! "
Where
ÕÕ" '
(
ÕÕ' (
p
ÕÕ( )
=>
ÕÕ* ,
p
ÕÕ- .
.
ÕÕ. /
UserId
ÕÕ/ 5
==
ÕÕ6 8
CurrentUserId
ÕÕ9 F
)
ÕÕF G
.
ŒŒ 
Select
ŒŒ 
(
ŒŒ 
p
ŒŒ 
=>
ŒŒ 
p
ŒŒ 
.
ŒŒ 
Id
ŒŒ !
)
ŒŒ! "
.
œœ !
FirstOrDefaultAsync
œœ $
(
œœ$ %
)
œœ% &
;
œœ& '
var
—— 
slip
—— 
=
—— 
await
—— 
_db
——  
.
““ 
Payslips
““ 
.
““ 
Include
““ !
(
““! "
p
““" #
=>
““$ &
p
““' (
.
““( )
EmployeeProfile
““) 8
)
““8 9
.
”” 
ThenInclude
”” 
(
”” 
ep
”” 
=>
””  "
ep
””# %
.
””% &
User
””& *
)
””* +
.
‘‘ 
Include
‘‘ 
(
‘‘ 
p
‘‘ 
=>
‘‘ 
p
‘‘ 
.
‘‘  
AllowanceItems
‘‘  .
)
‘‘. /
.
’’ 
Include
’’ 
(
’’ 
p
’’ 
=>
’’ 
p
’’ 
.
’’  
DeductionItems
’’  .
)
’’. /
.
÷÷ !
FirstOrDefaultAsync
÷÷ $
(
÷÷$ %
p
÷÷% &
=>
÷÷' )
p
÷÷* +
.
÷÷+ ,
Id
÷÷, .
==
÷÷/ 1
	payslipId
÷÷2 ;
&&
÷÷< >
p
÷÷? @
.
÷÷@ A
EmployeeProfileId
÷÷A R
==
÷÷S U
	profileId
÷÷V _
)
÷÷_ `
;
÷÷` a
if
ÿÿ 
(
ÿÿ 
slip
ÿÿ 
==
ÿÿ 
null
ÿÿ 
)
ÿÿ 
return
ŸŸ 
NotFound
ŸŸ 
(
ŸŸ  
)
ŸŸ  !
;
ŸŸ! "
var
€€ 
pdf
€€ 
=
€€ 
PdfExporter
€€ !
.
€€! " 
GeneratePayslipPdf
€€" 4
(
€€4 5
slip
€€5 9
,
€€9 :
slip
€€; ?
.
€€? @
EmployeeProfile
€€@ O
.
€€O P
User
€€P T
.
€€T U
FullName
€€U ]
)
€€] ^
;
€€^ _
return
‹‹ 
File
‹‹ 
(
‹‹ 
pdf
‹‹ 
,
‹‹ 
$str
‹‹ .
,
‹‹. /
$"
‹‹0 2
$str
‹‹2 :
{
‹‹: ;
slip
‹‹; ?
.
‹‹? @
Year
‹‹@ D
}
‹‹D E
$str
‹‹E F
{
‹‹F G
slip
‹‹G K
.
‹‹K L
Month
‹‹L Q
:
‹‹Q R
$str
‹‹R T
}
‹‹T U
$str
‹‹U Y
"
‹‹Y Z
)
‹‹Z [
;
‹‹[ \
}
›› 	
[
‚‚ 	
HttpGet
‚‚	 
(
‚‚ 
$str
‚‚ '
)
‚‚' (
]
‚‚( )
public
„„ 
async
„„ 
Task
„„ 
<
„„ 
ActionResult
„„ &
<
„„& '
PayslipResponse
„„' 6
>
„„6 7
>
„„7 8
GetPayslipDetail
„„9 I
(
„„I J
int
„„J M
	payslipId
„„N W
)
„„W X
{
‰‰ 	
var
ÂÂ 
	profileId
ÂÂ 
=
ÂÂ 
await
ÂÂ !
_db
ÂÂ" %
.
ÊÊ 
EmployeeProfiles
ÊÊ !
.
ÊÊ! "
Where
ÊÊ" '
(
ÊÊ' (
p
ÊÊ( )
=>
ÊÊ* ,
p
ÊÊ- .
.
ÊÊ. /
UserId
ÊÊ/ 5
==
ÊÊ6 8
CurrentUserId
ÊÊ9 F
)
ÊÊF G
.
ÁÁ 
Select
ÁÁ 
(
ÁÁ 
p
ÁÁ 
=>
ÁÁ 
p
ÁÁ 
.
ÁÁ 
Id
ÁÁ !
)
ÁÁ! "
.
ËË !
FirstOrDefaultAsync
ËË $
(
ËË$ %
)
ËË% &
;
ËË& '
if
ÍÍ 
(
ÍÍ 
	profileId
ÍÍ 
==
ÍÍ 
$num
ÍÍ 
)
ÍÍ 
return
ÎÎ 
NotFound
ÎÎ 
(
ÎÎ  
$str
ÎÎ  <
)
ÎÎ< =
;
ÎÎ= >
var
ÌÌ 
slip
ÌÌ 
=
ÌÌ 
await
ÌÌ 
_db
ÌÌ  
.
ÓÓ 
Payslips
ÓÓ 
.
ÓÓ 
Include
ÓÓ !
(
ÓÓ! "
p
ÓÓ" #
=>
ÓÓ$ &
p
ÓÓ' (
.
ÓÓ( )
AllowanceItems
ÓÓ) 7
)
ÓÓ7 8
.
ÔÔ 
Include
ÔÔ 
(
ÔÔ 
p
ÔÔ 
=>
ÔÔ 
p
ÔÔ 
.
ÔÔ  
DeductionItems
ÔÔ  .
)
ÔÔ. /
.
 !
FirstOrDefaultAsync
 $
(
$ %
p
% &
=>
' )
p
* +
.
+ ,
Id
, .
==
/ 1
	payslipId
2 ;
&&
< >
p
? @
.
@ A
EmployeeProfileId
A R
==
S U
	profileId
V _
)
_ `
;
` a
if
ÚÚ 
(
ÚÚ 
slip
ÚÚ 
==
ÚÚ 
null
ÚÚ 
)
ÚÚ 
return
ÛÛ 
NotFound
ÛÛ 
(
ÛÛ  
$str
ÛÛ  3
)
ÛÛ3 4
;
ÛÛ4 5
var
ıı 
response
ıı 
=
ıı 
new
ıı 

PayrollApi
ıı )
.
ıı) *
DTOs
ıı* .
.
ıı. /
PayslipResponse
ıı/ >
{
ˆˆ 
Id
˜˜ 
=
˜˜ 
slip
˜˜ 
.
˜˜ 
Id
˜˜ 
,
˜˜ 
Year
¯¯ 
=
¯¯ 
slip
¯¯ 
.
¯¯ 
Year
¯¯  
,
¯¯  !
Month
˘˘ 
=
˘˘ 
slip
˘˘ 
.
˘˘ 
Month
˘˘ "
,
˘˘" #
Basic
˙˙ 
=
˙˙ 
slip
˙˙ 
.
˙˙ 
Basic
˙˙ "
,
˙˙" #
HRA
˚˚ 
=
˚˚ 
slip
˚˚ 
.
˚˚ 
HRA
˚˚ 
,
˚˚ 
AllowanceItems
¸¸ 
=
¸¸  
slip
¸¸! %
.
˝˝ 
AllowanceItems
˝˝ #
.
˝˝# $
Select
˝˝$ *
(
˝˝* +
a
˝˝+ ,
=>
˝˝- /
new
˝˝0 3

PayrollApi
˝˝4 >
.
˝˝> ?
DTOs
˝˝? C
.
˝˝C D
PayslipItemDto
˝˝D R
{
˛˛ 
Label
ˇˇ 
=
ˇˇ 
a
ˇˇ  !
.
ˇˇ! "
Label
ˇˇ" '
,
ˇˇ' (
Amount
ÄÄ 
=
ÄÄ  
a
ÄÄ! "
.
ÄÄ" #
Amount
ÄÄ# )
,
ÄÄ) *
}
ÅÅ 
)
ÅÅ 
.
ÇÇ 
ToList
ÇÇ 
(
ÇÇ 
)
ÇÇ 
,
ÇÇ 
DeductionItems
ÉÉ 
=
ÉÉ  
slip
ÉÉ! %
.
ÑÑ 
DeductionItems
ÑÑ #
.
ÑÑ# $
Select
ÑÑ$ *
(
ÑÑ* +
d
ÑÑ+ ,
=>
ÑÑ- /
new
ÑÑ0 3

PayrollApi
ÑÑ4 >
.
ÑÑ> ?
DTOs
ÑÑ? C
.
ÑÑC D
PayslipItemDto
ÑÑD R
{
ÖÖ 
Label
ÜÜ 
=
ÜÜ 
d
ÜÜ  !
.
ÜÜ! "
Label
ÜÜ" '
,
ÜÜ' (
Amount
áá 
=
áá  
d
áá! "
.
áá" #
Amount
áá# )
,
áá) *
}
àà 
)
àà 
.
ââ 
ToList
ââ 
(
ââ 
)
ââ 
,
ââ 
TaxDeducted
ää 
=
ää 
slip
ää "
.
ää" #
TaxDeducted
ää# .
,
ää. /
LOPDays
ãã 
=
ãã 
slip
ãã 
.
ãã 
LOPDays
ãã &
,
ãã& '
NetPay
åå 
=
åå 
slip
åå 
.
åå 
NetPay
åå $
,
åå$ %
Status
çç 
=
çç 
slip
çç 
.
çç 
Status
çç $
,
çç$ %

IsReleased
éé 
=
éé 
slip
éé !
.
éé! "

IsReleased
éé" ,
,
éé, -
}
èè 
;
èè 
return
ëë 
Ok
ëë 
(
ëë 
response
ëë 
)
ëë 
;
ëë  
}
íí 	
[
óó 	
HttpGet
óó	 
(
óó 
$str
óó 
)
óó 
]
óó 
public
òò 
async
òò 
Task
òò 
<
òò 
IActionResult
òò '
>
òò' (
	GetMyCTCs
òò) 2
(
òò2 3
)
òò3 4
{
ôô 	
var
öö 
	profileId
öö 
=
öö 
await
öö !
_db
öö" %
.
õõ 
EmployeeProfiles
õõ !
.
õõ! "
Where
õõ" '
(
õõ' (
p
õõ( )
=>
õõ* ,
p
õõ- .
.
õõ. /
UserId
õõ/ 5
==
õõ6 8
CurrentUserId
õõ9 F
)
õõF G
.
úú 
Select
úú 
(
úú 
p
úú 
=>
úú 
p
úú 
.
úú 
Id
úú !
)
úú! "
.
ùù !
FirstOrDefaultAsync
ùù $
(
ùù$ %
)
ùù% &
;
ùù& '
if
üü 
(
üü 
	profileId
üü 
==
üü 
$num
üü 
)
üü 
return
†† 
NotFound
†† 
(
††  
$str
††  <
)
††< =
;
††= >
var
¢¢ 
ctcs
¢¢ 
=
¢¢ 
await
¢¢ 
_db
¢¢  
.
££ 
CTCStructures
££ 
.
££ 
Include
££ &
(
££& '
c
££' (
=>
££) +
c
££, -
.
££- .

Allowances
££. 8
)
££8 9
.
§§ 
Include
§§ 
(
§§ 
c
§§ 
=>
§§ 
c
§§ 
.
§§  

Deductions
§§  *
)
§§* +
.
•• 
Where
•• 
(
•• 
c
•• 
=>
•• 
c
•• 
.
•• 
EmployeeProfileId
•• /
==
••0 2
	profileId
••3 <
)
••< =
.
¶¶ 
OrderByDescending
¶¶ "
(
¶¶" #
c
¶¶# $
=>
¶¶% '
c
¶¶( )
.
¶¶) *
EffectiveFrom
¶¶* 7
)
¶¶7 8
.
ßß 
Select
ßß 
(
ßß 
c
ßß 
=>
ßß 
new
ßß  
{
®® 
c
©© 
.
©© 
Id
©© 
,
©© 
c
™™ 
.
™™ 
Basic
™™ 
,
™™ 
c
´´ 
.
´´ 
HRA
´´ 
,
´´ 
c
¨¨ 
.
¨¨ 
GrossCTC
¨¨ 
,
¨¨ 
c
≠≠ 
.
≠≠ 

TaxPercent
≠≠  
,
≠≠  !
c
ÆÆ 
.
ÆÆ 
EffectiveFrom
ÆÆ #
,
ÆÆ# $
Status
ØØ 
=
ØØ 
c
ØØ 
.
ØØ 
Status
ØØ %
.
ØØ% &
ToString
ØØ& .
(
ØØ. /
)
ØØ/ 0
,
ØØ0 1

Allowances
∞∞ 
=
∞∞  
c
∞∞! "
.
∞∞" #

Allowances
∞∞# -
.
∞∞- .
Select
∞∞. 4
(
∞∞4 5
a
∞∞5 6
=>
∞∞7 9
new
∞∞: =
{
∞∞> ?
a
∞∞@ A
.
∞∞A B
Label
∞∞B G
,
∞∞G H
a
∞∞I J
.
∞∞J K
Amount
∞∞K Q
}
∞∞R S
)
∞∞S T
,
∞∞T U

Deductions
±± 
=
±±  
c
±±! "
.
±±" #

Deductions
±±# -
.
±±- .
Select
±±. 4
(
±±4 5
d
±±5 6
=>
±±7 9
new
±±: =
{
±±> ?
d
±±@ A
.
±±A B
Label
±±B G
,
±±G H
d
±±I J
.
±±J K
Amount
±±K Q
}
±±R S
)
±±S T
,
±±T U
}
≤≤ 
)
≤≤ 
.
≥≥ 
ToListAsync
≥≥ 
(
≥≥ 
)
≥≥ 
;
≥≥ 
return
µµ 
Ok
µµ 
(
µµ 
ctcs
µµ 
)
µµ 
;
µµ 
}
∂∂ 	
[
ªª 	
HttpGet
ªª	 
(
ªª 
$str
ªª #
)
ªª# $
]
ªª$ %
public
ºº 
async
ºº 
Task
ºº 
<
ºº 
IActionResult
ºº '
>
ºº' (
DownloadMyCTCPdf
ºº) 9
(
ºº9 :
int
ºº: =
ctcId
ºº> C
)
ººC D
{
ΩΩ 	
var
ææ 
	profileId
ææ 
=
ææ 
await
ææ !
_db
ææ" %
.
øø 
EmployeeProfiles
øø !
.
øø! "
Where
øø" '
(
øø' (
p
øø( )
=>
øø* ,
p
øø- .
.
øø. /
UserId
øø/ 5
==
øø6 8
CurrentUserId
øø9 F
)
øøF G
.
¿¿ 
Select
¿¿ 
(
¿¿ 
p
¿¿ 
=>
¿¿ 
p
¿¿ 
.
¿¿ 
Id
¿¿ !
)
¿¿! "
.
¡¡ !
FirstOrDefaultAsync
¡¡ $
(
¡¡$ %
)
¡¡% &
;
¡¡& '
var
√√ 
ctc
√√ 
=
√√ 
await
√√ 
_db
√√ 
.
ƒƒ 
CTCStructures
ƒƒ 
.
ƒƒ 
Include
ƒƒ &
(
ƒƒ& '
c
ƒƒ' (
=>
ƒƒ) +
c
ƒƒ, -
.
ƒƒ- .
EmployeeProfile
ƒƒ. =
)
ƒƒ= >
.
≈≈ 
ThenInclude
≈≈ 
(
≈≈ 
p
≈≈ 
=>
≈≈ !
p
≈≈" #
.
≈≈# $
User
≈≈$ (
)
≈≈( )
.
∆∆ 
Include
∆∆ 
(
∆∆ 
c
∆∆ 
=>
∆∆ 
c
∆∆ 
.
∆∆  

Allowances
∆∆  *
)
∆∆* +
.
«« 
Include
«« 
(
«« 
c
«« 
=>
«« 
c
«« 
.
««  

Deductions
««  *
)
««* +
.
»» !
FirstOrDefaultAsync
»» $
(
»»$ %
c
»»% &
=>
»»' )
c
»»* +
.
»»+ ,
Id
»», .
==
»»/ 1
ctcId
»»2 7
&&
»»8 :
c
»»; <
.
»»< =
EmployeeProfileId
»»= N
==
»»O Q
	profileId
»»R [
)
»»[ \
;
»»\ ]
if
   
(
   
ctc
   
==
   
null
   
)
   
return
ÀÀ 
NotFound
ÀÀ 
(
ÀÀ  
)
ÀÀ  !
;
ÀÀ! "
var
ÕÕ 
pdf
ÕÕ 
=
ÕÕ 
PdfExporter
ÕÕ !
.
ÕÕ! "
GenerateCtcPdf
ÕÕ" 0
(
ÕÕ0 1
ctc
ÕÕ1 4
,
ÕÕ4 5
ctc
ÕÕ6 9
.
ÕÕ9 :
EmployeeProfile
ÕÕ: I
.
ÕÕI J
User
ÕÕJ N
.
ÕÕN O
FullName
ÕÕO W
)
ÕÕW X
;
ÕÕX Y
return
ŒŒ 
File
ŒŒ 
(
ŒŒ 
pdf
ŒŒ 
,
ŒŒ 
$str
ŒŒ .
,
ŒŒ. /
$"
ŒŒ0 2
$str
ŒŒ2 6
{
ŒŒ6 7
ctc
ŒŒ7 :
.
ŒŒ: ;
EffectiveFrom
ŒŒ; H
:
ŒŒH I
$str
ŒŒI P
}
ŒŒP Q
$str
ŒŒQ R
{
ŒŒR S
ctc
ŒŒS V
.
ŒŒV W
Id
ŒŒW Y
}
ŒŒY Z
$str
ŒŒZ ^
"
ŒŒ^ _
)
ŒŒ_ `
;
ŒŒ` a
}
œœ 	
}
–– 
}—— ©m
SD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Controllers\AuthController.cs
	namespace		 	

PayrollApi		
 
.		 
Controllers		  
{

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
AuthController 
:  !
ControllerBase" 0
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
private 
readonly 
IJwtService $
_jwt% )
;) *
private 
readonly 
IEmailService &
_email' -
;- .
private 
readonly 
IAuditService &
_audit' -
;- .
public 
AuthController 
( 
AppDbContext 
db 
, 
IJwtService 
jwt 
, 
IEmailService 
email 
,  
IAuditService 
audit 
) 	
{ 	
_db 
= 
db 
; 
_jwt 
= 
jwt 
; 
_email 
= 
email 
; 
_audit 
= 
audit 
; 
} 	
[$$ 	
HttpPost$$	 
($$ 
$str$$ 
)$$ 
]$$ 
public%% 
async%% 
Task%% 
<%% 
ActionResult%% &
<%%& '
AuthResponse%%' 3
>%%3 4
>%%4 5
Login%%6 ;
(%%; <
LoginRequest%%< H
req%%I L
)%%L M
{&& 	
var'' 
user'' 
='' 
await'' 
_db''  
.(( 
Users(( 
.(( 
Include(( 
((( 
u((  
=>((! #
u(($ %
.((% &
Profile((& -
)((- .
.)) 
FirstOrDefaultAsync)) $
())$ %
u))% &
=>))' )
u))* +
.))+ ,
Email)), 1
==))2 4
req))5 8
.))8 9
Email))9 >
)))> ?
;))? @
if++ 
(++ 
user,, 
==,, 
null,, 
||-- 
!-- 
user-- 
.-- 
IsActive-- !
||.. 
!.. 
BCrypt.. 
... 
Net.. 
... 
BCrypt.. %
...% &
Verify..& ,
(.., -
req..- 0
...0 1
Password..1 9
,..9 :
user..; ?
...? @
PasswordHash..@ L
)..L M
)// 
return00 
Unauthorized00 #
(00# $
$str00$ 9
)009 :
;00: ;
var22 
(22 
token22 
,22 
exp22 
)22 
=22 
_jwt22 #
.22# $
Generate22$ ,
(22, -
user22- 1
)221 2
;222 3
var33 
profileCompleted33  
=33! "
user44 
.44 
Profile44 
!=44 
null44  $
&&55 
(55 
user55 
.55 
Profile55  
.55  !
Address55! (
!=55) +
null55, 0
||551 3
user554 8
.558 9
Profile559 @
.55@ A
DepartmentId55A M
!=55N P
null55Q U
)55U V
;55V W
await88 
_audit88 
.88 
LogAsync88 !
(88! "
$str99 
,99 
user:: 
.:: 
Id:: 
,:: 
$str;; 
,;; 
$"<< 
$str<< #
"<<# $
,<<$ %
user== 
.== 
Id== 
,== 
user>> 
.>> 
Email>> 
)?? 
;?? 
await@@ 
_db@@ 
.@@ 
SaveChangesAsync@@ &
(@@& '
)@@' (
;@@( )
varCC 
	loginTimeCC 
=CC 
DateTimeCC $
.CC$ %
UtcNowCC% +
;CC+ ,
awaitDD 
_emailDD 
.DD 
SendTemplatedAsyncDD +
(DD+ ,
userEE 
.EE 
EmailEE 
,EE 
$strFF $
,FF$ %
$"GG 
$strGG 
{GG 
userGG 
.GG 
FullNameGG &
}GG& '
$strGG' -
"GG- .
+HH 
$"HH 
$strHH F
"HHF G
+II 
$"II 
$strII +
{II+ ,
	loginTimeII, 5
:II5 6
$strII6 I
}III J
$strIIJ O
"IIO P
+JJ 
$"JJ 
$strJJ T
"JJT U
)KK 
;KK 
returnMM 
OkMM 
(MM 
newNN 
AuthResponseNN  
{OO 
TokenPP 
=PP 
tokenPP !
,PP! "
RoleQQ 
=QQ 
userQQ 
.QQ  
RoleQQ  $
.QQ$ %
ToStringQQ% -
(QQ- .
)QQ. /
,QQ/ 0
UserIdRR 
=RR 
userRR !
.RR! "
IdRR" $
,RR$ %
FullNameSS 
=SS 
userSS #
.SS# $
FullNameSS$ ,
,SS, -
ProfileCompletedTT $
=TT% &
profileCompletedTT' 7
,TT7 8
ExpiresAtUtcUU  
=UU! "
expUU# &
,UU& '
}VV 
)WW 
;WW 
}XX 	
[__ 	
HttpPost__	 
(__ 
$str__ +
)__+ ,
]__, -
public`` 
async`` 
Task`` 
<`` 
IActionResult`` '
>``' (!
ForgotPasswordRequest``) >
(``> ?
[``? @
FromBody``@ H
]``H I 
ResetPasswordRequest``J ^
req``_ b
)``b c
{aa 	
ifbb 
(bb 
stringbb 
.bb 
IsNullOrWhiteSpacebb )
(bb) *
reqbb* -
.bb- .
Emailbb. 3
)bb3 4
)bb4 5
returncc 

BadRequestcc !
(cc! "
$strcc" 6
)cc6 7
;cc7 8
varee 
useree 
=ee 
awaitee 
_dbee  
.ee  !
Usersee! &
.ee& '
FirstOrDefaultAsyncee' :
(ee: ;
uee; <
=>ee= ?
uee@ A
.eeA B
EmaileeB G
==eeH J
reqeeK N
.eeN O
EmaileeO T
)eeT U
;eeU V
ifff 
(ff 
userff 
==ff 
nullff 
)ff 
returngg 
Okgg 
(gg 
newgg 
{gg 
Messagegg  '
=gg( )
$strgg* ^
}gg_ `
)gg` a
;gga b
awaitjj 
_auditjj 
.jj 
LogAsyncjj !
(jj! "
$strkk 
,kk 
userll 
.ll 
Idll 
,ll 
$strmm &
,mm& '
$"nn 
$strnn 
{nn 
usernn 
.nn 
Emailnn "
}nn" #
$strnn# ?
"nn? @
,nn@ A
useroo 
.oo 
Idoo 
,oo 
userpp 
.pp 
Emailpp 
)qq 
;qq 
awaitrr 
_dbrr 
.rr 
SaveChangesAsyncrr &
(rr& '
)rr' (
;rr( )
varuu 
adminsuu 
=uu 
awaituu 
_dbuu "
.uu" #
Usersuu# (
.uu( )
Whereuu) .
(uu. /
uuu/ 0
=>uu1 3
uuu4 5
.uu5 6
Roleuu6 :
==uu; =
UserRoleuu> F
.uuF G
AdminuuG L
)uuL M
.uuM N
ToListAsyncuuN Y
(uuY Z
)uuZ [
;uu[ \
foreachvv 
(vv 
varvv 
adminvv 
invv !
adminsvv" (
)vv( )
{ww 
_dbxx 
.xx 
Notificationsxx !
.xx! "
Addxx" %
(xx% &
newyy 
Notificationyy $
{zz 
UserId{{ 
={{  
admin{{! &
.{{& '
Id{{' )
,{{) *
Subject|| 
=||  !
$str||" A
,||A B
Message}} 
=}}  !
$"~~ 
$str~~ #
{~~# $
user~~$ (
.~~( )
FullName~~) 1
}~~1 2
$str~~2 4
{~~4 5
user~~5 9
.~~9 :
Email~~: ?
}~~? @
$str~~@ a
"~~a b
,~~b c
} 
)
ÄÄ 
;
ÄÄ 
await
ÇÇ 
_email
ÇÇ 
.
ÇÇ  
SendTemplatedAsync
ÇÇ /
(
ÇÇ/ 0
admin
ÉÉ 
.
ÉÉ 
Email
ÉÉ 
,
ÉÉ  
$str
ÑÑ 3
,
ÑÑ3 4
$"
ÖÖ 
$str
ÖÖ &
{
ÖÖ& '
user
ÖÖ' +
.
ÖÖ+ ,
FullName
ÖÖ, 4
}
ÖÖ4 5
$str
ÖÖ5 7
{
ÖÖ7 8
user
ÖÖ8 <
.
ÖÖ< =
Email
ÖÖ= B
}
ÖÖB C
$str
ÖÖC l
{
ÖÖl m
DateTime
ÖÖm u
.
ÖÖu v
UtcNow
ÖÖv |
:
ÖÖ| }
$strÖÖ} é
}ÖÖé è
$strÖÖè î
"ÖÖî ï
)
ÜÜ 
;
ÜÜ 
}
áá 
await
àà 
_db
àà 
.
àà 
SaveChangesAsync
àà &
(
àà& '
)
àà' (
;
àà( )
await
ãã 
_email
ãã 
.
ãã  
SendTemplatedAsync
ãã +
(
ãã+ ,
user
åå 
.
åå 
Email
åå 
,
åå 
$str
çç 2
,
çç2 3
$"
éé 
$str
éé 
{
éé 
user
éé 
.
éé 
FullName
éé &
}
éé& '
$stréé' ´
"éé´ ¨
)
èè 
;
èè 
return
ëë 
Ok
ëë 
(
ëë 
new
ëë 
{
ëë 
Message
ëë #
=
ëë$ %
$str
ëë& @
}
ëëA B
)
ëëB C
;
ëëC D
}
íí 	
[
óó 	
HttpPut
óó	 
(
óó 
$str
óó 
)
óó 
]
óó 
public
òò 
async
òò 
Task
òò 
<
òò 
IActionResult
òò '
>
òò' (
ChangePassword
òò) 7
(
òò7 8
ChangePasswordDto
òò8 I
req
òòJ M
)
òòM N
{
ôô 	
var
õõ 
userId
õõ 
=
õõ 
int
õõ 
.
õõ 
Parse
õõ "
(
õõ" #
User
úú 
.
úú 
	FindFirst
úú 
(
úú 
System
úú %
.
úú% &
Security
úú& .
.
úú. /
Claims
úú/ 5
.
úú5 6

ClaimTypes
úú6 @
.
úú@ A
NameIdentifier
úúA O
)
úúO P
!
úúP Q
.
úúQ R
Value
úúR W
)
ùù 
;
ùù 
var
üü 
u
üü 
=
üü 
await
üü 
_db
üü 
.
üü 
Users
üü #
.
üü# $
	FindAsync
üü$ -
(
üü- .
userId
üü. 4
)
üü4 5
;
üü5 6
if
†† 
(
†† 
u
†† 
==
†† 
null
†† 
)
†† 
return
°° 
NotFound
°° 
(
°°  
$str
°°  0
)
°°0 1
;
°°1 2
if
§§ 
(
§§ 
!
§§ 
BCrypt
§§ 
.
§§ 
Net
§§ 
.
§§ 
BCrypt
§§ "
.
§§" #
Verify
§§# )
(
§§) *
req
§§* -
.
§§- .
CurrentPassword
§§. =
,
§§= >
u
§§? @
.
§§@ A
PasswordHash
§§A M
)
§§M N
)
§§N O
return
•• 

BadRequest
•• !
(
••! "
$str
••" >
)
••> ?
;
••? @
u
®® 
.
®® 
PasswordHash
®® 
=
®® 
BCrypt
®® #
.
®®# $
Net
®®$ '
.
®®' (
BCrypt
®®( .
.
®®. /
HashPassword
®®/ ;
(
®®; <
req
®®< ?
.
®®? @
NewPassword
®®@ K
)
®®K L
;
®®L M
await
©© 
_db
©© 
.
©© 
SaveChangesAsync
©© &
(
©©& '
)
©©' (
;
©©( )
await
¨¨ 
_audit
¨¨ 
.
¨¨ 
LogAsync
¨¨ !
(
¨¨! "
$str
≠≠ 
,
≠≠ 
u
ÆÆ 
.
ÆÆ 
Id
ÆÆ 
,
ÆÆ 
$str
ØØ 
,
ØØ 
$str
∞∞ "
,
∞∞" #
u
±± 
.
±± 
Id
±± 
,
±± 
u
≤≤ 
.
≤≤ 
Email
≤≤ 
)
≥≥ 
;
≥≥ 
await
∂∂ 
_email
∂∂ 
.
∂∂  
SendTemplatedAsync
∂∂ +
(
∂∂+ ,
u
∑∑ 
.
∑∑ 
Email
∑∑ 
,
∑∑ 
$str
∏∏ "
,
∏∏" #
$"
ππ 
$str
ππ 
{
ππ 
u
ππ 
.
ππ 
FullName
ππ  
}
ππ  !
$str
ππ! [
"
ππ[ \
)
∫∫ 
;
∫∫ 
return
ºº 
Ok
ºº 
(
ºº 
new
ºº 
{
ºº 
Message
ºº #
=
ºº$ %
$str
ºº& E
}
ººF G
)
ººG H
;
ººH I
}
ΩΩ 	
}
ææ 
}øø ãO
UD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Controllers\AuditController .cs
	namespace 	

PayrollApi
 
. 
Controllers  
{ 
[		 
ApiController		 
]		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
	Authorize 
( 
Roles 
= 
$str (
)( )
]) *
public 

class 
AuditController  
:! "
ControllerBase# 1
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
public 
AuditController 
( 
AppDbContext +
db, .
). /
=>0 2
_db3 6
=7 8
db9 ;
;; <
private 
bool 
IsAdmin 
=> 
User  $
.$ %
IsInRole% -
(- .
$str. 5
)5 6
;6 7
private 
bool 
IsHRManager  
=>! #
User$ (
.( )
IsInRole) 1
(1 2
$str2 =
)= >
;> ?
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetLogs) 0
(0 1
[ 
	FromQuery 
] 
DateTime  
from! %
,% &
[ 
	FromQuery 
] 
DateTime  
to! #
,# $
[ 
	FromQuery 
] 
string 
? 

entityType  *
=+ ,
null- 1
) 	
{ 	
var 
endOfDay 
= 
to 
. 
Date "
." #
AddDays# *
(* +
$num+ ,
), -
.- .
AddTicks. 6
(6 7
-7 8
$num8 9
)9 :
;: ;
var   
q   
=   
_db   
.   
	AuditLogs   !
.  ! "
Where  " '
(  ' (
l  ( )
=>  * ,
l!! 
.!! 
PerformedAt!! 
>=!!  
from!!! %
.!!% &
Date!!& *
&&!!+ -
l!!. /
.!!/ 0
PerformedAt!!0 ;
<=!!< >
endOfDay!!? G
)"" 
;"" 
if$$ 
($$ 
IsAdmin$$ 
&&$$ 
!$$ 
IsHRManager$$ '
)$$' (
{%% 
q&& 
=&& 
q&& 
.&& 
Where&& 
(&& 
l&& 
=>&&  
l&&! "
.&&" #

EntityType&&# -
==&&. 0
$str&&1 7
||&&8 :
l&&; <
.&&< =

EntityType&&= G
==&&H J
$str&&K \
)&&\ ]
;&&] ^
}'' 
else(( 
if(( 
((( 
IsHRManager((  
&&((! #
!(($ %
IsAdmin((% ,
)((, -
{)) 
q** 
=** 
q** 
.** 
Where** 
(** 
l** 
=>**  
l**! "
.**" #

EntityType**# -
==**. 0
$str**1 :
||**; =
l**> ?
.**? @

EntityType**@ J
==**K M
$str**N \
)**\ ]
;**] ^
}++ 
if-- 
(-- 
!-- 
string-- 
.-- 
IsNullOrEmpty-- %
(--% &

entityType--& 0
)--0 1
)--1 2
q.. 
=.. 
q.. 
... 
Where.. 
(.. 
l.. 
=>..  
l..! "
..." #

EntityType..# -
==... 0

entityType..1 ;
)..; <
;..< =
var00 
logs00 
=00 
await00 
q00 
.00 
OrderByDescending00 0
(000 1
l001 2
=>003 5
l006 7
.007 8
PerformedAt008 C
)00C D
.00D E
ToListAsync00E P
(00P Q
)00Q R
;00R S
return11 
Ok11 
(11 
new11 
{11 
Total11 !
=11" #
logs11$ (
.11( )
Count11) .
,11. /
Items110 5
=116 7
logs118 <
}11= >
)11> ?
;11? @
}22 	
[77 	
HttpGet77	 
(77 
$str77 
)77 
]77 
public88 
async88 
Task88 
<88 
IActionResult88 '
>88' (
ExportExcel88) 4
(884 5
[99 
	FromQuery99 
]99 
DateTime99  
from99! %
,99% &
[:: 
	FromQuery:: 
]:: 
DateTime::  
to::! #
,::# $
[;; 
	FromQuery;; 
];; 
string;; 
?;; 

entityType;;  *
=;;+ ,
null;;- 1
)<< 	
{== 	
try>> 
{?? 
var@@ 
start@@ 
=@@ 
from@@  
.@@  !
Date@@! %
;@@% &
varAA 
endAA 
=AA 
toAA 
.AA 
DateAA !
.AA! "
AddDaysAA" )
(AA) *
$numAA* +
)AA+ ,
.AA, -
AddTicksAA- 5
(AA5 6
-AA6 7
$numAA7 8
)AA8 9
;AA9 :
varCC 
qCC 
=CC 
_dbCC 
.CC 
	AuditLogsCC %
.CC% &
WhereCC& +
(CC+ ,
lCC, -
=>CC. 0
lCC1 2
.CC2 3
PerformedAtCC3 >
>=CC? A
startCCB G
&&CCH J
lCCK L
.CCL M
PerformedAtCCM X
<=CCY [
endCC\ _
)CC_ `
;CC` a
ifEE 
(EE 
IsAdminEE 
&&EE 
!EE  
IsHRManagerEE  +
)EE+ ,
{FF 
qGG 
=GG 
qGG 
.GG 
WhereGG 
(GG  
lGG  !
=>GG" $
lGG% &
.GG& '

EntityTypeGG' 1
==GG2 4
$strGG5 ;
||GG< >
lGG? @
.GG@ A

EntityTypeGGA K
==GGL N
$strGGO `
)GG` a
;GGa b
}HH 
elseII 
ifII 
(II 
IsHRManagerII $
&&II% '
!II( )
IsAdminII) 0
)II0 1
{JJ 
qKK 
=KK 
qKK 
.KK 
WhereKK 
(KK  
lKK  !
=>KK" $
lKK% &
.KK& '

EntityTypeKK' 1
==KK2 4
$strKK5 >
||KK? A
lKKB C
.KKC D

EntityTypeKKD N
==KKO Q
$strKKR `
)KK` a
;KKa b
}LL 
ifNN 
(NN 
!NN 
stringNN 
.NN 
IsNullOrEmptyNN )
(NN) *

entityTypeNN* 4
)NN4 5
)NN5 6
qOO 
=OO 
qOO 
.OO 
WhereOO 
(OO  
lOO  !
=>OO" $
lOO% &
.OO& '

EntityTypeOO' 1
==OO2 4

entityTypeOO5 ?
)OO? @
;OO@ A
varQQ 
logsQQ 
=QQ 
awaitQQ  
qQQ! "
.QQ" #
OrderByDescendingQQ# 4
(QQ4 5
lQQ5 6
=>QQ7 9
lQQ: ;
.QQ; <
PerformedAtQQ< G
)QQG H
.QQH I
ToListAsyncQQI T
(QQT U
)QQU V
;QQV W
ifSS 
(SS 
logsSS 
.SS 
CountSS 
==SS !
$numSS" #
)SS# $
{TT 
returnUU 

BadRequestUU %
(UU% &
$strUU& X
)UUX Y
;UUY Z
}VV 
varXX 
bytesXX 
=XX 
AuditExporterXX )
.XX) *
ExportAuditLogsXX* 9
(XX9 :
logsXX: >
)XX> ?
;XX? @
ifZZ 
(ZZ 
bytesZZ 
==ZZ 
nullZZ !
||ZZ" $
bytesZZ% *
.ZZ* +
LengthZZ+ 1
==ZZ2 4
$numZZ5 6
)ZZ6 7
{[[ 
return\\ 

StatusCode\\ %
(\\% &
$num\\& )
,\\) *
$str\\+ K
)\\K L
;\\L M
}]] 
var__ 
fileNamePrefix__ "
=__# $
IsAdmin__% ,
?__- .
$str__/ ;
:__< =
$str__> G
;__G H
var`` 
fname`` 
=`` 
$"`` 
{`` 
fileNamePrefix`` -
}``- .
$str``. /
{``/ 0
from``0 4
:``4 5
$str``5 ?
}``? @
$str``@ A
{``A B
to``B D
:``D E
$str``E O
}``O P
$str``P U
"``U V
;``V W
returnbb 
Filebb 
(bb 
bytescc 
,cc 
$strdd W
,ddW X
fnameee 
)ff 
;ff 
}gg 
catchhh 
(hh 
	Exceptionhh 
exhh 
)hh  
{ii 
Consolekk 
.kk 
	WriteLinekk !
(kk! "
$"kk" $
$strkk$ 3
{kk3 4
exkk4 6
}kk6 7
"kk7 8
)kk8 9
;kk9 :
returnll 

StatusCodell !
(ll! "
$numll" %
,ll% &
$"ll' )
$strll) 8
{ll8 9
exll9 ;
.ll; <
Messagell< C
}llC D
"llD E
)llE F
;llF G
}mm 
}nn 	
}oo 
}pp Ê¥
TD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Controllers\AdminController.cs
	namespace 	

PayrollApi
 
. 
Controllers  
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
[ 
	Authorize 
( 
Roles 
= 
$str 
) 
]  
public 

class 
AdminController  
:! "
ControllerBase# 1
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
private 
readonly 
IEmailService &
_email' -
;- .
private 
readonly 
IAuditService &
_audit' -
;- .
public 
AdminController 
( 
AppDbContext +
db, .
,. /
IEmailService0 =
email> C
,C D
IAuditServiceE R
auditServiceS _
)_ `
{ 	
_db 
= 
db 
; 
_email 
= 
email 
; 
_audit 
= 
auditService !
;! "
} 	
private!! 
int!! 
CurrentUserId!! !
=>!!" $
int!!% (
.!!( )
Parse!!) .
(!!. /
User!!/ 3
.!!3 4
FindFirstValue!!4 B
(!!B C

ClaimTypes!!C M
.!!M N
NameIdentifier!!N \
)!!\ ]
!!!] ^
)!!^ _
;!!_ `
private&& 
string&& 
CurrentUserEmail&& '
=>&&( *
User&&+ /
.&&/ 0
FindFirstValue&&0 >
(&&> ?

ClaimTypes&&? I
.&&I J
Email&&J O
)&&O P
??&&Q S
$str&&T \
;&&\ ]
[++ 	
HttpGet++	 
(++ 
$str++ 
)++ 
]++ 
public,, 
async,, 
Task,, 
<,, 
ActionResult,, &
<,,& '
PagedResult,,' 2
<,,2 3
UserListItem,,3 ?
>,,? @
>,,@ A
>,,A B
GetUsers,,C K
(,,K L
[-- 
	FromQuery-- 
]-- 
int-- 
page--  
=--! "
$num--# $
,--$ %
[.. 
	FromQuery.. 
].. 
int.. 
pageSize.. $
=..% &
$num..' )
,..) *
[// 
	FromQuery// 
]// 
string// 
?// 
search//  &
=//' (
null//) -
)00 	
{11 	
var22 
q22 
=22 
_db22 
.22 
Users22 
.22 
Include22 %
(22% &
u22& '
=>22( *
u22+ ,
.22, -
Profile22- 4
)224 5
.225 6
ThenInclude226 A
(22A B
p22B C
=>22D F
p22G H
.22H I

Department22I S
)22S T
.22T U
AsQueryable22U `
(22` a
)22a b
;22b c
if33 
(33 
!33 
string33 
.33 
IsNullOrWhiteSpace33 *
(33* +
search33+ 1
)331 2
)332 3
q44 
=44 
q44 
.44 
Where44 
(44 
u44 
=>44  
u44! "
.44" #
Email44# (
.44( )
Contains44) 1
(441 2
search442 8
)448 9
||44: <
u44= >
.44> ?
FullName44? G
.44G H
Contains44H P
(44P Q
search44Q W
)44W X
)44X Y
;44Y Z
var66 
(66 
total66 
,66 
items66 
)66 
=66  
await66! &
q66' (
.66( )
OrderBy66) 0
(660 1
u661 2
=>663 5
u666 7
.667 8
Id668 :
)66: ;
.77 
Select77 
(77 
u77 
=>77 
new77  
UserListItem77! -
{88 
Id99 
=99 
u99 
.99 
Id99 
,99 
Email:: 
=:: 
u:: 
.:: 
Email:: #
,::# $
FullName;; 
=;; 
u;;  
.;;  !
FullName;;! )
,;;) *
Role<< 
=<< 
u<< 
.<< 
Role<< !
.<<! "
ToString<<" *
(<<* +
)<<+ ,
,<<, -
IsActive== 
=== 
u==  
.==  !
IsActive==! )
,==) *

Department>> 
=>>  
u?? 
.?? 
Profile?? !
!=??" $
null??% )
?@@ 
u@@ 
.@@  
Profile@@  '
.@@' (

Department@@( 2
!=@@3 5
null@@6 :
?AA  !
uAA" #
.AA# $
ProfileAA$ +
.AA+ ,

DepartmentAA, 6
.AA6 7
NameAA7 ;
:BB  !
nullBB" &
:CC 
nullCC "
,CC" #
}DD 
)DD 
.EE 
ToPagedAsyncEE 
(EE 
pageEE "
,EE" #
pageSizeEE$ ,
)EE, -
;EE- .
returnGG 
OkGG 
(GG 
newHH 
PagedResultHH 
<HH  
UserListItemHH  ,
>HH, -
{II 
PageJJ 
=JJ 
pageJJ 
,JJ  
PageSizeKK 
=KK 
pageSizeKK '
,KK' (
TotalLL 
=LL 
totalLL !
,LL! "
ItemsMM 
=MM 
itemsMM !
,MM! "
}NN 
)OO 
;OO 
}PP 	
[UU 	
HttpPostUU	 
(UU 
$strUU 
)UU 
]UU 
publicVV 
asyncVV 
TaskVV 
<VV 
IActionResultVV '
>VV' (
CreateSkeletalUserVV) ;
(VV; <%
CreateSkeletalUserRequestVV< U
reqVVV Y
)VVY Z
{WW 	
ifXX 
(XX 
reqXX 
==XX 
nullXX 
)XX 
returnYY 

BadRequestYY !
(YY! "
$strYY" F
)YYF G
;YYG H
if[[ 
([[ 
![[ 
Enum[[ 
.[[ 
TryParse[[ 
<[[ 
UserRole[[ '
>[[' (
([[( )
req[[) ,
.[[, -
Role[[- 1
,[[1 2
true[[3 7
,[[7 8
out[[9 <
var[[= @
role[[A E
)[[E F
)[[F G
return\\ 

BadRequest\\ !
(\\! "
$str\\" 0
)\\0 1
;\\1 2
if]] 
(]] 
await]] 
_db]] 
.]] 
Users]] 
.]]  
AnyAsync]]  (
(]]( )
u]]) *
=>]]+ -
u]]. /
.]]/ 0
Email]]0 5
==]]6 8
req]]9 <
.]]< =
Email]]= B
)]]B C
)]]C D
return^^ 
Conflict^^ 
(^^  
$str^^  6
)^^6 7
;^^7 8
var`` 
tempPassword`` 
=`` 
Guid`` #
.``# $
NewGuid``$ +
(``+ ,
)``, -
.``- .
ToString``. 6
(``6 7
$str``7 :
)``: ;
[``; <
..``< >
$num``> @
]``@ A
+``B C
$str``D H
;``H I
varaa 
useraa 
=aa 
newaa 
Useraa 
{bb 
Emailcc 
=cc 
reqcc 
.cc 
Emailcc !
,cc! "
FullNamedd 
=dd 
reqdd 
.dd 
FullNamedd '
,dd' (
Roleee 
=ee 
roleee 
,ee 
PasswordHashff 
=ff 
BCryptff %
.ff% &
Netff& )
.ff) *
BCryptff* 0
.ff0 1
HashPasswordff1 =
(ff= >
tempPasswordff> J
)ffJ K
,ffK L
}gg 
;gg 
_dbii 
.ii 
Usersii 
.ii 
Addii 
(ii 
userii 
)ii 
;ii  
awaitjj 
_dbjj 
.jj 
SaveChangesAsyncjj &
(jj& '
)jj' (
;jj( )
varll 
profilell 
=ll 
newll 
EmployeeProfilell -
{ll. /
UserIdll0 6
=ll7 8
userll9 =
.ll= >
Idll> @
,ll@ A
DepartmentIdllB N
=llO P
reqllQ T
.llT U
DepartmentIdllU a
}llb c
;llc d
_dbmm 
.mm 
EmployeeProfilesmm  
.mm  !
Addmm! $
(mm$ %
profilemm% ,
)mm, -
;mm- .
awaitnn 
_dbnn 
.nn 
SaveChangesAsyncnn &
(nn& '
)nn' (
;nn( )
awaitqq 
_auditqq 
.qq 
LogAsyncqq !
(qq! "
$strrr 
,rr 
userss 
.ss 
Idss 
,ss 
$strtt 
,tt 
$"uu 
$struu  
{uu  !
useruu! %
.uu% &
Emailuu& +
}uu+ ,
$struu, ?
{uu? @
roleuu@ D
}uuD E
"uuE F
,uuF G
CurrentUserIdvv 
,vv 
CurrentUserEmailww  
)xx 
;xx 
_db{{ 
.{{ 
Notifications{{ 
.{{ 
Add{{ !
({{! "
new|| 
Notification||  
{}} 
UserId~~ 
=~~ 
user~~ !
.~~! "
Id~~" $
,~~$ %
Subject 
= 
$str 2
,2 3
Message
ÄÄ 
=
ÄÄ 
$"
ÅÅ 
$str
ÅÅ U
{
ÅÅU V
tempPassword
ÅÅV b
}
ÅÅb c
"
ÅÅc d
,
ÅÅd e
}
ÇÇ 
)
ÉÉ 
;
ÉÉ 
await
ÑÑ 
_db
ÑÑ 
.
ÑÑ 
SaveChangesAsync
ÑÑ &
(
ÑÑ& '
)
ÑÑ' (
;
ÑÑ( )
try
áá 
{
àà 
await
ââ 
_email
ââ 
.
ââ  
SendTemplatedAsync
ââ /
(
ââ/ 0
user
ää 
.
ää 
Email
ää 
,
ää 
$str
ãã /
,
ãã/ 0
$"
åå 
$str
åå 
{
åå 
user
åå 
.
åå 
FullName
åå '
}
åå' (
$str
åå( V
"
ååV W
+
çç 
$"
çç 
$str
çç I
"
ççI J
)
éé 
;
éé 
}
èè 
catch
êê 
(
êê 
	Exception
êê 
ex
êê 
)
êê  
{
ëë 
Console
íí 
.
íí 
	WriteLine
íí !
(
íí! "
$"
íí" $
$str
íí$ 7
{
íí7 8
ex
íí8 :
.
íí: ;
Message
íí; B
}
ííB C
"
ííC D
)
ííD E
;
ííE F
}
ìì 
return
ïï 
Ok
ïï 
(
ïï 
new
ññ 
{
óó 
user
òò 
.
òò 
Id
òò 
,
òò 
user
ôô 
.
ôô 
Email
ôô 
,
ôô 
user
öö 
.
öö 
FullName
öö !
,
öö! "
Role
õõ 
=
õõ 
user
õõ 
.
õõ  
Role
õõ  $
.
õõ$ %
ToString
õõ% -
(
õõ- .
)
õõ. /
,
õõ/ 0
TempPassword
úú  
=
úú! "
tempPassword
úú# /
,
úú/ 0
}
ùù 
)
ûû 
;
ûû 
}
üü 	
[
§§ 	
HttpPost
§§	 
(
§§ 
$str
§§ 1
)
§§1 2
]
§§2 3
public
•• 
async
•• 
Task
•• 
<
•• 
IActionResult
•• '
>
••' (
ResetUserPassword
••) :
(
••: ;
int
••; >
userId
••? E
)
••E F
{
¶¶ 	
var
ßß 
user
ßß 
=
ßß 
await
ßß 
_db
ßß  
.
ßß  !
Users
ßß! &
.
ßß& '
	FindAsync
ßß' 0
(
ßß0 1
userId
ßß1 7
)
ßß7 8
;
ßß8 9
if
®® 
(
®® 
user
®® 
==
®® 
null
®® 
)
®® 
return
©© 
NotFound
©© 
(
©©  
)
©©  !
;
©©! "
var
´´ 
tempPassword
´´ 
=
´´ 
Guid
´´ #
.
´´# $
NewGuid
´´$ +
(
´´+ ,
)
´´, -
.
´´- .
ToString
´´. 6
(
´´6 7
$str
´´7 :
)
´´: ;
[
´´; <
..
´´< >
$num
´´> @
]
´´@ A
+
´´B C
$str
´´D H
;
´´H I
user
¨¨ 
.
¨¨ 
PasswordHash
¨¨ 
=
¨¨ 
BCrypt
¨¨  &
.
¨¨& '
Net
¨¨' *
.
¨¨* +
BCrypt
¨¨+ 1
.
¨¨1 2
HashPassword
¨¨2 >
(
¨¨> ?
tempPassword
¨¨? K
)
¨¨K L
;
¨¨L M
user
≠≠ 
.
≠≠ 
	UpdatedAt
≠≠ 
=
≠≠ 
DateTime
≠≠ %
.
≠≠% &
UtcNow
≠≠& ,
;
≠≠, -
await
ÆÆ 
_db
ÆÆ 
.
ÆÆ 
SaveChangesAsync
ÆÆ &
(
ÆÆ& '
)
ÆÆ' (
;
ÆÆ( )
await
±± 
_audit
±± 
.
±± 
LogAsync
±± !
(
±±! "
$str
≤≤ 
,
≤≤ 
user
≥≥ 
.
≥≥ 
Id
≥≥ 
,
≥≥ 
$str
¥¥ 
,
¥¥  
$"
µµ 
$str
µµ >
"
µµ> ?
,
µµ? @
CurrentUserId
∂∂ 
,
∂∂ 
CurrentUserEmail
∑∑  
)
∏∏ 
;
∏∏ 
_db
ªª 
.
ªª 
Notifications
ªª 
.
ªª 
Add
ªª !
(
ªª! "
new
ºº 
Notification
ºº  
{
ΩΩ 
UserId
ææ 
=
ææ 
user
ææ !
.
ææ! "
Id
ææ" $
,
ææ$ %
Subject
øø 
=
øø 
$str
øø .
,
øø. /
Message
¿¿ 
=
¿¿ 
$"
¿¿  
$str
¿¿  R
{
¿¿R S
tempPassword
¿¿S _
}
¿¿_ `
"
¿¿` a
,
¿¿a b
}
¡¡ 
)
¬¬ 
;
¬¬ 
await
√√ 
_db
√√ 
.
√√ 
SaveChangesAsync
√√ &
(
√√& '
)
√√' (
;
√√( )
try
∆∆ 
{
«« 
await
»» 
_email
»» 
.
»»  
SendTemplatedAsync
»» /
(
»»/ 0
user
…… 
.
…… 
Email
…… 
,
…… 
$str
   5
,
  5 6
$"
ÀÀ 
$str
ÀÀ 
{
ÀÀ 
user
ÀÀ !
.
ÀÀ! "
FullName
ÀÀ" *
}
ÀÀ* +
$str
ÀÀ+ S
{
ÀÀS T
tempPassword
ÀÀT `
}
ÀÀ` a
$strÀÀa å
"ÀÀå ç
)
ÃÃ 
;
ÃÃ 
}
ÕÕ 
catch
ŒŒ 
(
ŒŒ 
	Exception
ŒŒ 
ex
ŒŒ 
)
ŒŒ  
{
œœ 
Console
–– 
.
–– 
	WriteLine
–– !
(
––! "
$"
––" $
$str
––$ 7
{
––7 8
ex
––8 :
.
––: ;
Message
––; B
}
––B C
"
––C D
)
––D E
;
––E F
}
—— 
return
”” 
Ok
”” 
(
”” 
new
‘‘ 
{
’’ 
Message
÷÷ 
=
÷÷ 
$str
÷÷ e
,
÷÷e f
}
◊◊ 
)
ÿÿ 
;
ÿÿ 
}
ŸŸ 	
[
ﬁﬁ 	
HttpPut
ﬁﬁ	 
(
ﬁﬁ 
$str
ﬁﬁ (
)
ﬁﬁ( )
]
ﬁﬁ) *
public
ﬂﬂ 
async
ﬂﬂ 
Task
ﬂﬂ 
<
ﬂﬂ 
IActionResult
ﬂﬂ '
>
ﬂﬂ' (
	SetActive
ﬂﬂ) 2
(
ﬂﬂ2 3
int
ﬂﬂ3 6
userId
ﬂﬂ7 =
,
ﬂﬂ= >
[
ﬂﬂ? @
	FromQuery
ﬂﬂ@ I
]
ﬂﬂI J
bool
ﬂﬂK O
active
ﬂﬂP V
)
ﬂﬂV W
{
‡‡ 	
var
·· 
user
·· 
=
·· 
await
·· 
_db
··  
.
··  !
Users
··! &
.
··& '
	FindAsync
··' 0
(
··0 1
userId
··1 7
)
··7 8
;
··8 9
if
‚‚ 
(
‚‚ 
user
‚‚ 
==
‚‚ 
null
‚‚ 
)
‚‚ 
return
„„ 
NotFound
„„ 
(
„„  
)
„„  !
;
„„! "
user
ÂÂ 
.
ÂÂ 
IsActive
ÂÂ 
=
ÂÂ 
active
ÂÂ "
;
ÂÂ" #
user
ÊÊ 
.
ÊÊ 
	UpdatedAt
ÊÊ 
=
ÊÊ 
DateTime
ÊÊ %
.
ÊÊ% &
UtcNow
ÊÊ& ,
;
ÊÊ, -
await
ÁÁ 
_db
ÁÁ 
.
ÁÁ 
SaveChangesAsync
ÁÁ &
(
ÁÁ& '
)
ÁÁ' (
;
ÁÁ( )
await
ÍÍ 
_audit
ÍÍ 
.
ÍÍ 
LogAsync
ÍÍ !
(
ÍÍ! "
$str
ÎÎ 
,
ÎÎ 
user
ÏÏ 
.
ÏÏ 
Id
ÏÏ 
,
ÏÏ 
$str
ÌÌ 
,
ÌÌ  
$"
ÓÓ 
$str
ÓÓ 
{
ÓÓ  
(
ÓÓ  !
active
ÓÓ! '
?
ÓÓ( )
$str
ÓÓ* 5
:
ÓÓ6 7
$str
ÓÓ8 E
)
ÓÓE F
}
ÓÓF G
"
ÓÓG H
,
ÓÓH I
CurrentUserId
ÔÔ 
,
ÔÔ 
CurrentUserEmail
  
)
ÒÒ 
;
ÒÒ 
_db
ÙÙ 
.
ÙÙ 
Notifications
ÙÙ 
.
ÙÙ 
Add
ÙÙ !
(
ÙÙ! "
new
ıı 
Notification
ıı  
{
ˆˆ 
UserId
˜˜ 
=
˜˜ 
user
˜˜ !
.
˜˜! "
Id
˜˜" $
,
˜˜$ %
Subject
¯¯ 
=
¯¯ 
$str
¯¯ 6
,
¯¯6 7
Message
˘˘ 
=
˘˘ 
$"
˘˘  
$str
˘˘  4
{
˘˘4 5
(
˘˘5 6
active
˘˘6 <
?
˘˘= >
$str
˘˘? G
:
˘˘H I
$str
˘˘J T
)
˘˘T U
}
˘˘U V
"
˘˘V W
,
˘˘W X
}
˙˙ 
)
˚˚ 
;
˚˚ 
await
¸¸ 
_db
¸¸ 
.
¸¸ 
SaveChangesAsync
¸¸ &
(
¸¸& '
)
¸¸' (
;
¸¸( )
try
ˇˇ 
{
ÄÄ 
await
ÅÅ 
_email
ÅÅ 
.
ÅÅ  
SendTemplatedAsync
ÅÅ /
(
ÅÅ/ 0
user
ÇÇ 
.
ÇÇ 
Email
ÇÇ 
,
ÇÇ 
$str
ÉÉ ,
,
ÉÉ, -
$"
ÑÑ 
$str
ÑÑ 
{
ÑÑ 
user
ÑÑ !
.
ÑÑ! "
FullName
ÑÑ" *
}
ÑÑ* +
$str
ÑÑ+ Q
{
ÑÑQ R
(
ÑÑR S
active
ÑÑS Y
?
ÑÑZ [
$str
ÑÑ\ d
:
ÑÑe f
$str
ÑÑg q
)
ÑÑq r
}
ÑÑr s
$str
ÑÑs x
"
ÑÑx y
)
ÖÖ 
;
ÖÖ 
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
ex
áá 
)
áá  
{
àà 
Console
ââ 
.
ââ 
	WriteLine
ââ !
(
ââ! "
$"
ââ" $
$str
ââ$ 7
{
ââ7 8
ex
ââ8 :
.
ââ: ;
Message
ââ; B
}
ââB C
"
ââC D
)
ââD E
;
ââE F
}
ää 
return
åå 
Ok
åå 
(
åå 
new
åå 
{
åå 
user
åå  
.
åå  !
Id
åå! #
,
åå# $
user
åå% )
.
åå) *
IsActive
åå* 2
}
åå3 4
)
åå4 5
;
åå5 6
}
çç 	
[
íí 	

HttpDelete
íí	 
(
íí 
$str
íí $
)
íí$ %
]
íí% &
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì '
>
ìì' (

DeleteUser
ìì) 3
(
ìì3 4
int
ìì4 7
userId
ìì8 >
)
ìì> ?
{
îî 	
var
ïï 
user
ïï 
=
ïï 
await
ïï 
_db
ïï  
.
ññ 
Users
ññ 
.
ññ 
Include
ññ 
(
ññ 
u
ññ  
=>
ññ! #
u
ññ$ %
.
ññ% &
Profile
ññ& -
)
ññ- .
.
óó !
FirstOrDefaultAsync
óó $
(
óó$ %
u
óó% &
=>
óó' )
u
óó* +
.
óó+ ,
Id
óó, .
==
óó/ 1
userId
óó2 8
)
óó8 9
;
óó9 :
if
òò 
(
òò 
user
òò 
==
òò 
null
òò 
)
òò 
return
ôô 
NotFound
ôô 
(
ôô  
$"
ôô  "
$str
ôô" /
{
ôô/ 0
userId
ôô0 6
}
ôô6 7
$str
ôô7 A
"
ôôA B
)
ôôB C
;
ôôC D
if
õõ 
(
õõ 
user
õõ 
.
õõ 
Profile
õõ 
!=
õõ 
null
õõ  $
)
õõ$ %
_db
úú 
.
úú 
EmployeeProfiles
úú $
.
úú$ %
Remove
úú% +
(
úú+ ,
user
úú, 0
.
úú0 1
Profile
úú1 8
)
úú8 9
;
úú9 :
_db
ûû 
.
ûû 
Users
ûû 
.
ûû 
Remove
ûû 
(
ûû 
user
ûû !
)
ûû! "
;
ûû" #
await
üü 
_db
üü 
.
üü 
SaveChangesAsync
üü &
(
üü& '
)
üü' (
;
üü( )
await
¢¢ 
_audit
¢¢ 
.
¢¢ 
LogAsync
¢¢ !
(
¢¢! "
$str
££ 
,
££ 
user
§§ 
.
§§ 
Id
§§ 
,
§§ 
$str
•• 
,
•• 
$"
¶¶ 
$str
¶¶ 
{
¶¶ 
user
¶¶ 
.
¶¶ 
Email
¶¶ "
}
¶¶" #
$str
¶¶# 4
"
¶¶4 5
,
¶¶5 6
CurrentUserId
ßß 
,
ßß 
CurrentUserEmail
®®  
)
©© 
;
©© 
return
´´ 
	NoContent
´´ 
(
´´ 
)
´´ 
;
´´ 
}
¨¨ 	
}
≠≠ 
}ÆÆ †2
TD:\Repos\MicroProject_MiniPayroll\Back-end\PayrollApi\Controllers\.MemoController.cs
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
[ 
	Authorize 

(
 
Roles 
= 
$str 0
)0 1
]1 2
public 
class 
MemoController 
: 
ControllerBase ,
{ 
private 
readonly 
AppDbContext !
_db" %
;% &
private 
readonly 
IEmailService "
_email# )
;) *
private 
int 
CurrentUserId 
=>  
int! $
.$ %
Parse% *
(* +
User+ /
./ 0
FindFirstValue0 >
(> ?

ClaimTypes? I
.I J
NameIdentifierJ X
)X Y
!Y Z
)Z [
;[ \
public 

MemoController 
( 
AppDbContext &
db' )
,) *
IEmailService+ 8
email9 >
)> ?
{ 
_db 
= 
db 
; 
_email 
= 
email 
; 
} 
[ 
HttpGet 
] 
public   

async   
Task   
<   
IActionResult   #
>  # $
GetMemos  % -
(  - .
)  . /
{!! 
var"" 
memos"" 
="" 
await"" 
_db"" 
."" 
Memos"" #
.""# $
Where""$ )
("") *
m""* +
=>"", .
m""/ 0
.""0 1
UserId""1 7
==""8 :
CurrentUserId""; H
)""H I
.""I J
ToListAsync""J U
(""U V
)""V W
;""W X
return$$ 
Ok$$ 
($$ 
memos$$ 
)$$ 
;$$ 
}%% 
['' 
HttpPost'' 
]'' 
public(( 

async(( 
Task(( 
<(( 
IActionResult(( #
>((# $
AddMemo((% ,
(((, -
[((- .
FromBody((. 6
]((6 7
MemoDto((8 ?
dto((@ C
)((C D
{)) 
var** 
userId** 
=** 
int** 
.** 
Parse** 
(** 
User** #
.**# $
FindFirstValue**$ 2
(**2 3

ClaimTypes**3 =
.**= >
NameIdentifier**> L
)**L M
!**M N
)**N O
;**O P
var,, 
memo,, 
=,, 
new,, 
Memo,, 
{-- 	
UserId.. 
=.. 
userId.. 
,.. 
Date// 
=// 
dto// 
.// 
Date// 
,// 
Content00 
=00 
dto00 
.00 
Content00 !
,00! "
}11 	
;11	 

_db33 
.33 
Memos33 
.33 
Add33 
(33 
memo33 
)33 
;33 
await44 
_db44 
.44 
SaveChangesAsync44 "
(44" #
)44# $
;44$ %
return66 
Ok66 
(66 
memo66 
)66 
;66 
}77 
[99 
HttpPut99 
(99 
$str99 
)99 
]99 
public:: 

async:: 
Task:: 
<:: 
IActionResult:: #
>::# $

UpdateMemo::% /
(::/ 0
int::0 3
id::4 6
,::6 7
[::8 9
FromBody::9 A
]::A B
Memo::C G
request::H O
)::O P
{;; 
var<< 
memo<< 
=<< 
await<< 
_db<< 
.<< 
Memos<< "
.<<" #
FirstOrDefaultAsync<<# 6
(<<6 7
m<<7 8
=><<9 ;
m== 
.== 
Id== 
==== 
id== 
&&== 
m== 
.== 
UserId== "
====# %
CurrentUserId==& 3
)>> 	
;>>	 

if?? 

(?? 
memo?? 
==?? 
null?? 
)?? 
return@@ 
NotFound@@ 
(@@ 
)@@ 
;@@ 
memoBB 
.BB 
ContentBB 
=BB 
requestBB 
.BB 
ContentBB &
;BB& '
memoCC 
.CC 
DateCC 
=CC 
requestCC 
.CC 
DateCC  
;CC  !
awaitDD 
_dbDD 
.DD 
SaveChangesAsyncDD "
(DD" #
)DD# $
;DD$ %
returnEE 
OkEE 
(EE 
memoEE 
)EE 
;EE 
}FF 
[HH 

HttpDeleteHH 
(HH 
$strHH 
)HH 
]HH 
publicII 

asyncII 
TaskII 
<II 
IActionResultII #
>II# $

DeleteMemoII% /
(II/ 0
intII0 3
idII4 6
)II6 7
{JJ 
varKK 
memoKK 
=KK 
awaitKK 
_dbKK 
.KK 
MemosKK "
.KK" #
FirstOrDefaultAsyncKK# 6
(KK6 7
mKK7 8
=>KK9 ;
mLL 
.LL 
IdLL 
==LL 
idLL 
&&LL 
mLL 
.LL 
UserIdLL "
==LL# %
CurrentUserIdLL& 3
)MM 	
;MM	 

ifNN 

(NN 
memoNN 
==NN 
nullNN 
)NN 
returnOO 
NotFoundOO 
(OO 
)OO 
;OO 
_dbQQ 
.QQ 
MemosQQ 
.QQ 
RemoveQQ 
(QQ 
memoQQ 
)QQ 
;QQ 
awaitRR 
_dbRR 
.RR 
SaveChangesAsyncRR "
(RR" #
)RR# $
;RR$ %
returnSS 
OkSS 
(SS 
)SS 
;SS 
}TT 
}UU 